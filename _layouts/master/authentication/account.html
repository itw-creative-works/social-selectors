---
### ALL PAGES ###
layout: master/global/default

### REGULAR PAGES ###
head:
  post-bundle-css: '
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/bootstrap-icons/font/bootstrap-icons.css">

    <!-- CSS Front Template -->

    <link rel="stylesheet" href="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/css/theme.min.css" data-hs-appearance="default">
    <link rel="preload" href="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/css/theme-dark.min.css" data-hs-appearance="dark" as="style">

    <style data-hs-appearance-onload-styles>
      * {
        transition: unset !important;
      }

      body {
        // opacity: 0;
      }
    </style>
    <style media="screen">
      .auth-signin-provider-btn * {
        pointer-events: none;
      }
      .fs-badge {
        font-size: 2rem;
      }
      a.dropdown-item * {
        pointer-events: none;
      }
    </style>
  '

foot:
  post-bundle-script: '

    <!-- Theme  -->
    {%- include /master/vendor/front-admin/v2/js/theme-prefix.html -%}

    <!-- JS Global Compulsory  -->
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/jquery-migrate/dist/jquery-migrate.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JS Implementing Plugins -->
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/hs-navbar-vertical-aside/dist/hs-navbar-vertical-aside.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/hs-form-search/dist/hs-form-search.min.js"></script>

    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/hs-file-attach/dist/hs-file-attach.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/hs-sticky-block/dist/hs-sticky-block.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/hs-scrollspy/dist/hs-scrollspy.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/imask/dist/imask.min.js"></script>
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/tom-select/dist/js/tom-select.complete.min.js"></script>

    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/vendor/clipboard/dist/clipboard.min.js"></script>

    <!-- JS Front -->
    <script src="https://cdn.itwcreativeworks.com/assets/ultimate-jekyll/vendor/front-admin/v2/js/theme.min.js"></script>

    <!-- ITW CW -->
    <script src="https://cdn.jsdelivr.net/npm/wonderful-fetch@latest/dist/index.min.js?cb={{ site.time | date: "%s" }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/node-powertools@0.0.16/dist/index.min.js?cb={{ site.time | date: "%s" }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.19.0/js/md5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/countries-list@2.6.1/dist/index.es5.min.js"></script>
    <script type="text/javascript" src="/assets/js/master.js?cb={{ site.time | date: "%s" }}" async defer></script>
    {%- include /master/misc/embed-manager.html -%}

  '

settings:
  include-app-foot: false
  include-app-head: false
  include-app-footer: false
  include-app-header: false
  include-script-bundle: false
  include-script-core: true
  include-css-bundle: false
  manager-configuration: "
    {
      libraries: {
        cookieconsent: {
          enabled: false
        },
        tawk: {
          enabled: false
        },
        lazysizes: {
          enabled: false,
        },
      },
      auth: {
        state: 'required',
        sends: {
          required: '/authentication/signin/',
        }
      }
    }
  "
---
<main id="content" role="main" class="main">
  <!-- Content -->
  <div class="content container-fluid">
    <!-- Page Header -->
    <div class="page-header">
      <div class="row align-items-end">
        <div class="col-sm mb-2 mb-sm-0">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-no-gutter">
              <li class="breadcrumb-item"><a class="breadcrumb-link" href="{{ site.url }}">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Account</li>
            </ol>
          </nav>

          <!-- <h1 class="page-header-title">Settings</h1> -->
        </div>

        <div class="col-sm-auto">
          <a class="btn btn-ghost-primary" href="{{ site.url }}">
            <i class="bi-arrow-left me-1"></i> Return home
          </a>
        </div>
      </div>
    </div>
    <!-- End Page Header -->

    <div class="row">
      <div class="col-lg-3">
        <!-- Navbar -->
        <div class="navbar-expand-lg navbar-vertical mb-3 mb-lg-5">
          <!-- Navbar Toggle -->
          <!-- Navbar Toggle -->
          <div class="d-grid">
            <button type="button" class="navbar-toggler btn btn-white mb-3" data-bs-toggle="collapse" data-bs-target="#navbarVerticalNavMenu" aria-label="Toggle navigation" aria-expanded="false" aria-controls="navbarVerticalNavMenu">
              <span class="d-flex justify-content-between align-items-center">
                <span class="text-dark">Menu</span>

                <span class="navbar-toggler-default">
                  <i class="bi-list"></i>
                </span>

                <span class="navbar-toggler-toggled">
                  <i class="bi-x"></i>
                </span>
              </span>
            </button>
          </div>
          <!-- End Navbar Toggle -->
          <!-- End Navbar Toggle -->

          <!-- Navbar Collapse -->
          <div id="navbarVerticalNavMenu" class="collapse navbar-collapse">
            <ul id="navbarSettings" class="js-sticky-block js-scrollspy card card-navbar-nav nav nav-tabs nav-lg nav-vertical" data-hs-sticky-block-options='{
                   "parentSelector": "#navbarVerticalNavMenu",
                   "targetSelector": "#header",
                   "breakpoint": "lg",
                   "startPoint": "#navbarVerticalNavMenu",
                   "endPoint": "#stickyBlockEndPoint",
                   "stickyOffsetTop": 20
                 }'>
             <li class="nav-item">
               <a class="nav-link active" href="#content">
                 <i class="bi-person nav-icon"></i> Account details
               </a>
             </li>
              <li class="nav-item">
                <a class="nav-link" href="#personalInformation">
                  <i class="bi-person nav-icon"></i> Personal information
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#billing">
                  <i class="bi-shield-lock nav-icon"></i> Billing
                </a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="#referrals">
                  <i class="bi-key nav-icon"></i> Referrals
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#apiKeys">
                  <i class="bi-key nav-icon"></i> API Keys
                </a>
              </li>
              <li id="changePasswordParent" class="nav-item">
                <a class="nav-link" href="#changePassword">
                  <i class="bi-shield-lock nav-icon"></i> Password
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#signinMethods">
                  <i class="bi-instagram nav-icon"></i> Signin methods
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#connectedAccounts">
                  <i class="bi-diagram-3 nav-icon"></i> Connected accounts
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#activeSessions">
                  <i class="bi-phone nav-icon"></i> Active sessions
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#deleteAccount">
                  <i class="bi-trash nav-icon"></i> Delete account
                </a>
              </li>
            </ul>
          </div>
          <!-- End Navbar Collapse -->
        </div>
        <!-- End Navbar -->
      </div>

      <div class="col-lg-9">
        <div id="spinner-loader">
          <div class="card">
            <div class="d-flex justify-content-center my-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </div>
        </div>
        <div id="account-parent" hidden>
          <div class="d-grid gap-3 gap-lg-5">

            <!-- Card -->
            <div class="card">
              <!-- Profile Cover -->
              <div class="profile-cover">
                <div class="profile-cover-img-wrapper">
                  <img class="profile-cover-img" src="https://htmlstream.com/preview/front-dashboard-v2.0/assets/img/1920x400/img1.jpg" alt="Cover image">
                </div>
              </div>
              <!-- End Profile Cover -->

              <!-- Profile Header -->
              <div class="text-center mb-5">
                <!-- Avatar -->
                <div class="avatar avatar-xxl avatar-circle profile-cover-avatar">
                  <a id="auth-user-profile-parent" href="javascript:;" rel="nofollow" target="_blank">
                    <img id="auth-user-profile-img" class="avatar-img" src="" alt="Profile image">
                  </a>
                  <span class="avatar-status avatar-status-success"></span>
                </div>
                <!-- End Avatar -->

                <h1 class="page-header-title">
                  <span class="auth-email-element"></span>
                  <!-- <i class="bi-patch-check-fill fs-2 text-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="Top endorsed" aria-label="Top endorsed"></i> -->
                  <span id="premium-badge"></span>
                </h1>

                <div id="profile-badges" class="mb-2"></div>

                <!-- List -->
                <ul class="list-inline list-px-2">
                  <!-- <li class="list-inline-item">
                    <i class="bi-building me-1"></i>
                    <span>Htmlstream</span>
                  </li> -->

                  <!-- <li class="list-inline-item">
                    <i class="bi-geo-alt me-1"></i>
                    <a href="#">San Francisco,</a>
                    <a href="#">US</a>
                  </li> -->

                  <!-- <li class="list-inline-item">
                    <i class="bi-star-fill me-1"></i>
                    <span>Premium</span>
                  </li> -->

                  <li class="list-inline-item">
                    <i class="bi-calendar-week me-1"></i>
                    <span>Joined <span class="auth-created-element"></span> </span>
                  </li>
                </ul>
                <!-- End List -->
              </div>
              <!-- End Profile Header -->
            </div>
            <!-- End Card -->

            <!-- Card -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title h4">Account details</h2>
              </div>

              <!-- Body -->
              <div class="card-body">
                <!-- Form -->
                <form>
                  <!-- Form -->
                  <div class="mb-3">
                    <label for="accountDetails_email" class="form-label">Email</label>

                    <div class="input-group input-group-sm input-group-merge table-input-group">
                      <input id="accountDetails_email" type="text" class="form-control form-control-light auth-email-element" readonly value="">
                      <a class="js-clipboard input-group-append input-group-text" href="javascript:;" data-bs-toggle="tooltip" title="Copy to clipboard" data-hs-clipboard-options='{
                          "type": "tooltip",
                          "successText": "Copied!",
                          "contentTarget": "#accountDetails_email",
                          "classChangeTarget": "#accountDetails_emailIcon",
                          "defaultClass": "bi-clipboard",
                          "successClass": "bi-check"
                         }'>
                        <i id="accountDetails_emailIcon" class="bi-clipboard"></i>
                      </a>
                    </div>
                  </div>


                  <div class="mb-3">
                    <label for="accountDetails_uid" class="form-label">User ID</label>

                    <div class="input-group input-group-sm input-group-merge table-input-group">
                      <input id="accountDetails_uid" type="text" class="form-control form-control-light auth-uid-element" readonly value="">
                      <a class="js-clipboard input-group-append input-group-text" href="javascript:;" data-bs-toggle="tooltip" title="Copy to clipboard" data-hs-clipboard-options='{
                          "type": "tooltip",
                          "successText": "Copied!",
                          "contentTarget": "#accountDetails_uid",
                          "classChangeTarget": "#accountDetails_uidIcon",
                          "defaultClass": "bi-clipboard",
                          "successClass": "bi-check"
                         }'>
                        <i id="accountDetails_uidIcon" class="bi-clipboard"></i>
                      </a>
                    </div>
                  </div>


                  <!-- <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">Save changes</button>
                  </div> -->
                </form>
                <!-- End Form -->
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <!-- Card -->
            <div id="personalInformation" class="card">
              <div class="card-header">
                <h2 class="card-title h4">
                  Personal information <i class="bi-question-circle text-body ms-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Personal information is not displayed publicly."></i>
                </h2>
              </div>

              <!-- Body -->
              <div class="card-body">
                <!-- Form -->
                <form id="personal-information-form" data-allow-resubmit="true">
                  <!-- Form -->
                  <div class="mb-3">
                    <label for="firstNameLabel" class="form-label">Full name</label>

                    <div class="input-group input-group-sm-vertical">
                      <input type="text" class="form-control" name="name.first" id="firstNameLabel" placeholder="Jon" aria-label="Jon" value="" autocomplete="given-name">
                      <input type="text" class="form-control" name="name.last" id="lastNameLabel" placeholder="Snow" aria-label="Snow" value="" autocomplete="family-name">
                    </div>
                  </div>
                  <!-- End Form -->

                  <!-- Form -->
                  <div class="mb-3">
                    <label for="phoneNumberLabel" class="form-label">Phone</label>

                    <div class="input-group input-group-xs-vertical">
                      <input type="text" class="js-input-mask form-control" name="telephone.countryCode" placeholder="+1" aria-label="+1" value="" style="max-width: 5rem;" autocomplete="tel-country-code" data-hs-mask-options='{
                               "mask": "+0000"
                             }'>
                      <input type="text" class="js-input-mask form-control" name="telephone.national" id="phoneNumberLabel" placeholder="(xxx) xxx-xxxx" aria-label="(xxx) xxx-xxxx" value="" autocomplete="tel-national" data-hs-mask-options='{
                               "mask": "(000) 000-0000"
                             }'>
                   </div>
                  </div>
                  <!-- End Form -->

                  <div class="mb-3">
                    <label for="birthdayLabel" class="form-label">Birthday</label>

                    <input type="date" class="form-control" name="birthday.timestamp" id="birthdayLabel" placeholder="" aria-label="now" value="" autocomplete="bday">
                  </div>

                  <div class="mb-3">
                    <label for="genderLabel" class="form-label">Gender</label>

                    <select id="genderLabel" name="gender" class="form-select" autocomplete="sex">
                      <option value="">Choose a gender</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  <div class="mb-3">
                    <label for="countryLabel" class="form-label">Country</label>

                    <!-- Select -->
                    <select id="countryLabel" name="location.country" class="form-select" autocomplete="country">

                    </select>
                    <!-- <div class="tom-select-custom mb-4">
                      <select class="js-select form-select" id="locationLabel">
                        <option value="AF" data-option-template='<span class="d-flex align-items-center"><img class="avatar avatar-xss avatar-circle me-2" src="./assets/vendor/flag-icon-css/flags/1x1/af.svg" alt="Afghanistan Flag" /><span class="text-truncate">Afghanistan</span></span>'>Afghanistan</option>
                        <option value="AX" data-option-template='<span class="d-flex align-items-center"><img class="avatar avatar-xss avatar-circle me-2" src="./assets/vendor/flag-icon-css/flags/1x1/ax.svg" alt="Aland Islands Flag" /><span class="text-truncate">Aland Islands</span></span>'>Aland Islands</option>
                        <option value="ZW" data-option-template='<span class="d-flex align-items-center"><img class="avatar avatar-xss avatar-circle me-2" src="./assets/vendor/flag-icon-css/flags/1x1/zw.svg" alt="Zimbabwe Flag" /><span class="text-truncate">Zimbabwe</span></span>'>Zimbabwe</option>
                      </select>
                    </div> -->
                    <!-- End Select -->

                    <!-- <div class="mb-3">
                      <input type="text" class="form-control" name="city" id="cityLabel" placeholder="City" aria-label="City" value="London">
                    </div> -->

                    <!-- <input type="text" class="form-control" name="state" id="stateLabel" placeholder="State" aria-label="State"> -->
                  </div>

                  <!-- Form -->
                  <!-- <div class="row align-items-center mb-4">
                    <label class="col-sm-3 col-form-label form-label">Disable ads <span class="badge bg-primary text-uppercase ms-1">PRO</span></label>

                    <div class="col-sm-9">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                          With your Pro account, you can disable ads across the site.
                        </label>
                      </div>
                    </div>
                  </div> -->
                  <!-- End Form -->

                  <div class="alert alert-soft-success" role="alert" hidden>
                    <h4 class="alert-heading">Account saved!</h4>
                    <p>You have successfully updated your account.</p>
                  </div>
                  <div class="alert alert-soft-danger" role="alert" hidden>
                    <h4 class="alert-heading">Error</h4>
                    <p></p>
                  </div>

                  <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">Save changes</button>
                  </div>
                </form>
                <!-- End Form -->
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <!-- Card -->
            <div id="billing" class="card">
              <div class="card-header">
                <div class="d-flex align-items-center">
                  <h4 class="mb-0">Billing</h4>
                  <!-- <span class="badge bg-soft-danger text-danger ms-2">Disabled</span> -->
                </div>
              </div>

              <!-- Body -->
              <div class="card-body">
                <div class="row">
                  <div class="col-md mb-4 mb-md-0">
                    <div class="mb-4">
                      <span class="card-subtitle">Your plan<span class="auth-billing-frequency-element"></span>:</span>
                      <h3><span class="auth-billing-plan-id-element"></span><span class="auth-billing-start-date-element"></span></h3>
                    </div>
                    <div class="">
                      <small class="text-cap text-danger auth-billing-expiration-date-element"></small>
                    </div>

                    <!-- <div>
                      <span class="card-subtitle">Total per year</span>
                      <h1 class="text-primary">$264 USD</h1>
                    </div> -->
                  </div>
                  <!-- End Col -->

                  <div class="col-md-auto">
                    <div class="d-grid d-sm-flex gap-3">
                      <a class="btn btn-white auth-billing-update-btn" href="javascript:;" target="_blank" hidden>Manage plan</a>
                      <a class="btn btn-success auth-billing-subscribe-btn" href="{{ site.url }}/pricing" target="_blank" hidden><i class="bi-star-fill me-1"></i> Subscribe</a>
                    </div>
                  </div>
                  <!-- End Col -->
                </div>
                <!-- End Row -->
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <div id="referrals" class="card">
              <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                  <h4 class="card-title">Referrals</h4>
                  <span class="">
                    <i class="bi-gift-fill"></i>
                    <span class="auth-referral-count-element"></span>
                    <span class="">referrals</span>
                  </span>
                </div>
              </div>

              <div class="card-body">

                <div class="row">
                  <div class="col-12">

                    <h5 class="card-title">My referral code</h5>

                    <form>
                      <div class="mb-3">
                        <label for="referrals_code" class="form-label">Referral link</label>

                        <div class="input-group input-group-sm input-group-merge table-input-group">
                          <input id="referrals_code" type="text" class="form-control form-control-light auth-referral-code-element" readonly value="">
                          <a class="js-clipboard input-group-append input-group-text" href="javascript:;" data-bs-toggle="tooltip" title="Copy to clipboard" data-hs-clipboard-options='{
                              "type": "tooltip",
                              "successText": "Copied!",
                              "contentTarget": "#referrals_code",
                              "classChangeTarget": "#referrals_codeIcon",
                              "defaultClass": "bi-clipboard",
                              "successClass": "bi-check"
                             }'>
                            <i id="referrals_codeIcon" class="bi-clipboard"></i>
                          </a>
                        </div>
                      </div>
                    </form>

                  </div>
                </div>

                <hr>

                <div class="row">
                  <div class="col-12">

                    <h5 class="card-title">Share on socials</h5>
                    <p>Sharing your referral link on social media is a great way to get <strong>referral points</strong>!</p>
                    <div class="d-flex _justify-content-center justify-content-start">
                      <a class="auth-referral-social-link" href="#" data-provider="facebook">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/facebook.svg" alt="Facebook Logo">
                      </a>
                      <a class="auth-referral-social-link" href="#" data-provider="twitter">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/twitter.svg" alt="Twitter Logo">
                      </a>
                      <a class="auth-referral-social-link" href="#" data-provider="reddit">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/reddit.svg" alt="Reddit Logo">
                      </a>
                      <a class="auth-referral-social-link" href="#" data-provider="tumblr">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/tumblr.svg" alt="Tumblr Logo">
                      </a>
                      <a class="auth-referral-social-link" href="#" data-provider="pinterest">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/pinterest.svg" alt="Pinterest Logo">
                      </a>
                      <a class="auth-referral-social-link" href="#" data-provider="linkedin">
                        <img class="avatar avatar-md me-2" src="https://cdn.itwcreativeworks.com/assets/general/images/brands/color/linkedin.svg" alt="Linkedin Logo">
                      </a>
                    </div>
                  </div>
                </div>

                <hr>

                <div class="row">
                  <div class="col-12">

                    <h5 class="card-title">My referrals</h5>

                    <div class="" style="_height: 21.25rem; max-height: 16rem; overflow: hidden; overflow-y: auto;">
                      <ul id="referrals-parent" class="step step-icon-xs mb-0">
                        <li class="step-item">
                          <div class="step-content-wrapper">
                            <span class="step-icon step-icon-pseudo step-icon-soft-dark"></span>

                            <div class="step-content">
                              <h5 class="step-title">
                                <span class="text-dark">You have no referrals :(</span>
                              </h5>

                              <p class="fs-5 mb-1">Try sharing your referral link with your friends!</p>

                              <!-- <span class="text-muted small text-uppercase">{date}</span> -->
                            </div>

                          </div>
                        </li>
                      </ul>
                    </div>

                  </div>
                </div>

              </div>
            </div>

            <div id="apiKeys" class="card">
              <div class="card-header">
                <h4 class="card-title">API Keys</h4>
              </div>

              <!-- Body -->
              <div class="card-body">

                <form>
                  <!-- Form -->
                  <div class="mb-3">
                    <label for="apiKeys_private" class="form-label">Private key</label>

                    <div class="input-group input-group-sm input-group-merge table-input-group">
                      <input id="apiKeys_private" type="text" class="form-control form-control-light auth-apikey-element" readonly value="">
                      <a class="js-clipboard input-group-append input-group-text" href="javascript:;" data-bs-toggle="tooltip" title="Copy to clipboard" data-hs-clipboard-options='{
                          "type": "tooltip",
                          "successText": "Copied!",
                          "contentTarget": "#apiKeys_private",
                          "classChangeTarget": "#apiKeys_privateIcon",
                          "defaultClass": "bi-clipboard",
                          "successClass": "bi-check"
                         }'>
                        <i id="apiKeys_privateIcon" class="bi-clipboard"></i>
                      </a>
                    </div>
                  </div>
                  <!-- End Form -->



                  <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-white">Regenerate keys</button>
                  </div>
                </form>



              </div>
              <!-- End Body -->
            </div>

            <!-- Card -->
            <div id="changePassword" class="card">
              <div class="card-header">
                <div class="d-flex align-items-center">
                  <h4 class="mb-0">Change password</h4>
                  <!-- <span class="badge bg-soft-danger text-danger ms-2">Disabled</span> -->
                </div>
              </div>

              <!-- Body -->
              <div class="card-body">
                <p class="card-text">Start by entering your password so that we know it's you. Then we'll send you a password reset email.</p>

                <form id="change-password-form">
                  <!-- Form -->
                  <div class="mb-3">
                    <label for="accountPasswordLabel" class="form-label">Account password</label>

                    <input type="password" class="form-control" name="password" id="accountPasswordLabel" placeholder="Enter current password" aria-label="Enter current password" autocomplete="current-password" minlength="6">
                    <small class="form-text">This is the password you use to log in to your {{ site.brand.name }} account.</small>
                  </div>
                  <!-- End Form -->

                  <div class="alert alert-soft-success" role="alert" hidden>
                    <h4 class="alert-heading">Password email sent</h4>
                    <p>Please check <strong class="auth-email-element"></strong> for a password reset email</p>
                  </div>
                  <div class="alert alert-soft-danger" role="alert" hidden>
                    <h4 class="alert-heading">Error</h4>
                    <p></p>
                  </div>

                  <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">Change password</button>
                  </div>
                </form>
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <!-- Card -->

            <!-- Card -->
            <div id="signinMethods" class="card">
              <div class="card-header">
                <h4 class="card-title">Signin methods</h4>
              </div>

              <!-- Body -->
              <div class="card-body">
                <form>
                  <div id="signin-methods-parent" class="list-group list-group-lg list-group-flush list-group-no-gutters">

                  </div>
                </form>
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <!-- Card -->
            <div id="connectedAccounts" class="card">
              <div class="card-header">
                <h4 class="card-title">Connected accounts</h4>
              </div>

              <!-- Body -->
              <div class="card-body">
                <p class="card-text">Integrated features from these accounts make it easier to connect {{ site.brand.name }} with other apps you use.</p>

                <!-- Form -->
                <form>
                  <div class="list-group list-group-lg list-group-flush list-group-no-gutters">
                    <!-- List Item -->
                    <div class="list-group-item">
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <i class="bi-discord list-group-icon"></i>
                          <!-- <img class="avatar avatar-xs" src="./assets/svg/brands/google-icon.svg" alt="Image Description"> -->
                        </div>

                        <div class="flex-grow-1 me-3">
                          <div class="row align-items-center">
                            <div class="col">
                              <h4 class="mb-0">Discord</h4>
                              <p class="fs-5 text-body mb-0">Chat and community. <a href="https://discord.com" target="_blank">Learn more</a> </p>
                            </div>
                            <!-- End Col -->

                            <div class="col-auto">
                              <!-- Form Switch -->
                              <!-- <div class="form-check form-switch">
                                <input class="form-check-input disabled" type="checkbox" id="connectedAccounts_discord" disabled>
                                <label class="form-check-label" for="connectedAccounts_discord"></label>
                              </div> -->
                              <a class="btn btn-white btn-sm disabled" data-provider="discord.com" disabled>Connect</a>
                              <!-- End Form Switch -->
                            </div>
                            <!-- End Col -->
                          </div>
                          <!-- End Row -->
                        </div>
                      </div>
                    </div>
                    <!-- End List Item -->

                  </div>
                </form>
                <!-- End Form -->
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

            <!-- Card -->
            <div id="activeSessions" class="card">
              <!-- <div class="card-header">
                <div class="d-flex align-items-center">
                  <h4 class="mb-0">Active sessions</h4>
                </div>
              </div> -->

              <div class="card-header card-header-content-between">
                <h4 class="card-header-title">Active sessions</h4>

                <!-- Dropdown -->
                <div class="dropdown">
                  <button type="button" class="btn btn-ghost-secondary btn-icon btn-sm rounded-circle" id="activeSessionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi-three-dots-vertical"></i>
                  </button>

                  <div class="dropdown-menu dropdown-menu-end mt-1" aria-labelledby="activeSessionsDropdown">
                    <a class="dropdown-item text-danger auth-signout-all-sessions-btn" href="javascript:;">
                      <i class="bi-door-open-fill"></i> Sign out of all sessions
                    </a>
                  </div>
                </div>
                <!-- End Dropdown -->
              </div>


              <!-- Body -->
              <div class="card-body">
                <p class="card-text">View and manage devices where you're currently logged in. </p>
              </div>
              <!-- End Body -->

              <!-- Table -->
              <div class="table-responsive">
                <table class="table table-thead-bordered table-nowrap table-align-middle card-table">
                  <thead class="thead-light">
                    <tr>
                      <!-- <th>Browser</th> -->
                      <th>Device</th>
                      <th>IP</th>
                      <th>Initial activity</th>
                    </tr>
                  </thead>

                  <tbody id="active-sessions-parent">

                  </tbody>
                </table>
              </div>
              <!-- End Table -->
            </div>
            <!-- End Card -->


            <!-- Card -->
            <div id="deleteAccount" class="card">
              <div class="card-header">
                <h4 class="card-title">Delete your account</h4>
              </div>

              <!-- Body -->
              <div class="card-body">
                <p class="card-text">When you delete your account, you lose access to {{ site.brand.name }} account services, and we permanently delete your personal data. This action is <strong>irreversible</strong>.</p>

                <div class="mb-4">
                  <!-- Form Check -->
                  <div class="form-check">
                    <input class="form-check-input auth-delete-account-confirmation-input" type="checkbox" value="" id="deleteAccountCheckbox">
                    <label class="form-check-label" for="deleteAccountCheckbox">
                      Confirm that I want to delete my account.
                    </label>
                  </div>
                  <!-- End Form Check -->
                </div>

                <div class="alert alert-soft-danger auth-delete-account-error-message-element" role="alert" hidden>
                  <h4 class="alert-heading">Error</h4>
                  <p></p>
                </div>

                <div class="d-flex justify-content-end gap-3">
                  <a class="btn btn-white" href="{{ site.url }}/privacy">Learn more</a>
                  <button type="submit" class="btn btn-danger auth-delete-account-btn">Delete</button>
                </div>
              </div>
              <!-- End Body -->
            </div>
            <!-- End Card -->

          </div>


        </div>

        <!-- Sticky Block End Point -->
        <div id="stickyBlockEndPoint"></div>
      </div>
    </div>
    <!-- End Row -->
  </div>
  <!-- End Content -->
</main>
<!-- ========== END MAIN CONTENT ========== -->

<!-- TOAST -->
<div id="toast-main" class="position-fixed align-items-center text-white bg-primary border-0 toast hide" role="alert" aria-live="assertive" aria-atomic="true" style="top: 20px; right: 20px; z-index: 1000;">
  <div class="d-flex">
    <div class="toast-body">
    </div>
    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
</div>

<!-- TEMPLATES -->
<div id="referrals-html-template" hidden
  data-template='
    <li class="step-item">
      <div class="step-content-wrapper">
        <span class="step-icon step-icon-pseudo step-icon-soft-dark"></span>

        <div class="step-content">
          <h5 class="step-title">
            <!-- <span class="text-dark">Referred <code>{uid}</code> </span> -->
            <span class="text-dark">New referral! </span>
          </h5>

          <!-- <p class="fs-5 mb-1">Earned <a class="text-uppercase" href="#"><i class="bi-gift-fill"></i> +1 </a> as <span class="badge bg-soft-primary text-primary rounded-pill"><span class="legend-indicator bg-primary"></span>"In progress"</span></p> -->
          <p class="fs-5 mb-1">Earned <a class="text-uppercase" href="javascript:;"><i class="bi-gift-fill"></i> +1 </a> <strong>Referral Point</strong> </p>

          <span class="text-muted small text-uppercase">{date}</span>
        </div>
      </div>
    </li>
'></div>
<div id="signin-methods-template" hidden
  data-template='
    <div class="list-group-item">
      <div class="d-flex">
        <div class="flex-shrink-0">
          <i class="bi-{icon} list-group-icon"></i>
        </div>

        <div class="flex-grow-1">
          <div class="row align-items-center">
            <div class="col-sm mb-2 mb-sm-0">
              <h4 class="mb-0">{name}</h4>
              <a class="fs-5" href="{urlFull}" target="_blank" rel="nofollow">{urlShort}</a>
            </div>
            <!-- End Col -->

            <div class="col-sm-auto">
              <!-- <a class="btn btn-white btn-sm auth-signin-provider-btn {disabled}" href="javascript:;" data-provider="{provider}" {disabled}>{buttonText}</a> -->
              <!-- <a class="btn btn-white btn-sm {disabled}" href="{urlAuth}" {disabled}>{buttonText}</a> -->
              <a class="btn btn-white btn-sm {classAction} {disabled}" data-provider="{provider}" {disabled}>{buttonText}</a>
            </div>
            <!-- End Col -->
          </div>
          <!-- End Row -->
        </div>
      </div>
    </div>
'></div>
<div id="active-sessions-template" hidden
  data-template='
    <tr>
      <td class="align-items-center" hidden>
        <i class="bi-{icon} list-group-icon"></i>
        <!-- <img class="avatar avatar-xss me-2" src="./assets/svg/brands/chrome-icon.svg" alt="Image Description"> Chrome on Windows -->
      </td>
      <td><i class="bi-{icon} fs-3 me-2"></i> {platform} {online}</td>
      <td>
        <a href="{ipUrl}" target="_blank" rel="nofollow">{ip}</a>
      </td>
      <td>{date}</td>
    </tr>
'></div>

<script>
  (function() {
    window.onload = function () {


      // INITIALIZATION OF NAVBAR VERTICAL ASIDE
      // =======================================================
      new HSSideNav('.js-navbar-vertical-aside').init()


      // INITIALIZATION OF FORM SEARCH
      // =======================================================
      new HSFormSearch('.js-form-search')


      // INITIALIZATION OF BOOTSTRAP DROPDOWN
      // =======================================================
      HSBsDropdown.init()


      // INITIALIZATION OF SELECT
      // =======================================================
      // HSCore.components.HSTomSelect.init('.js-select')


      // INITIALIZATION OF INPUT MASK
      // =======================================================
      // HSCore.components.HSMask.init('.js-input-mask')


      // INITIALIZATION OF FILE ATTACHMENT
      // =======================================================
      new HSFileAttach('.js-file-attach')


      // INITIALIZATION OF STICKY BLOCKS
      // =======================================================
      new HSStickyBlock('.js-sticky-block', {
        // targetSelector: document.getElementById('header').classList.contains('navbar-fixed') ? '#header' : null
        targetSelector: null
      })

    }
  })()
</script>


<script type="text/javascript">
  Manager.auth().ready(function () {
    var select = Manager.dom().select;

    var user = firebase.auth().currentUser;
    var email = user ? user.email : '';
    var gravatar = "https://secure.gravatar.com/avatar/" + md5(email) + "?size=" + 200 + '&d=retro';

    var $spinner = document.getElementById('spinner-loader');
    var $accountParent = document.getElementById('account-parent');
    var $premiumBadge = document.getElementById('premium-badge')
    var $profileBadges = document.getElementById('profile-badges')
    var $countries = document.getElementById('countryLabel')
    var $referralsParent = document.getElementById('referrals-parent')
    var $signinMethods = document.getElementById('signin-methods-parent')

    var referralsTemplate = document.getElementById('referrals-html-template').dataset.template;
    var signinMethodsTemplate = document.getElementById('signin-methods-template').dataset.template;
    var activeSessionsTemplate = document.getElementById('active-sessions-template').dataset.template;

    var $authUserProfileParent = document.getElementById('auth-user-profile-parent')
    var $authUserProfileImg = document.getElementById('auth-user-profile-img')

    var $activeSessionsParent = document.getElementById('active-sessions-parent')

    var serverApiURL = 'https://us-central1-PROJECT_ID.cloudfunctions.net/bm_api'
      .replace(/PROJECT_ID/g, Manager.utilities().get(Manager, 'properties.options.libraries.firebase_app.config.projectId'))
    var token;

    $authUserProfileImg.src = gravatar;
    $authUserProfileParent.href = 'https://gravatar.com'

    // Process
    if (user) {
      user.getIdToken(false)
      .then(function (tk) {
        token = tk;

        firebase.firestore().doc('users/' + user.uid)
        .get()
        .then(function (doc) {
          Manager.account().import()
          .then(function (Account) {
            var account = new Account();

            account.resolve(doc.data(), {})
            .then(function (properties) {
              console.log('.account().resolve()', properties);

              getAvailableProviers()
              .then(function (providers) {
                console.log('Providers', providers);

                getSessions()
                .then(function (sessions) {
                  console.log('Session', sessions);
                  // WonderfulFetch('https://us-central1-itw-creative-works.cloudfunctions.net/getApp', {
                  //   method: 'POST',
                  //   timeout: 30000,
                  //   response: 'json',
                  //   body: {
                  //     id: Manager.properties.global.app,
                  //   },
                  // })
                  // .then(function (app) {
                  //
                  // })

                  // properties.plan.id = 'premium'
                  var providersArray = Object.keys(providers);
                  var sessionsArray = Object.keys(sessions);

                  var premiumbadgeHtml = '';
                  var badgesHtml = '';
                  var countriesHtml = '<option value="">Choose a country</option>';
                  var referralsHtml = '';
                  var signinMethodsHtml = '';
                  var activeSessionsHtml = '';

                  if (properties.plan.id !== 'basic') {
                    premiumbadgeHtml += '<i class="bi-star-fill fs-2 text-primary me-1" data-bs-toggle="tooltip" data-bs-placement="top" title="' + uppercase(properties.plan.id) + ' plan"></i>';
                  }

                  if (properties.roles.admin) {
                    badgesHtml += '<i class="bi-magic fs-badge text-danger me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Admin"></i>';
                  }

                  if (properties.roles.developer) {
                    badgesHtml += '<i class="bi-code-square fs-badge text-info me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Developer"></i>';
                  }

                  if (properties.roles.betaTester) {
                    badgesHtml += '<i class="bi-lightning-fill fs-badge me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="Beta tester" style="color: #6f42c1"></i>';
                  }

                  if (properties.roles.vip) {
                    badgesHtml += '<i class="bi-award-fill fs-badge text-warning me-2" data-bs-toggle="tooltip" data-bs-placement="top" title="VIP"></i>';
                  }


                  // if (Manager.properties.meta.environment === 'development') {
                  //   properties.affiliate.referrals = [
                  //     {uid: '1vzZdTI5PHphyeKbjYFzHoApm0Bj2', timestamp: '2020-09-15T00:36:26.177Z'},
                  //     {uid: '1vzZdTI5PHphyeKbjYFzHoApm0Bj2', timestamp: '2021-05-03T00:36:26.177Z'},
                  //     {uid: '2vzZdTI5PHphyeKbjYFzHoApm0Bj2', timestamp: '2022-07-14T00:36:26.177Z'},
                  //   ]
                  // }

                  // Add countries
                  Object.keys(Countries.countries)
                  .forEach(function (code, i) {
                    var country = Countries.countries[code]
                    countriesHtml += '<option value="' + code + '">' + country.name + '</option>'
                  });

                  properties.affiliate.referrals.reverse()
                  .forEach(function (referral, i) {
                    referralsHtml += referralsTemplate
                      .replace(/{uid}/, referral.uid)
                      .replace(/{date}/, new Date(referral.timestamp).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }))
                  });

                  user.providerData
                  .forEach(function (provider, i) {
                    if (provider.providerId === 'password') {
                      providers.password = true;
                      providersArray.unshift('password')
                    } else if (provider.providerId === 'google.com') {
                      $authUserProfileImg.src = provider.photoURL;
                      $authUserProfileParent.href = 'javascript:;'
                      $authUserProfileParent.setAttribute('target', '')
                    }
                  });

                  providersArray
                  .forEach(function (provider, i) {
                    var plainId = provider.replace('.com', '');
                    var icon = plainId;
                    var url;
                    var classAction;
                    var shouldEnable;
                    var appHasEnabled = providers[provider];
                    var userHasEnabled = user.providerData.some(function (item) {
                      return item.providerId === provider;
                    });
                    var authUrl = new URL('{{ site.url }}/authentication/signin');
                    authUrl.searchParams.set('signout', true)
                    authUrl.searchParams.set('provider', provider)
                    authUrl.searchParams.set('destination', window.location.href)

                    console.log('---provider', provider, appHasEnabled, userHasEnabled);

                    if (!appHasEnabled) {
                      console.log('Skipping', provider);
                      return
                    }

                    if (provider === 'password') {
                      icon = 'person-fill';
                      url = new URL('{{ site.url }}');
                      classAction = '';
                      shouldEnable = false;
                    } else {
                      url = new URL('https://' + provider);
                      classAction = userHasEnabled ? 'auth-unlink-provider-btn' : 'auth-link-provider-btn';
                      shouldEnable = true;
                    }

                    signinMethodsHtml += signinMethodsTemplate
                      .replace(/{classAction}/g, classAction)
                      .replace(/{provider}/g, provider)
                      .replace(/{name}/g, uppercase(plainId))
                      .replace(/{urlShort}/g, url.host)
                      .replace(/{urlFull}/g, url.toString())
                      .replace(/{urlAuth}/g, authUrl.toString())
                      .replace(/{icon}/g, icon)
                      .replace(/{disabled}/g, shouldEnable ? '' : 'disabled')
                      .replace(/{buttonText}/g, userHasEnabled ? 'Disconnect' : 'Connect')
                  });

                  // Active sessions
                  sessionsArray.unshift('now');
                  sessions.now = {
                    _current: true,
                    timestampUNIX: new Date(),
                    platform: getNavigatorPlatform(),
                    ip: 'This device',
                  }
                  sessionsArray
                  .forEach(function (id) {
                    var session = sessions[id] || {};
                    var isCurrent = !!session._current;
                    var timestamp = new Date(session.timestampUNIX);
                    var ip = session.ip;
                    var platform = (session.platform || 'unkown').toLowerCase();
                    var platformHuman;
                    var icon;
                    if (platform.includes('mac')) {
                      platformHuman = 'macOS';
                      icon = 'apple';
                    } else if (platform.includes('win')) {
                      platformHuman = 'Windows';
                      icon = 'windows';
                    } else if (platform.includes('unknown')) {
                      platformHuman = 'Unknown';
                      icon = 'question-octagon-fill';
                    } else {
                      platformHuman = 'Linux';
                      icon = 'motherboard-fill';
                    }
                    // console.log('---session', session);
                    activeSessionsHtml += activeSessionsTemplate
                      .replace(/{icon}/g, icon)
                      .replace(/{platform}/g, platformHuman)
                      .replace(/{online}/g, isCurrent ? '<span class="badge bg-soft-success text-success ms-1">Current</span>' : '')
                      .replace(/{ipUrl}/g, 'https://tools.keycdn.com/geo?host=' + (isCurrent ? '' : encodeURIComponent(ip)))
                      .replace(/{ip}/g, ip)
                      .replace(/{date}/g, isCurrent ? 'Now' : timestamp.toLocaleDateString(undefined, { weekday: 'short', year: 'numeric', month: 'long', day: 'numeric' }) + ', ' + timestamp.toLocaleTimeString());
                  })

                  // Update HTML
                  $spinner.setAttribute('hidden', true);
                  $accountParent.removeAttribute('hidden')
                  $premiumBadge.innerHTML = premiumbadgeHtml;
                  $profileBadges.innerHTML = badgesHtml;
                  $countries.innerHTML = countriesHtml;
                  $signinMethods.innerHTML = signinMethodsHtml;
                  $activeSessionsParent.innerHTML = activeSessionsHtml;
                  if (properties.affiliate.referrals.length > 0) {
                    $referralsParent.innerHTML = referralsHtml
                  }


                  // Set personal data ib form
                  Powertools.getKeys(properties.personal)
                  .forEach(function (key, i) {
                    var val = Manager.utilities().get(properties.personal, key);
                    var $el = select('*[name="' + key + '"]');
                    // console.log('---', key, val, $el.get(0));
                    if ($el) {
                      if (
                        (key === 'birthday.timestamp' && val === '1970-01-01T00:00:00.000Z')
                        || (key === 'telephone.countryCode' && val === 0)
                        || (key === 'telephone.national' && val === 0)
                      ) {
                        return
                      }
                      $el.setValue(val)
                    }
                  });

                  if (!providers.password) {
                    select('#changePassword, #changePasswordParent')
                    .each(function (el) {
                      el.setAttribute('hidden', true)
                    })
                  }

                  document.addEventListener('submit', function (event) {
                    handleSubmit(event);
                  })

                  document.addEventListener('click', function (event) {
                    handleClick(event);
                  })

                  new bootstrap.ScrollSpy(document.body, {
                    target: '#navbarSettings',
                    offset: 100,
                    // offset: 0,
                  })

                  new HSScrollspy('#navbarVerticalNavMenu', {
                    breakpoint: 'lg',
                    scrollOffset: -20,
                    // scrollOffset: 0,
                  })

                  HSCore.components.HSClipboard.init('.js-clipboard')

                  HSCore.components.HSMask.init('.js-input-mask')

                  // accountResultEl.setInnerHTML(JSON.stringify(properties, null, 2));

                  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
                  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return bootstrap.Tooltip.getOrCreateInstance(tooltipTriggerEl)
                  })

                })

              })

            })
          })
          .catch(function (e) {
            // accountResultEl.setInnerHTML(e);
          })
        })
        .catch(function (e) {
          // accountResultEl.setInnerHTML(e);
        })

      })

    }

    // helpers
    function handleSubmit(event) {
      var $submitBtn = select(event.target.querySelector('button[type="submit"]'));
      var $alertSuccess = select(event.target.querySelector('.alert-soft-success'));
      var $alertDanger = select(event.target.querySelector('.alert-soft-danger'));
      var allowResubmit = event.target.dataset.allowResubmit || 'false';

      if (allowResubmit === 'true') {
        allowResubmit = true;
      } else {
        allowResubmit = false;
      }

      event.preventDefault();

      console.log('Submit', event);

      // helpers
      function _result(e) {
        if (e instanceof Error) {
          $submitBtn.removeAttribute('disabled', true);

          if ($alertDanger.exists()) {
            $alertDanger.removeAttribute('hidden');
            $alertDanger.get(0).querySelector('p').innerHTML = e;
          }
        } else {
          if (allowResubmit) {
            $submitBtn.removeAttribute('disabled', true);
          }

          if ($alertSuccess.exists()) {
            $alertSuccess.removeAttribute('hidden');
          }
        }
      }

      function value(selector) {
        return select(event.target.querySelector(selector)).getValue();
      }

      var data = {};
      select(event.target.querySelectorAll('input, select, textarea'))
      .each(function (el) {
        var $el = select(el);
        Manager.utilities().set(data, $el.getAttribute('name'), $el.getValue() || null)
      })

      console.log('Data', data);

      $submitBtn.setAttribute('disabled', true);
      $alertSuccess.setAttribute('hidden', true);
      $alertDanger.setAttribute('hidden', true);

      if (event.target.matches('#change-password-form')) {
        if ((data.password || '').length >= 6) {
          firebase.auth().sendPasswordResetEmail(user.email)
            .then(function () {
              _result()
            })
            .catch(function (e) {
              _result(e)
            });
        } else {
          _result(new Error('Please enter your password'))
        }
      } else if (event.target.matches('#personal-information-form')) {
        if (data.birthday.timestamp) {
          data.birthday.timestampUNIX = Math.round(new Date(data.birthday.timestamp).getTime() / 1000)
        }
        if (data.telephone.countryCode) {
          data.telephone.countryCode = parseInt(data.telephone.countryCode.replace(/[^0-9]/g, ''));
        }
        if (data.telephone.national) {
          data.telephone.national = parseInt(data.telephone.national.replace(/[^0-9]/g, ''));
        }
        firebase.firestore().doc('users/' + user.uid)
        .set({personal: data}, {merge: true})
        .then(function () {
          _result()
        })
        .catch(function (e) {
          _result(e)
        })
      }
    }

    function toast(type, message) {
      var $el = document.getElementById('toast-main');
      $el.classList.remove('bg-primary', 'bg-danger', 'bg-success');
      var $toast = bootstrap.Toast.getOrCreateInstance($el, {
        delay: 5000
      })
      var $body = $el.querySelector('.toast-body')

      if (type instanceof Error) {
        $el.classList.add('bg-danger')
        $body.innerHTML = type;
        console.error('Error', type);
      } else {
        $body.innerHTML = message;
        console.log('Toast', message);
        if (type === 'success') {
          $el.classList.add('bg-success')
        } else {
          $el.classList.add('bg-primary')
        }
      }
      $toast.show();
    }

    function handleClick(event) {
      // if (event.target.getAttribute('href') === 'javascript:;' && event.target.getAttribute('target') === '_blank') {
      //   event.preventDefault();
      // }
      if (event.target.matches('.auth-link-provider-btn')) {
        var $el = select(event.target);
        var provider = event.target.dataset.provider;

        console.log('Linking', provider);

        firebase.auth().currentUser.linkWithPopup(new firebase.auth.OAuthProvider(provider))
        .then(function (result) {
          $el.removeClass('auth-link-provider-btn').addClass('auth-unlink-provider-btn').setInnerHTML('Disconnect')
          toast('success', 'Successfully connected ' + provider + '!')
        })
        .catch(function (e) {
          toast(new Error('Failed to connect ' + provider + ': ' + e.message))
        })
      } else if (event.target.matches('.auth-unlink-provider-btn')) {
        var $el = select(event.target);
        var provider = event.target.dataset.provider;

        console.log('Unlinking', provider);

        firebase.auth().currentUser.unlink(provider)
        .then(function (result) {
          $el.removeClass('auth-unlink-provider-btn').addClass('auth-link-provider-btn').setInnerHTML('Connect')
          toast('success', 'Successfully disconnected ' + provider + '!')
        })
        .catch(function (e) {
          toast(new Error('Failed to disconnect ' + provider + ': ' + e.message))
        })
      } else if (event.target.matches('.auth-signout-all-sessions-btn')) {
        // console.log('----');
        var $el = select(event.target);

        $el.setAttribute('disabled', true).addClass('disabled').addClass('text-muted');

        WonderfulFetch(serverApiURL, {
          method: 'POST',
          timeout: 30000,
          response: 'json',
          tries: 2,
          body: {
            authenticationToken: token,
            command: 'user:sign-out-all-sessions',
          },
        })
        .then(function (data) {
          window.location.reload();
          // alert('Successfully signed out of all sessions');
        })
        .catch(function (e) {
          alert('Failed to sign out of all sessions: ' + e.message);
          $el.removeAttribute('disabled').removeClass('disabled').removeClass('text-muted');
        })
      }
    }

    function getAvailableProviers() {
      return new Promise(function(resolve, reject) {
          WonderfulFetch(serverApiURL, {
            method: 'POST',
            timeout: 30000,
            response: 'json',
            tries: 2,
            body: {
              command: 'firebase:get-providers',
              payload: {
                firebaseApiKey: Manager.utilities().get(Manager, 'properties.options.libraries.firebase_app.config.apiKey'),
              },
            },
          })
          .then(function (data) {
            return resolve(data)
          })
          .catch(function (e) {
            return resolve({});
          })
      });
    }

    function getSessions() {
      var user = Manager.auth().getUser();
      return new Promise(function(resolve, reject) {
        WonderfulFetch(serverApiURL, {
          method: 'POST',
          timeout: 30000,
          response: 'json',
          tries: 2,
          body: {
            authenticationToken: token,
            command: 'user:get-active-sessions',
            payload: {
              // id: 'app',
            },
          },
        })
        .then(function (data) {
          return resolve(data)
        })
        .catch(function (e) {
          return resolve({});
        })
      });
    }
  })

  function uppercase(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  function getNavigatorPlatform() {
    try {
      return navigator.userAgentData.platform;
    } catch (e) {
      return 'unknown'
    }
  }

  // document.addEventListener('click', function (event) {
  //   console.log('---1');
  //   if (event.target.matches('#navbarSettings .nav-link')) {
  //     console.log('---2');
  //     event.target.scrollIntoView()
  //   }
  // })
</script>
