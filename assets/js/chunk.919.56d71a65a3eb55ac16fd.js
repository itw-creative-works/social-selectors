"use strict";(self.webpackChunksocial_selectors=self.webpackChunksocial_selectors||[]).push([[919],{919:function(e,t,n){n.r(t),n.d(t,{BrowserClient:function(){return Go},SDK_VERSION:function(){return r},SEMANTIC_ATTRIBUTE_SENTRY_OP:function(){return Je},SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:function(){return Ke},SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:function(){return Xe},SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:function(){return Ge},Scope:function(){return de},WINDOW:function(){return xo},addBreadcrumb:function(){return no},addEventProcessor:function(){return un},addIntegration:function(){return yn},addTracingExtensions:function(){return co},breadcrumbsIntegration:function(){return Ws},browserApiErrorsIntegration:function(){return Ys},browserProfilingIntegration:function(){return Cm},browserTracingIntegration:function(){return Vf},captureConsoleIntegration:function(){return Tn},captureEvent:function(){return Kt},captureException:function(){return Xt},captureFeedback:function(){return fo},captureMessage:function(){return Jt},captureSession:function(){return hn},captureUserFeedback:function(){return di},chromeStackLineParser:function(){return ls},close:function(){return an},contextLinesIntegration:function(){return Ii},continueTrace:function(){return dr},createTransport:function(){return wo},createUserFeedbackEnvelope:function(){return Vo},debugIntegration:function(){return Eo},dedupeIntegration:function(){return uo},defaultRequestInstrumentationOptions:function(){return Sf},defaultStackLineParsers:function(){return bs},defaultStackParser:function(){return Ss},endSession:function(){return dn},eventFromException:function(){return Ho},eventFromMessage:function(){return zo},exceptionFromError:function(){return Lo},extraErrorDataIntegration:function(){return ao},feedbackAsyncIntegration:function(){return Jh},feedbackIntegration:function(){return Kh},feedbackSyncIntegration:function(){return Kh},flush:function(){return sn},forceLoad:function(){return ui},functionToStringIntegration:function(){return io},geckoStackLineParser:function(){return hs},getActiveSpan:function(){return Lt},getClient:function(){return ke},getCurrentHub:function(){return ro},getCurrentScope:function(){return ye},getDefaultIntegrations:function(){return ii},getFeedback:function(){return xp},getGlobalScope:function(){return be},getIsolationScope:function(){return ve},getReplay:function(){return Nd},getRootSpan:function(){return Dt},getSpanDescendants:function(){return Ot},getSpanStatusFromHttpCode:function(){return ft},globalHandlersIntegration:function(){return Ks},httpClientIntegration:function(){return bi},httpContextIntegration:function(){return ei},inboundFiltersIntegration:function(){return Zr},init:function(){return ai},instrumentOutgoingRequests:function(){return wf},isInitialized:function(){return cn},lastEventId:function(){return on},lazyLoadIntegration:function(){return fi},linkedErrorsIntegration:function(){return si},makeBrowserOfflineTransport:function(){return om},makeFetchTransport:function(){return ss},makeMultiplexedTransport:function(){return Kr},metrics:function(){return ff},moduleMetadataIntegration:function(){return Yr},onLoad:function(){return li},opera10StackLineParser:function(){return _s},opera11StackLineParser:function(){return vs},parameterize:function(){return qr},registerSpanErrorInstrumentation:function(){return zr},replayCanvasIntegration:function(){return lp},replayIntegration:function(){return Od},reportingObserverIntegration:function(){return _i},rewriteFramesIntegration:function(){return Nr},sendFeedback:function(){return mp},sessionTimingIntegration:function(){return Mr},setContext:function(){return Qt},setCurrentClient:function(){return Ir},setExtra:function(){return en},setExtras:function(){return Zt},setHttpStatus:function(){return mt},setMeasurement:function(){return Zn},setTag:function(){return nn},setTags:function(){return tn},setUser:function(){return rn},showReportDialog:function(){return ci},spanToBaggageHeader:function(){return Ht},spanToJSON:function(){return Ct},spanToTraceHeader:function(){return kt},spotlightBrowserIntegration:function(){return Tm},startBrowserTracingNavigationSpan:function(){return Xf},startBrowserTracingPageLoadSpan:function(){return Gf},startInactiveSpan:function(){return lr},startNewTrace:function(){return fr},startSession:function(){return ln},startSpan:function(){return cr},startSpanManual:function(){return ur},suppressTracing:function(){return hr},thirdPartyErrorFilterIntegration:function(){return Cr},winjsStackLineParser:function(){return ms},withActiveSpan:function(){return pr},withIsolationScope:function(){return we},withScope:function(){return Se},zodErrorsIntegration:function(){return An}});const r="8.41.0",o=globalThis;function s(e,t,n){const s=n||o,i=s.__SENTRY__=s.__SENTRY__||{},a=i[r]=i[r]||{};return a[e]||(a[e]=t())}function i(){return a(o),o}function a(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r,t[r]=t[r]||{}}const c=Object.prototype.toString;function u(e){switch(c.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return v(e,Error)}}function l(e,t){return c.call(e)===`[object ${t}]`}function d(e){return l(e,"ErrorEvent")}function p(e){return l(e,"DOMError")}function h(e){return l(e,"String")}function f(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function m(e){return null===e||f(e)||"object"!=typeof e&&"function"!=typeof e}function g(e){return l(e,"Object")}function _(e){return"undefined"!=typeof Event&&v(e,Event)}function y(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function v(e,t){try{return e instanceof t}catch(e){return!1}}function b(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const S=o,w=80;function k(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||w;for(;n&&s++<r&&(u=E(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function E(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(S.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o&&o.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&h(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function x(){try{return S.document.location.href}catch(e){return""}}function C(e){if(!S.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}const T="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,I=["debug","info","warn","error","log","assert","trace"],M={};function R(e){if(!("console"in o))return e();const t=o.console,n={},r=Object.keys(M);r.forEach((e=>{const r=M[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const A=s("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return T?I.forEach((n=>{t[n]=(...t)=>{e&&R((()=>{o.console[n](`Sentry Logger [${n}]:`,...t)}))}})):I.forEach((e=>{t[e]=()=>{}})),t}));function O(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function D(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function L(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{b(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function N(e,t,n=!1){return!!h(e)&&(l(t,"RegExp")?t.test(e):!!h(t)&&(n?e===t:e.includes(t)))}function P(e,t=[],n=!1){return t.some((t=>N(e,t,n)))}function F(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&B(o,r);try{e[t]=o}catch(n){T&&A.log(`Failed to replace method "${t}" in object`,e)}}function $(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){T&&A.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function B(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,$(e,"__sentry_original__",t)}catch(e){}}function U(e){return e.__sentry_original__}function j(e){if(u(e))return{message:e.message,name:e.name,stack:e.stack,...z(e)};if(_(e)){const t={type:e.type,target:H(e.target),currentTarget:H(e.currentTarget),...z(e)};return"undefined"!=typeof CustomEvent&&v(e,CustomEvent)&&(t.detail=e.detail),t}return e}function H(e){try{return t=e,"undefined"!=typeof Element&&v(t,Element)?k(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function z(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function W(e){return q(e,new Map)}function q(e,t){if(function(e){if(!g(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=q(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(q(e,t))})),r}return e}const Y=1e3;function V(){return Date.now()/Y}const G=function(){const{performance:e}=o;if(!e||!e.now)return V;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Y}();let X;const J=(()=>{const{performance:e}=o;if(!e||!e.now)return void(X="none");const t=36e5,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;return i||c<t?s<=c?(X="timeOrigin",e.timeOrigin):(X="navigationStart",a):(X="dateNow",r)})();function K(){const e=o,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Q(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Z(e){const{message:t,event_id:n}=e;if(t)return t;const r=Q(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ee(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function te(e,t){const n=Q(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function ne(e){if(e&&e.__sentry_captured__)return!0;try{$(e,"__sentry_captured__",!0)}catch(e){}return!1}function re(e){const t=G(),n={sid:K(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return W({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&oe(n,e),n}function oe(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||G(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:K()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function se(){return{traceId:K(),spanId:K().substring(16)}}function ie(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=ie(r[e],t[e],n-1));return r}const ae="_sentrySpan";function ce(e,t){t?$(e,ae,t):delete e[ae]}function ue(e){return e[ae]}class le{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=se()}clone(){const e=new le;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ce(e,ue(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&oe(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,r]=t instanceof de?[t.getScopeData(),t.getRequestSession()]:g(t)?[e,e.requestSession]:[],{tags:o,extra:s,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:l}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,ce(this,void 0),this._attachments=[],this._propagationContext=se(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:V(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ue(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ie(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:K();if(!this._client)return A.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:K();if(!this._client)return A.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:K();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(A.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const de=le;class pe{constructor(e,t){let n,r;n=e||new de,r=t||new de,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return y(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function he(){const e=a(i());return e.stack=e.stack||new pe(s("defaultCurrentScope",(()=>new de)),s("defaultIsolationScope",(()=>new de)))}function fe(e){return he().withScope(e)}function me(e,t){const n=he();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function ge(e){return he().withScope((()=>e(he().getIsolationScope())))}function _e(e){const t=a(e);return t.acs?t.acs:{withIsolationScope:ge,withScope:fe,withSetScope:me,withSetIsolationScope:(e,t)=>ge(t),getCurrentScope:()=>he().getScope(),getIsolationScope:()=>he().getIsolationScope()}}function ye(){return _e(i()).getCurrentScope()}function ve(){return _e(i()).getIsolationScope()}function be(){return s("globalScope",(()=>new de))}function Se(...e){const t=_e(i());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function we(...e){const t=_e(i());if(2===e.length){const[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])}function ke(){return ye().getClient()}function Ee(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:o}=t;return W({trace_id:n,span_id:r,parent_span_id:o})}const xe="production",Ce="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Te;function Ie(e){return new Re((t=>{t(e)}))}function Me(e){return new Re(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Te||(Te={}));class Re{constructor(e){Re.prototype.__init.call(this),Re.prototype.__init2.call(this),Re.prototype.__init3.call(this),Re.prototype.__init4.call(this),this._state=Te.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Re(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Re(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Te.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Te.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Te.PENDING&&(y(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Te.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Te.RESOLVED&&e[1](this._value),this._state===Te.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Ae(e,t,n,r=0){return new Re(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);Ce&&i.id&&null===a&&A.log(`Event processor "${i.id}" dropped event`),y(a)?a.then((t=>Ae(e,t,n,r+1).then(o))).then(null,s):Ae(e,a,n,r+1).then(o).then(null,s)}}))}let Oe,De,Le;function Ne(e){const t=o._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Le&&n.length===De||(De=n.length,Le=n.reduce(((n,r)=>{Oe||(Oe={});const o=Oe[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const s=o[e],i=s&&s.filename,a=t[r];if(i&&a){n[i]=a,Oe[r]=[i,a];break}}}return n}),{})),Le}const Pe=50,Fe="?",$e=/\(error: (.*)\)/,Be=/captureMessage|captureException/;function Ue(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const o=[],s=e.split("\n");for(let e=n;e<s.length;e++){const n=s[e];if(n.length>1024)continue;const i=$e.test(n)?n.replace($e,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){o.push(t);break}}if(o.length>=Pe+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(je(t).function||"")&&t.pop();t.reverse(),Be.test(je(t).function||"")&&(t.pop(),Be.test(je(t).function||"")&&t.pop());return t.slice(0,Pe).map((e=>({...e,filename:e.filename||je(t).filename,function:e.function||Fe})))}(o.slice(r))}}function je(e){return e[e.length-1]||{}}const He="<anonymous>";function ze(e){try{return e&&"function"==typeof e&&e.name||He}catch(e){return He}}function We(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}function qe(e,t=100,n=1/0){try{return Ve("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ye(e,t=3,n=102400){const r=qe(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ye(e,t-1,n):r;var o}function Ve(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,i]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(b(t))return"[VueViewModel]";if(g(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${ze(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Ve("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=j(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=Ve(e,t,c-1,r,o),d++}return i(t),l}const Ge="sentry.source",Xe="sentry.sample_rate",Je="sentry.op",Ke="sentry.origin",Qe="sentry.idle_span_finish_reason",Ze="sentry.measurement_unit",et="sentry.measurement_value",tt="sentry.exclusive_time",nt="sentry-",rt=/^sentry-/,ot=8192;function st(e){const t=function(e){if(!e||!h(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=at(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return at(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(rt)){e[t.slice(nt.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function it(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>ot?(T&&A.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${nt}${t}`]=n),e)),{}))}function at(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}function ct(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=ke(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const ut="_sentryMetrics";function lt(e){const t=e[ut];if(!t)return;const n={};for(const[,[e,r]]of t){(n[e]||(n[e]=[])).push(W(r))}return n}const dt=0,pt=1,ht=2;function ft(e){if(e<400&&e>=100)return{code:pt};if(e>=400&&e<500)switch(e){case 401:return{code:ht,message:"unauthenticated"};case 403:return{code:ht,message:"permission_denied"};case 404:return{code:ht,message:"not_found"};case 409:return{code:ht,message:"already_exists"};case 413:return{code:ht,message:"failed_precondition"};case 429:return{code:ht,message:"resource_exhausted"};case 499:return{code:ht,message:"cancelled"};default:return{code:ht,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:ht,message:"unimplemented"};case 503:return{code:ht,message:"unavailable"};case 504:return{code:ht,message:"deadline_exceeded"};default:return{code:ht,message:"internal_error"}}return{code:ht,message:"unknown_error"}}function mt(e,t){e.setAttribute("http.response.status_code",t);const n=ft(t);"unknown_error"!==n.message&&e.setStatus(n)}const gt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function _t(e,t){const n=function(e){if(!e)return;const t=e.match(gt);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=st(t);if(!n||!n.traceId)return se();const{traceId:o,parentSpanId:s,parentSampled:i}=n;return{traceId:o,parentSpanId:s,spanId:K().substring(16),sampled:i,dsc:r||{}}}function yt(e=K(),t=K().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const vt=1;let bt=!1;function St(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a}=Ct(e);return W({parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a})}function wt(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=Ct(e);return W({parent_span_id:r,span_id:t,trace_id:n})}function kt(e){const{traceId:t,spanId:n}=e.spanContext();return yt(t,n,Tt(e))}function Et(e){return"number"==typeof e?xt(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?xt(e.getTime()):G()}function xt(e){return e>9999999999?e/1e3:e}function Ct(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:s,endTime:i,parentSpanId:a,status:c}=e;return W({span_id:t,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:Et(o),timestamp:Et(i)||void 0,status:It(c),op:r[Je],origin:r[Ke],_metrics_summary:lt(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function Tt(e){const{traceFlags:t}=e.spanContext();return t===vt}function It(e){if(e&&e.code!==dt)return e.code===pt?"ok":e.message||"unknown_error"}const Mt="_sentryChildSpans",Rt="_sentryRootSpan";function At(e,t){const n=e[Rt]||e;$(t,Rt,n),e[Mt]?e[Mt].add(t):$(e,Mt,new Set([t]))}function Ot(e){const t=new Set;return function e(n){if(!t.has(n)&&Tt(n)){t.add(n);const r=n[Mt]?Array.from(n[Mt]):[];for(const t of r)e(t)}}(e),Array.from(t)}function Dt(e){return e[Rt]||e}function Lt(){const e=_e(i());return e.getActiveSpan?e.getActiveSpan():ue(ye())}function Nt(e,t,n,r,o,s){const i=Lt();i&&function(e,t,n,r,o,s,i){const a=e[ut]||(e[ut]=new Map),c=`${t}:${n}@${o}`,u=a.get(i);if(u){const[,e]=u;a.set(i,[c,{min:Math.min(e.min,r),max:Math.max(e.max,r),count:e.count+=1,sum:e.sum+=r,tags:e.tags}])}else a.set(i,[c,{min:r,max:r,count:1,sum:r,tags:s}])}(i,e,t,n,r,o,s)}function Pt(){bt||(R((()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")})),bt=!0)}const Ft="_frozenDsc";function $t(e,t){$(e,Ft,t)}function Bt(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=W({environment:n.environment||xe,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function Ut(e,t){const n=t.getPropagationContext();return n.dsc||Bt(n.traceId,e)}function jt(e){const t=ke();if(!t)return{};const n=Dt(e),r=n[Ft];if(r)return r;const o=n.spanContext().traceState,s=o&&o.get("sentry.dsc"),i=s&&st(s);if(i)return i;const a=Bt(e.spanContext().traceId,t),c=Ct(n),u=c.data||{},l=u[Xe];null!=l&&(a.sample_rate=`${l}`);const d=u[Ge],p=c.description;return"url"!==d&&p&&(a.transaction=p),ct()&&(a.sampled=String(Tt(n))),t.emit("createDsc",a,n),a}function Ht(e){return it(jt(e))}function zt(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t,c=W(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=W(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=W(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=W(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:wt(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:jt(t),...e.sdkProcessingMetadata};const n=Dt(t),r=Ct(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function Wt(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=t;qt(e,"extra",n),qt(e,"tags",r),qt(e,"user",o),qt(e,"contexts",s),e.sdkProcessingMetadata=ie(e.sdkProcessingMetadata,a,2),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function qt(e,t,n){e[t]=ie(e[t],n,1)}function Yt(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||K(),timestamp:t.timestamp||V()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;e.environment=e.environment||n||xe,!e.release&&r&&(e.release=r);!e.dist&&o&&(e.dist=o);e.message&&(e.message=O(e.message,s));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=O(i.value,s));const a=e.request;a&&a.url&&(a.url=O(a.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=Ne(t);try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{n&&e.filename&&(e.debug_id=n[e.filename])}))}))}catch(e){}}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new de;return n.update(t),n}(r,n.captureContext);n.mechanism&&te(c,n.mechanism);const d=o?o.getEventProcessors():[],p=be().getScopeData();if(s){Wt(p,s.getScopeData())}if(l){Wt(p,l.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),zt(c,p);return Ae([...d,...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:qe(e.data,t,n)}})))},...e.user&&{user:qe(e.user,t,n)},...e.contexts&&{contexts:qe(e.contexts,t,n)},...e.extra&&{extra:qe(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=qe(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:qe(e.data,t,n)}}))));return r}(e,i,a):e)))}function Vt(e){if(e)return function(e){return e instanceof de||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Gt.includes(e)))}(e)?{captureContext:e}:e}const Gt=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Xt(e,t){return ye().captureException(e,Vt(t))}function Jt(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return ye().captureMessage(e,n,r)}function Kt(e,t){return ye().captureEvent(e,t)}function Qt(e,t){ve().setContext(e,t)}function Zt(e){ve().setExtras(e)}function en(e,t){ve().setExtra(e,t)}function tn(e){ve().setTags(e)}function nn(e,t){ve().setTag(e,t)}function rn(e){ve().setUser(e)}function on(){return ve().lastEventId()}async function sn(e){const t=ke();return t?t.flush(e):(Ce&&A.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function an(e){const t=ke();return t?t.close(e):(Ce&&A.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function cn(){return!!ke()}function un(e){ve().addEventProcessor(e)}function ln(e){const t=ke(),n=ve(),r=ye(),{release:s,environment:i=xe}=t&&t.getOptions()||{},{userAgent:a}=o.navigator||{},c=re({release:s,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),u=n.getSession();return u&&"ok"===u.status&&oe(u,{status:"exited"}),dn(),n.setSession(c),r.setSession(c),c}function dn(){const e=ve(),t=ye(),n=t.getSession()||e.getSession();n&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),oe(e,n)}(n),pn(),e.setSession(),t.setSession()}function pn(){const e=ve(),t=ye(),n=ke(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function hn(e=!1){e?dn():pn()}const fn=[];function mn(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r),s=o.findIndex((e=>"Debug"===e.name));if(s>-1){const[e]=o.splice(s,1);o.push(e)}return o}function gn(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function _n(e,t,n){if(n[t.name])Ce&&A.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===fn.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),fn.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Ce&&A.log(`Integration installed: ${t.name}`)}}function yn(e){const t=ke();t?t.addIntegration(e):Ce&&A.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}const vn={},bn={};function Sn(e,t){vn[e]=vn[e]||[],vn[e].push(t)}function wn(e,t){if(!bn[e]){bn[e]=!0;try{t()}catch(t){T&&A.error(`Error while instrumenting ${e}`,t)}}}function kn(e,t){const n=e&&vn[e];if(n)for(const r of n)try{r(t)}catch(t){T&&A.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ze(r)}\nError:`,t)}}function En(e){const t="console";Sn(t,e),wn(t,xn)}function xn(){"console"in o&&I.forEach((function(e){e in o.console&&F(o.console,e,(function(t){return M[e]=t,function(...t){kn("console",{args:t,level:e});const n=M[e];n&&n.apply(o.console,t)}}))}))}function Cn(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Tn=(e={})=>{const t=e.levels||I;return{name:"CaptureConsole",setup(e){"console"in o&&En((({args:n,level:r})=>{ke()===e&&t.includes(r)&&function(e,t){const n={level:Cn(t),extra:{arguments:e}};Se((r=>{if(r.addEventProcessor((e=>(e.logger="console",te(e,{handled:!1,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${L(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),Jt(t,n)}return}const o=e.find((e=>e instanceof Error));if(o)return void Xt(o,n);Jt(L(e," "),n)}))}(n,r)}))}}};function In(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Mn(e){const t=new Set;for(const n of e.issues)n.path&&n.path[0]&&t.add(n.path[0]);return`Failed to validate keys: ${O(Array.from(t).join(", "),100)}`}function Rn(e,t,n){return t.exception&&t.exception.values&&n&&n.originalException&&(u(r=n.originalException)&&"ZodError"===r.name&&Array.isArray(r.errors))&&0!==n.originalException.issues.length?{...t,exception:{...t.exception,values:[{...t.exception.values[0],value:Mn(n.originalException)},...t.exception.values.slice(1)]},extra:{...t.extra,"zoderror.issues":n.originalException.errors.slice(0,e).map(In)}}:t;var r}const An=(e={})=>{const t=e.limit||10;return{name:"ZodErrors",processEvent(e,n){return Rn(t,e,n)}}};function On(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(y(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Dn(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;Ce&&A.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}class Ln{constructor(e={}){this._traceId=e.traceId||K(),this._spanId=e.spanId||K().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}const Nn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Pn(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function Fn(e){const t=Nn.exec(e);if(!t)return void R((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s="",i="",a=""]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return $n({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function $n(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Bn(e){const t="string"==typeof e?Fn(e):$n(e);if(t&&function(e){if(!T)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(A.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(A.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(A.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(A.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Un(e,t=[]){return[e,t]}function jn(e,t){const[n,r]=e;return[n,[...r,t]]}function Hn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function zn(e,t){return Hn(e,((e,n)=>t.includes(n)))}function Wn(e){return o.__SENTRY__&&o.__SENTRY__.encodePolyfill?o.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function qn(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[Wn(r),e]:r.push("string"==typeof e?Wn(e):e)}for(const e of n){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(qe(n))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function Yn(e){let t="string"==typeof e?Wn(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((r=n(e),o.__SENTRY__&&o.__SENTRY__.decodePolyfill?o.__SENTRY__.decodePolyfill(r):(new TextDecoder).decode(r)));var r}const s=r(),i=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;i.push([e,t?n(t):r()])}return[s,i]}function Vn(e){return[{type:"span"},e]}function Gn(e){const t="string"==typeof e.data?Wn(e.data):e.data;return[W({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const Xn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Jn(e){return Xn[e]}function Kn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Qn(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Pn(r)},...o&&{trace:W({...o})}}}function Zn(e,t,n,r=Lt()){const o=r&&Dt(r);o&&(Ce&&A.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[et]:t,[Ze]:n}))}function er(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},r=n[Ze],o=n[et];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})})),t}const tr="_sentryScope",nr="_sentryIsolationScope";function rr(e){return{scope:e[tr],isolationScope:e[nr]}}class or{constructor(e={}){this._traceId=e.traceId||K(),this._spanId=e.spanId||K().substring(16),this._startTime=e.startTimestamp||G(),this._attributes={},this.setAttributes({[Ke]:"manual",[Je]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?vt:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=Et(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Ge,"custom"),this}end(e){this._endTime||(this._endTime=Et(e),function(e){if(!Ce)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Ct(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${Dt(e)===e?"root ":""}span "${t}" with ID ${r}`;A.log(o)}(this),this._onSpanEnded())}getSpanJSON(){return W({data:this._attributes,description:this._name,op:this._attributes[Je],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:It(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ke],_metrics_summary:lt(this),profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[tt],measurements:er(this._events),is_segment:this._isStandaloneSpan&&Dt(this)===this||void 0,segment_id:this._isStandaloneSpan?Dt(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){Ce&&A.log("[Tracing] Adding an event to span:",e);const r=sr(t)?t:n||G(),o=sr(t)?{}:t||{},s={name:e,time:Et(r),attributes:o};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=ke();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Dt(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=ke();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(function(e,t){const n=jt(e[0]),r=t&&t.getDsn(),o=t&&t.getOptions().tunnel,s={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!o&&r&&{dsn:Pn(r)}},i=t&&t.getOptions().beforeSendSpan,a=i?e=>{const t=i(Ct(e));return t||Pt(),t}:e=>Ct(e),c=[];for(const t of e){const e=a(t);e&&c.push(Vn(e))}return Un(s,c)}([this],e)):(Ce&&A.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(rr(this).scope||ye()).captureEvent(t)}}_convertSpanToTransaction(){if(!ir(Ct(this)))return;this._name||(Ce&&A.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=rr(this),n=(e||ye()).getClient()||ke();if(!0!==this._sampled)return Ce&&A.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const r=Ot(this).filter((e=>e!==this&&!function(e){return e instanceof or&&e.isStandaloneSpan()}(e))).map((e=>Ct(e))).filter(ir),o=this._attributes[Ge],s={contexts:{trace:St(this)},spans:r.length>1e3?r.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...W({dynamicSamplingContext:jt(this)})},_metrics_summary:lt(this),...o&&{transaction_info:{source:o}}},i=er(this._events);return i&&Object.keys(i).length&&(Ce&&A.log("[Measurements] Adding measurements to transaction event",JSON.stringify(i,void 0,2)),s.measurements=i),s}}function sr(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function ir(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}const ar="__SENTRY_SUPPRESS_TRACING__";function cr(e,t){const n=_r();if(n.startSpan)return n.startSpan(e,t);const r=gr(e),{forceTransaction:o,parentSpan:s}=e;return Se(e.scope,(()=>br(s)((()=>{const n=ye(),s=vr(n),i=e.onlyIfParent&&!s?new Ln:mr({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});return ce(n,i),On((()=>t(i)),(()=>{const{status:e}=Ct(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:ht,message:"internal_error"})}),(()=>i.end()))}))))}function ur(e,t){const n=_r();if(n.startSpanManual)return n.startSpanManual(e,t);const r=gr(e),{forceTransaction:o,parentSpan:s}=e;return Se(e.scope,(()=>br(s)((()=>{const n=ye(),s=vr(n),i=e.onlyIfParent&&!s?new Ln:mr({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});function a(){i.end()}return ce(n,i),On((()=>t(i,a)),(()=>{const{status:e}=Ct(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:ht,message:"internal_error"})}))}))))}function lr(e){const t=_r();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=gr(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>Se(e.scope,t):void 0!==o?e=>pr(o,e):e=>e())((()=>{const t=ye(),o=vr(t);return e.onlyIfParent&&!o?new Ln:mr({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))}const dr=({sentryTrace:e,baggage:t},n)=>Se((r=>{const o=_t(e,t);return r.setPropagationContext(o),n()}));function pr(e,t){const n=_r();return n.withActiveSpan?n.withActiveSpan(e,t):Se((n=>(ce(n,e||void 0),t(n))))}function hr(e){const t=_r();return t.suppressTracing?t.suppressTracing(e):Se((t=>(t.setSDKProcessingMetadata({[ar]:!0}),e())))}function fr(e){return Se((t=>(t.setPropagationContext(se()),Ce&&A.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),pr(null,e))))}function mr({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!ct())return new Ln;const o=ve();let s;if(e&&!n)s=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[ar]&&Tt(e),i=s?new or({...n,parentSpanId:r,traceId:o,sampled:s}):new Ln({traceId:o});At(e,i);const a=ke();a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i));return i}(e,r,t),At(e,s);else if(e){const n=jt(e),{traceId:o,spanId:i}=e.spanContext(),a=Tt(e);s=yr({traceId:o,parentSpanId:i,...t},r,a),$t(s,n)}else{const{traceId:e,dsc:n,parentSpanId:i,sampled:a}={...o.getPropagationContext(),...r.getPropagationContext()};s=yr({traceId:e,parentSpanId:i,...t},r,a),n&&$t(s,n)}return function(e){if(!Ce)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Ct(e),{spanId:o}=e.spanContext(),s=Tt(e),i=Dt(e),a=i===e,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:e,description:t}=Ct(i);u.push(`root ID: ${i.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}A.log(`${c}\n  ${u.join("\n  ")}`)}(s),function(e,t,n){e&&($(e,nr,n),$(e,tr,t))}(s,r,o),s}function gr(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=Et(e.startTime),delete n.startTime,n}return t}function _r(){return _e(i())}function yr(e,t,n){const r=ke(),o=r&&r.getOptions()||{},{name:s="",attributes:i}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[ar]?[!1]:function(e,t){if(!ct(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const r=Dn(n);return void 0===r?(Ce&&A.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(Ce&&A.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r]):(Ce&&A.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,r])}(o,{name:s,parentSampled:n,attributes:i,transactionContext:{name:s,parentSampled:n}}),u=new or({...e,attributes:{[Ge]:"custom",...e.attributes},sampled:a});return void 0!==c&&u.setAttribute(Xe,c),r&&r.emit("spanStart",u),u}function vr(e){const t=ue(e);if(!t)return;const n=ke();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Dt(t):t}function br(e){return void 0!==e?t=>pr(e,t):e=>e()}const Sr=new Map,wr=new Set;function kr(e,t){return function(e){if(o._sentryModuleMetadata)for(const t of Object.keys(o._sentryModuleMetadata)){const n=o._sentryModuleMetadata[t];if(wr.has(t))continue;wr.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Sr.set(e.filename,n);break}}}(e),Sr.get(t)}function Er(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=kr(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}function xr(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}const Cr=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{Hn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(xr(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;Er(e.getOptions().stackParser,t)}))},processEvent(t){const n=function(e){const t=We(e);if(!t)return;return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(Tr))).map((e=>e.slice(Tr.length))):[]))}(t);if(n){const r=n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))));if(r){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}});const Tr="_sentryBundlerPluginAppKey:";function Ir(e){ye().setClient(e)}const Mr=()=>{const e=1e3*G();return{name:"SessionTiming",processEvent(t){const n=1e3*G();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};function Rr(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const Ar=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Or(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Ar.exec(t);return n?n.slice(1):[]}function Dr(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=Rr(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Lr(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}const Nr=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in o&&void 0!==o.window,s=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){const e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(o||s){const e=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,s=t?function(e,t){e=Dr(e).slice(1),t=Dr(t).slice(1);const n=Lr(e.split("/")),r=Lr(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,e):function(e,t){let n=Or(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}(e);r.filename=`${n}${s}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>s(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};let Pr=null;function Fr(e){const t="error";Sn(t,e),wn(t,$r)}function $r(){Pr=o.onerror,o.onerror=function(e,t,n,r,o){return kn("error",{column:r,error:o,line:n,msg:e,url:t}),!(!Pr||Pr.__SENTRY_LOADER__)&&Pr.apply(this,arguments)},o.onerror.__SENTRY_INSTRUMENTED__=!0}let Br=null;function Ur(e){const t="unhandledrejection";Sn(t,e),wn(t,jr)}function jr(){Br=o.onunhandledrejection,o.onunhandledrejection=function(e){return kn("unhandledrejection",e),!(Br&&!Br.__SENTRY_LOADER__)||Br.apply(this,arguments)},o.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let Hr=!1;function zr(){Hr||(Hr=!0,Fr(Wr),Ur(Wr))}function Wr(){const e=Lt(),t=e&&Dt(e);if(t){const e="internal_error";Ce&&A.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:ht,message:e})}}function qr(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}Wr.tag="sentry_tracingErrorCallback";const Yr=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{Hn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(xr(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;Er(e.getOptions().stackParser,t)}))}}),Vr="7";function Gr(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Xr(e,t,n){return t||`${function(e){return`${Gr(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:Vr};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}function Jr(e,t){let n;return Hn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Kr(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=Fn(t);if(!a)return;const c=Xr(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Jr(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Jr(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e)),o=n.length?n:[["",r]];return(await Promise.all(o.map((([t,n])=>n.send(function(e,t){return Un(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...o.values(),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}const Qr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],Zr=(e={})=>({name:"InboundFilters",processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Qr],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Ce&&A.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Z(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));return t}(e).some((e=>P(e,t)))}(e,t.ignoreErrors))return Ce&&A.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Z(e)}`),!0;if(function(e){if(e.type)return!1;if(!e.exception||!e.exception.values||0===e.exception.values.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return Ce&&A.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${Z(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&P(n,t)}(e,t.ignoreTransactions))return Ce&&A.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Z(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=eo(e);return!!n&&P(n,t)}(e,t.denyUrls))return Ce&&A.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Z(e)}.\nUrl: ${eo(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=eo(e);return!n||P(n,t)}(e,t.allowUrls))return Ce&&A.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Z(e)}.\nUrl: ${eo(e)}`),!0;return!1}(t,s)?null:t}});function eo(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Ce&&A.error(`Cannot extract url for event ${Z(e)}`),null}}const to=100;function no(e,t){const n=ke(),r=ve();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=to}=n.getOptions();if(s<=0)return;const i={timestamp:V(),...e},a=o?R((()=>o(i,t))):i;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,s))}const ro=function(){return{bindClient(e){ye().setClient(e)},withScope:Se,getClient:()=>ke(),getScope:ye,getIsolationScope:ve,captureException:(e,t)=>ye().captureException(e,t),captureMessage:(e,t,n)=>ye().captureMessage(e,t,n),captureEvent:Kt,addBreadcrumb:no,setUser:rn,setTags:tn,setTag:nn,setExtra:en,setExtras:Zt,setContext:Qt,getIntegration(e){const t=ke();return t&&t.getIntegrationByName(e.id)||null},startSession:ln,endSession:dn,captureSession(e){if(e)return dn();!function(){const e=ye(),t=ke(),n=e.getSession();t&&n&&t.captureSession(n)}()}}};let oo;const so=new WeakMap,io=()=>({name:"FunctionToString",setupOnce(){oo=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=U(this),n=so.has(ke())&&void 0!==t?t:this;return oo.apply(n,e)}}catch(e){}},setup(e){so.set(e,!0)}}),ao=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,r,o){const{maxValueLength:s=250}=o.getOptions();return function(e,t={},n,r,o){if(!t.originalException||!u(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=function(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==r.indexOf(t))continue;const s=e[t];o[t]=u(s)||"string"==typeof s?O(`${s}`,n):s}if(t&&void 0!==e.cause&&(o.cause=u(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=u(n)?n.toString():n}}return o}catch(e){Ce&&A.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r,o);if(i){const t={...e.contexts},r=qe(i,n);return g(r)&&($(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n,s)}}};function co(){zr()}const uo=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!po(e,t))return!1;if(!lo(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=ho(t),r=ho(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!po(e,t))return!1;if(!lo(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Ce&&A.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function lo(e,t){let n=We(e),r=We(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function po(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function ho(e){return e.exception&&e.exception.values&&e.exception.values[0]}function fo(e,t={},n=ye()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,l={contexts:{feedback:W({contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c})},type:"feedback",level:"info",tags:u},d=n&&n.getClient()||ke();d&&d.emit("beforeSendFeedback",l,t);return n.captureEvent(l,t)}class mo extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function go(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Me(new mo("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Re(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Ie(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}const _o=6e4;function yo(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?_o:r-t}function vo(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function bo(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+yo(i,r):429===t&&(o.all=r+6e4);return o}const So=64;function wo(e,t,n=go(e.bufferSize||So)){let r={};return{send:function(o){const s=[];if(Hn(o,((t,n)=>{const o=Jn(n);if(vo(r,o)){const r=ko(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return Ie({});const i=Un(o[0],s),a=t=>{Hn(i,((n,r)=>{const o=ko(n,r);e.recordDroppedEvent(t,Jn(r),o)}))};return n.add((()=>t({body:qn(i)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Ce&&A.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=bo(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof mo)return Ce&&A.error("Skipped sending event because buffer is full."),a("queue_overflow"),Ie({});throw e}))},flush:e=>n.drain(e)}}function ko(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const Eo=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:"Debug",setup(e){e.on("beforeSendEvent",((e,n)=>{t.debugger,R((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}},xo=o;let Co=0;function To(){return Co>0}function Io(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(U(e))return e}catch(t){return e}const r=function(){const n=Array.prototype.slice.call(arguments);try{const r=n.map((e=>Io(e,t)));return e.apply(this,r)}catch(e){throw Co++,setTimeout((()=>{Co--})),Se((r=>{r.addEventProcessor((e=>(t.mechanism&&(ee(e,void 0,void 0),te(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Xt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}B(r,e),$(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch(e){}return r}const Mo="Not capturing exception because it's already been captured.";class Ro{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Bn(e.dsn):Ce&&A.warn("No DSN provided, client will not send events."),this._dsn){const t=Xr(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}const t=["enableTracing","tracesSampleRate","tracesSampler"].find((t=>t in e&&null==e[t]));t&&R((()=>{console.warn(`[Sentry] Deprecation warning: \`${t}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)}))}captureException(e,t,n){const r=K();if(ne(e))return Ce&&A.log(Mo),r;const o={event_id:r,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,r){const o={event_id:K(),...n},s=f(e)?e:String(e),i=m(e)?this.eventFromMessage(s,t,o):this.eventFromException(e,o);return this._process(i.then((e=>this._captureEvent(e,o,r)))),o.event_id}captureEvent(e,t,n){const r=K();if(t&&t.originalException&&ne(t.originalException))return Ce&&A.log(Mo),r;const o={event_id:r,...t},s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,s||n)),o.event_id}captureSession(e){"string"!=typeof e.release?Ce&&A.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),oe(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Ie(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];_n(this,e,this._integrations),t||gn(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){const o=Kn(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=Qn(e,o,r,t);return delete e.sdkProcessingMetadata,Un(i,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=jn(n,Gn(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Kn(n);return Un({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Pn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;Ce&&A.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(Ce&&A.error("Error while sending envelope:",e),e))):(Ce&&A.error("Transport disabled"),Ie({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&_n(e,t,n)})),n}(this,e),gn(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(oe(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Re((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n=ye(),r=ve()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),Yt(o,e,t,n,this,r).then((e=>{if(null===e)return e;e.contexts={trace:Ee(n),...e.contexts};const t=Ut(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:t,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Ce){const t=e;"log"===t.logLevel?A.log(t.message):A.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=Oo(e),i=Ao(e),a=e.type||"error",c=`before send for type \`${a}\``,u=void 0===o?void 0:Dn(o);if(i&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",e),Me(new mo(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new mo("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i}=t;if(Ao(n)&&o)return o(n,r);if(Oo(n)){if(n.spans&&i){const t=[];for(const r of n.spans){const n=i(r);n?t.push(n):(Pt(),e.recordDroppedEvent("before_send","span"))}n.spans=t}if(s){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(n,r)}}return n}(this,r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(y(e))return e.then((e=>{if(!g(e)&&null!==e)throw new mo(n);return e}),(e=>{throw new mo(`${t} rejected with ${e}`)}));if(!g(e)&&null!==e)throw new mo(n);return e}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,e),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new mo(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!s&&o&&this._updateSessionFromEvent(o,r),s){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof mo)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new mo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){Ce&&A.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(Ce&&A.log("No outcomes to send"));if(!this._dsn)return void(Ce&&A.log("No dsn provided, will not send outcomes"));Ce&&A.log("Sending outcomes:",e);const t=(n=e,Un((r=this._options.tunnel&&Pn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||V(),discarded_events:n}]]));var n,r,o;this.sendEnvelope(t)}}function Ao(e){return void 0===e.type}function Oo(e){return"transaction"===e.type}const Do="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Lo(e,t){const n=Fo(e,t),r={type:Uo(t),value:jo(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function No(e,t,n,r){const o=ke(),s=o&&o.getOptions().normalizeDepth,i=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:Ye(t,s)};if(i)return{exception:{values:[Lo(e,i)]},extra:a};const c={exception:{values:[{type:_(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Yo(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=Fo(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Po(e,t){return{exception:{values:[Lo(e,t)]}}}function Fo(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&$o.test(e.message))return 1;return 0}(t),o=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch(e){}return[]}const $o=/Minified React error #\d+;/i;function Bo(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function Uo(e){const t=e&&e.name;if(!t&&Bo(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function jo(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:Bo(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function Ho(e,t,n,r){const o=Wo(e,t,n&&n.syntheticException||void 0,r);return te(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Ie(o)}function zo(e,t,n="info",r,o){const s=qo(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Ie(s)}function Wo(e,t,n,r,o){let s;if(d(t)&&t.error){return Po(e,t.error)}if(p(t)||l(t,"DOMException")){const o=t;if("stack"in t)s=Po(e,t);else{const t=o.name||(p(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=qo(e,i,n,r),ee(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(u(t))return Po(e,t);if(g(t)||_(t)){return s=No(e,t,n,o),te(s,{synthetic:!0}),s}return s=qo(e,t,n,r),ee(s,`${t}`,void 0),te(s,{synthetic:!0}),s}function qo(e,t,n,r){const o={};if(r&&n){const r=Fo(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(f(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Yo(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(j(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return O(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:O(r,t)}return""}(e),r=t?"promise rejection":"exception";if(d(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(_(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Vo(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Pn(r)}},s=function(e){return[{type:"user_report"},e]}(e);return Un(o,[s])}class Go extends Ro{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],o="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${o}:@sentry/${e}`,version:r}))),version:r}),e._metadata=s}(t,"browser",["browser"],xo.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&xo.document&&xo.document.addEventListener("visibilitychange",(()=>{"hidden"===xo.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Ho(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return zo(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Do&&A.warn("SDK not enabled, will not capture user feedback."));const t=Vo(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}const Xo=o;function Jo(){if(!("fetch"in Xo))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Ko(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Qo(){if("string"==typeof EdgeRuntime)return!0;if(!Jo())return!1;if(Ko(Xo.fetch))return!0;let e=!1;const t=Xo.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Ko(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){T&&A.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}const Zo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,es=o,ts={};function ns(e){const t=ts[e];if(t)return t;let n=es[e];if(Ko(n))return ts[e]=n.bind(es);const r=es.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(t)}catch(t){Zo&&A.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?ts[e]=n.bind(es):n}function rs(e){ts[e]=void 0}function os(...e){return ns("setTimeout")(...e)}function ss(e,t=ns("fetch")){let n=0,r=0;return wo(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return rs("fetch"),Me("No fetch implementation available");try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return rs("fetch"),n-=s,r--,Me(e)}}))}function is(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?Fe:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const as=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,cs=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,us=/\((\S*)(?::(\d+))(?::(\d+))\)/,ls=[30,e=>{const t=as.exec(e);if(t){const[,e,n,r]=t;return is(e,Fe,+n,+r)}const n=cs.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=us.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=ws(n[1]||Fe,n[2]);return is(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],ds=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ps=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,hs=[50,e=>{const t=ds.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ps.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Fe;return[n,e]=ws(n,e),is(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],fs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ms=[40,e=>{const t=fs.exec(e);return t?is(t[2],t[1]||Fe,+t[3],t[4]?+t[4]:void 0):void 0}],gs=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,_s=[10,e=>{const t=gs.exec(e);return t?is(t[2],t[3]||Fe,+t[1]):void 0}],ys=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,vs=[20,e=>{const t=ys.exec(e);return t?is(t[5],t[3]||t[4]||Fe,+t[1],+t[2]):void 0}],bs=[ls,hs],Ss=Ue(...bs),ws=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Fe,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ks=o;let Es;function xs(e){const t="history";Sn(t,e),wn(t,Cs)}function Cs(){if(!function(){const e=ks.chrome,t=e&&e.app&&e.app.runtime,n="history"in ks&&!!ks.history.pushState&&!!ks.history.replaceState;return!t&&n}())return;const e=es.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Es,t=String(n);Es=t;kn("history",{from:e,to:t})}return e.apply(this,t)}}es.onpopstate=function(...t){const n=es.location.href,r=Es;Es=n;if(kn("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},F(es.history,"pushState",t),F(es.history,"replaceState",t)}let Ts,Is,Ms;function Rs(e){Sn("dom",e),wn("dom",As)}function As(){if(!es.document)return;const e=kn.bind(null,"dom"),t=Os(e,!0);es.document.addEventListener("click",t,!1),es.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=es[t]&&es[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(F(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=s[n]=s[n]||{refCount:0};if(!i.handler){const r=Os(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),F(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function Os(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;$(n,"_sentryCaptured",!0),r&&!r._sentryId&&$(r,"_sentryId",K());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Is)return!1;try{if(!e.target||e.target._sentryId!==Ms)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Is=n.type,Ms=r?r._sentryId:void 0}clearTimeout(Ts),Ts=es.setTimeout((()=>{Ms=void 0,Is=void 0}),1e3)}}const Ds="__sentry_xhr_v3__";function Ls(e){Sn("xhr",e),wn("xhr",Ns)}function Ns(){if(!es.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=1e3*G(),o=h(n[0])?n[0].toUpperCase():void 0,s=function(e){if(h(e))return e;try{return e.toString()}catch(e){}return}(n[1]);if(!o||!s)return e.apply(t,n);t[Ds]={method:o,url:s,request_headers:{}},"POST"===o&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const i=()=>{const e=t[Ds];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}kn("xhr",{endTimestamp:1e3*G(),startTimestamp:r,xhr:t})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,n){return i(),e.apply(t,n)}}):t.addEventListener("readystatechange",i),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,s=t[Ds];return s&&h(r)&&h(o)&&(s.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Ds];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return kn("xhr",{startTimestamp:1e3*G(),xhr:t}),e.apply(t,n)}})}function Ps(e,t){const n="fetch";Sn(n,e),wn(n,(()=>Fs(void 0,t)))}function Fs(e,t=!1){t&&!Qo()||F(o,"fetch",(function(t){return function(...n){const{method:r,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Us(t),method:Bs(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Us(t),method:Bs(t,"method")?String(t.method).toUpperCase():"GET"}}(n),i={args:n,fetchData:{method:r,url:s},startTimestamp:1e3*G()};e||kn("fetch",{...i});const a=(new Error).stack;return t.apply(o,n).then((async t=>(e?e(t):kn("fetch",{...i,endTimestamp:1e3*G(),response:t}),t)),(e=>{throw kn("fetch",{...i,endTimestamp:1e3*G(),error:e}),u(e)&&void 0===e.stack&&(e.stack=a,$(e,"framesToPop",1)),e}))}}))}function $s(e){let t;try{t=e.clone()}catch(e){return}!async function(e,t){if(e&&e.body){const n=e.body,r=n.getReader(),o=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),9e4);let s=!0;for(;s;){let e;try{e=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),5e3);const{done:o}=await r.read();clearTimeout(e),o&&(t(),s=!1)}catch(e){s=!1}finally{clearTimeout(e)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,(()=>{}))}}(t,(()=>{kn("fetch-body-resolved",{endTimestamp:1e3*G(),response:e})}))}function Bs(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Us(e){return"string"==typeof e?e:e?Bs(e,"url")?e.url:e.toString?e.toString():"":""}function js(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Hs(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const zs=1024,Ws=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&En(function(e){return function(t){if(ke()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Cn(t.level),message:L(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${L(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}no(n,{input:t.args,level:t.level})}}(e)),t.dom&&Rs(function(e,t){return function(n){if(ke()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>zs&&(Do&&A.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=zs),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=k(t,{keyAttrs:s,maxStringLength:i}),o=C(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),no(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Ls(function(e){return function(t){if(ke()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Ds];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o,u={method:s,url:i,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};no({category:"xhr",data:u,type:"http",level:js(a)},l)}}(e)),t.fetch&&Ps(function(e){return function(t){if(ke()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){no({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},s={input:t.args,response:e,startTimestamp:n,endTimestamp:r};no({category:"fetch",data:o,type:"http",level:js(o.status_code)},s)}}}(e)),t.history&&xs(function(e){return function(t){if(ke()!==e)return;let n=t.from,r=t.to;const o=Hs(xo.location.href);let s=n?Hs(n):void 0;const i=Hs(r);s&&s.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),no({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){ke()===e&&no({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Z(t)},{event:t})}}(e))}}};const qs=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ys=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&F(xo,"setTimeout",Vs),t.setInterval&&F(xo,"setInterval",Vs),t.requestAnimationFrame&&F(xo,"requestAnimationFrame",Gs),t.XMLHttpRequest&&"XMLHttpRequest"in xo&&F(XMLHttpRequest.prototype,"send",Xs);const e=t.eventTarget;if(e){(Array.isArray(e)?e:qs).forEach(Js)}}}};function Vs(e){return function(...t){const n=t[0];return t[0]=Io(n,{mechanism:{data:{function:ze(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Gs(e){return function(t){return e.apply(this,[Io(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ze(e)},handled:!1,type:"instrument"}})])}}function Xs(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&F(n,e,(function(t){const n={mechanism:{data:{function:e,handler:ze(t)},handled:!1,type:"instrument"}},r=U(t);return r&&(n.mechanism.data.handler=ze(r)),Io(t,n)}))})),e.apply(this,t)}}function Js(e){const t=xo,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(F(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Io(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ze(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Io(r,{mechanism:{data:{function:"addEventListener",handler:ze(r),target:e},handled:!1,type:"instrument"}}),o])}})),F(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}const Ks=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Fr((t=>{const{stackParser:n,attachStacktrace:r}=Zs();if(ke()!==e||To())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=h(t)&&t.length>0?t:x();0===c.length&&c.push({colno:u,filename:d,function:Fe,in_app:!0,lineno:l});return e}(Wo(n,c||o,void 0,r,!1),s,i,a);u.level="error",Kt(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Qs("onerror")),t.onunhandledrejection&&(!function(e){Ur((t=>{const{stackParser:n,attachStacktrace:r}=Zs();if(ke()!==e||To())return;const o=function(e){if(m(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),s=m(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Wo(n,o,void 0,r,!0);s.level="error",Kt(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Qs("onunhandledrejection"))}}};function Qs(e){Do&&A.log(`Global Handler attached: ${e}`)}function Zs(){const e=ke();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ei=()=>({name:"HttpContext",preprocessEvent(e){if(!xo.navigator&&!xo.location&&!xo.document)return;const t=e.request&&e.request.url||xo.location&&xo.location.href,{referrer:n}=xo.document||{},{userAgent:r}=xo.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}});function ti(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&v(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;a&&(s.exception.values=(c=ni(e,t,o,i.originalException,r,s.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=O(e.value,u)),e)))))}function ni(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(v(r[o],Error)){ri(i,a);const s=e(t,r[o]),u=c.length;oi(s,o,u,a),c=ni(e,t,n,r[o],o,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(v(r,Error)){ri(i,a);const u=e(t,r),l=c.length;oi(u,`errors[${s}]`,l,a),c=ni(e,t,n,r,o,[u,...c],u,l)}})),c}function ri(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function oi(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const si=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){const s=o.getOptions();ti(Lo,s.stackParser,s.maxValueLength,n,t,e,r)}}};function ii(e){return[Zr(),io(),Ys(),Ws(),Ks(),si(),uo(),ei()]}function ai(e={}){const t=function(e={}){const t={defaultIntegrations:ii(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:xo.SENTRY_RELEASE&&xo.SENTRY_RELEASE.id?xo.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==xo.window&&xo;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=xo.location&&xo.location.href||"",o=!!n&&xo===xo.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),s=void 0!==e.nw;return!!n&&!o&&!s}())return void R((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));Do&&(Jo()||A.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:(r=t.stackParser||Ss,Array.isArray(r)?Ue(...r):r),integrations:mn(t),transport:t.transport||ss};var r;const o=function(e,t){!0===t.debug&&(Ce?A.enable():R((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),ye().update(t.initialScope);const n=new e(t);return Ir(n),n.init(),n}(Go,n);return t.autoSessionTracking&&function(){if(void 0===xo.document)return void(Do&&A.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));ln({ignoreDuration:!0}),hn(),xs((({from:e,to:t})=>{void 0!==e&&e!==t&&(ln({ignoreDuration:!0}),hn())}))}(),o}function ci(e={}){if(!xo.document)return void(Do&&A.error("Global document not defined in showReportDialog call"));const t=ye(),n=t.getClient(),r=n&&n.getDsn();if(!r)return void(Do&&A.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=on();t&&(e.eventId=t)}const o=xo.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(e,t){const n=Bn(e);if(!n)return"";const r=`${Gr(n)}embed/error-page/`;let o=`dsn=${Pn(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(r,e),e.onLoad&&(o.onload=e.onLoad);const{onClose:s}=e;if(s){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{s()}finally{xo.removeEventListener("message",e)}};xo.addEventListener("message",e)}const i=xo.document.head||xo.document.body;i?i.appendChild(o):Do&&A.error("Not injecting report dialog. No injection point found in HTML")}function ui(){}function li(e){e()}function di(e){const t=ke();t&&t.captureUserFeedback(e)}const pi={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},hi=xo;async function fi(e,t){const n=pi[e],o=hi.Sentry=hi.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=o[e];if("function"==typeof s&&!("_isShim"in s))return s;const i=function(e){const t=ke(),n=t&&t.getOptions(),o=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${r}/${e}.min.js`,o).toString()}(n),a=xo.document.createElement("script");a.src=i,a.crossOrigin="anonymous",a.referrerPolicy="origin",t&&a.setAttribute("nonce",t);const c=new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",t)})),u=xo.document.currentScript,l=xo.document.body||xo.document.head||u&&u.parentElement;if(!l)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);l.appendChild(a);try{await c}catch(t){throw new Error(`Error when loading integration: ${e}`)}const d=o[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}const mi=o,gi=new WeakMap,_i=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(gi.has(ke()))for(const t of e)Se((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Jt(`${n}: ${r}`)}))}return{name:"ReportingObserver",setupOnce(){if(!("ReportingObserver"in Xo))return;new mi.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){gi.set(e,!0)}}};function yi(e,t){const n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){if(!t)return!1;return vi(e)===vi(t)}(e,r)}function vi(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const bi=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:"HttpClient",setup(e){!function(e,t){if(!Qo())return;Ps((n=>{if(ke()!==e)return;const{response:r,args:o}=n,[s,i]=o;r&&function(e,t,n,r){if(Ei(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,i,a;Ci()&&([o,i]=Si("Cookie",e),[s,a]=Si("Set-Cookie",n));Kt(xi({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:i,responseCookies:a}))}}(t,s,r,i)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in o))return;Ls((n=>{if(ke()!==e)return;const r=n.xhr,o=r[Ds];if(!o)return;const{method:s,request_headers:i}=o;try{!function(e,t,n,r){if(Ei(e,t.status,t.responseURL)){let e,o,s;if(Ci()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=ki(e))}catch(e){}try{s=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{})}(t)}catch(e){}e=r}Kt(xi({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:s,responseCookies:o}))}}(t,r,s,i)}catch(e){Do&&A.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Si(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=ki(t))}catch(e){}return[n,r]}function wi(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function ki(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function Ei(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!yi(n,ke());var r,o}function xi(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:wi(e.responseHeaders)}}};return te(n,{type:"http.client",handled:!1}),n}function Ci(){const e=ke();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const Ti=o,Ii=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent(e){return function(e,t){const n=Ti.document,r=Ti.location&&(o=Ti.location.href,o.split(/[?#]/,1)[0]);var o;if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const a=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return s.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>D(e,0)));const s=Math.min(r-1,o);t.context_line=D(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>D(e,0)))}(t,e,r),e}(e,a,r,t))))})),e}(e,t)}}};function Mi(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Ri(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Ai(){return"undefined"!=typeof window&&(!Ri()||void 0!==o.process&&"renderer"===o.process.type)}const Oi=(e,t,n,r)=>{let o,s;return i=>{t.value>=0&&(i||r)&&(s=t.value-(o||0),(s||void 0===o)&&(o=t.value,t.delta=s,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Di=()=>es.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Li=()=>{const e=Di();return e&&e.activationStart||0},Ni=(e,t)=>{const n=Di();let r="navigate";n&&(es.document&&es.document.prerendering||Li()>0?r="prerender":es.document&&es.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Pi=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Fi=e=>{const t=t=>{("pagehide"===t.type||es.document&&"hidden"===es.document.visibilityState)&&e(t)};es.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},$i=e=>{let t=!1;return n=>{t||(e(n),t=!0)}};let Bi=-1;const Ui=e=>{"hidden"===es.document.visibilityState&&Bi>-1&&(Bi="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",Ui,!0),removeEventListener("prerenderingchange",Ui,!0))},ji=()=>(es.document&&Bi<0&&(Bi="hidden"!==es.document.visibilityState||es.document.prerendering?1/0:0,addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0)),{get firstHiddenTime(){return Bi}}),Hi=e=>{es.document&&es.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},zi=[1800,3e3],Wi=[.1,.25],qi=(e,t={})=>{((e,t={})=>{Hi((()=>{const n=ji(),r=Ni("FCP");let o;const s=Pi("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-Li(),0),r.entries.push(e),o(!0)))}))}));s&&(o=Oi(e,r,zi,t.reportAllChanges))}))})($i((()=>{const n=Ni("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],n=s[s.length-1];o&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e])}})),o>n.value&&(n.value=o,n.entries=s,r())},a=Pi("layout-shift",i);a&&(r=Oi(e,n,Wi,t.reportAllChanges),Fi((()=>{i(a.takeRecords()),r(!0)})),setTimeout(r,0))})))},Yi=[100,300];let Vi=0,Gi=1/0,Xi=0;const Ji=e=>{e.forEach((e=>{e.interactionId&&(Gi=Math.min(Gi,e.interactionId),Xi=Math.max(Xi,e.interactionId),Vi=Xi?(Xi-Gi)/7+1:0)}))};let Ki;const Qi=()=>{"interactionCount"in performance||Ki||(Ki=Pi("event",Ji,{type:"event",buffered:!0,durationThreshold:0}))},Zi=[200,500],ea=()=>(Ki?Vi:performance.interactionCount||0)-0,ta=[],na={},ra=e=>{const t=ta[ta.length-1],n=na[e.interactionId];if(n||ta.length<10||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};na[t.id]=t,ta.push(t)}ta.sort(((e,t)=>t.latency-e.latency)),ta.splice(10).forEach((e=>{delete na[e.id]}))}},oa=(e,t={})=>{Hi((()=>{Qi();const n=Ni("INP");let r;const o=e=>{e.forEach((e=>{if(e.interactionId&&ra(e),"first-input"===e.entryType){!ta.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&ra(e)}}));const t=(()=>{const e=Math.min(ta.length-1,Math.floor(ea()/50));return ta[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},s=Pi("event",o,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});r=Oi(e,n,Zi,t.reportAllChanges),s&&("PerformanceEventTiming"in es&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),Fi((()=>{o(s.takeRecords()),n.value<0&&ea()>0&&(n.value=0,n.entries=[]),r(!0)})))}))},sa=[2500,4e3],ia={},aa=[800,1800],ca=e=>{es.document&&es.document.prerendering?Hi((()=>ca(e))):es.document&&"complete"!==es.document.readyState?addEventListener("load",(()=>ca(e)),!0):setTimeout(e,0)},ua={},la={};let da,pa,ha,fa,ma;function ga(e,t=!1){return Ta("cls",e,wa,da,t)}function _a(e,t=!1){return Ta("lcp",e,Ea,ha,t)}function ya(e){return Ta("fid",e,ka,pa)}function va(e){return Ta("inp",e,Ca,ma)}function ba(e,t){return Ia(e,t),la[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Pi(e,(t=>{Sa(e,{entries:t})}),t)}(e),la[e]=!0),Ma(e,t)}function Sa(e,t){const n=ua[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){Zo&&A.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ze(r)}\nError:`,t)}}function wa(){return qi((e=>{Sa("cls",{metric:e}),da=e}),{reportAllChanges:!0})}function ka(){return((e,t={})=>{Hi((()=>{const n=ji(),r=Ni("FID");let o;const s=e=>{e.startTime<n.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),o(!0))},i=e=>{e.forEach(s)},a=Pi("first-input",i);o=Oi(e,r,Yi,t.reportAllChanges),a&&Fi($i((()=>{i(a.takeRecords()),a.disconnect()})))}))})((e=>{Sa("fid",{metric:e}),pa=e}))}function Ea(){return((e,t={})=>{Hi((()=>{const n=ji(),r=Ni("LCP");let o;const s=e=>{const t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-Li(),0),r.entries=[t],o())},i=Pi("largest-contentful-paint",s);if(i){o=Oi(e,r,sa,t.reportAllChanges);const n=$i((()=>{ia[r.id]||(s(i.takeRecords()),i.disconnect(),ia[r.id]=!0,o(!0))}));["keydown","click"].forEach((e=>{es.document&&addEventListener(e,(()=>setTimeout(n,0)),!0)})),Fi(n)}}))})((e=>{Sa("lcp",{metric:e}),ha=e}),{reportAllChanges:!0})}function xa(){return((e,t={})=>{const n=Ni("TTFB"),r=Oi(e,n,aa,t.reportAllChanges);ca((()=>{const e=Di();if(e){const t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-Li(),0),n.entries=[e],r(!0)}}))})((e=>{Sa("ttfb",{metric:e}),fa=e}))}function Ca(){return oa((e=>{Sa("inp",{metric:e}),ma=e}))}function Ta(e,t,n,r,o=!1){let s;return Ia(e,t),la[e]||(s=n(),la[e]=!0),r&&t({metric:r}),Ma(e,t,o?s:void 0)}function Ia(e,t){ua[e]=ua[e]||[],ua[e].push(t)}function Ma(e,t,n){return()=>{n&&n();const r=ua[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}const Ra=o,Aa="sentryReplaySession",Oa="Unable to send Replay",Da=15e4,La=5e3,Na=2e7,Pa=36e5;function Fa(e,t){return null!=e?e:t()}function $a(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var Ba;function Ua(e){const t=$a([e,"optionalAccess",e=>e.host]);return Boolean($a([t,"optionalAccess",e=>e.shadowRoot])===e)}function ja(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Ha(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,za).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function za(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Ha(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Ba||(Ba={}));class Wa{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;return Fa($a([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]),(()=>-1))}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function qa({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Ya({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Va(e){return e.toLowerCase()}function Ga(e){return e.toUpperCase()}const Xa="__rrweb_original__";function Ja(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Va(t):null}function Ka(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function Qa(e,t){let n;try{n=new URL(e,Fa(t,(()=>window.location.href)))}catch(e){return null}return Fa($a([n.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",e=>e[1]]),(()=>null))}const Za={};function ec(e){const t=Za[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Za[e]=r.bind(window)}function tc(...e){return ec("setTimeout")(...e)}function nc(...e){return ec("clearTimeout")(...e)}let rc=1;const oc=new RegExp("[^a-z0-9-_:]");function sc(){return rc++}let ic,ac;const cc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,uc=/^(?:[a-z+]+:)?\/\//i,lc=/^www\..*/i,dc=/^(data:)([^,]*),(.*)/i;function pc(e,t){return(e||"").replace(cc,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(uc.test(a)||lc.test(a))return`url(${c}${a}${c})`;if(dc.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const hc=/^[^ \t\n\r\u000c]+/,fc=/^[, \t\n\r\u000c]+/;const mc=new WeakMap;function gc(e,t){return t&&""!==t.trim()?yc(e,t):t}function _c(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function yc(e,t){let n=mc.get(e);if(n||(n=e.createElement("a"),mc.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function vc(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?gc(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(fc),!(n>=t.length);){let s=r(hc);if(","===s.slice(-1))s=gc(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=gc(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?pc(r,yc(e)):"object"===t&&"data"===n?gc(e,r):"function"==typeof s?s(n,r,o):r:gc(e,r):r}function bc(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Sc(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Sc(e.parentNode,t,n,r+1):-1}function wc(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function kc(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=Sc(i,wc(r,o)),c<0)return!0;a=Sc(i,wc(t,n),c>=0?c:1/0)}else{if(a=Sc(i,wc(t,n)),a<0)return!1;c=Sc(i,wc(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function Ec(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:_={},inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Ba.Document,childNodes:[],compatMode:e.compatMode}:{type:Ba.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ba.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:_,unmaskTextClass:y,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=Va(e.tagName);return oc.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!bc(w,r.name,r.value)&&(k[r.name]=vc(n,w,Va(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Ha(t)),r&&(delete k.rel,delete k.href,k._cssText=pc(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Ha(e.sheet);t&&(k._cssText=pc(t,yc(n)))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=Ja(t),r=Ka(t,Ga(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=kc(t,_,v,y,b,qa({type:n,tagName:Ga(w),maskInputOptions:a}));k.value=Ya({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(k.checked=o)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=Xa in o?o[Xa]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(l.type,l.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){ic||(ic=n.createElement("canvas"),ac=ic.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,s=()=>{t.removeEventListener("load",s);try{ic.width=t.naturalWidth,ic.height=t.naturalHeight,ac.drawImage(t,0,0),k.rr_dataURL=ic.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?k.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(S||e.contentDocument||(k.rr_src=k.src),delete k.src);let x;try{customElements.get(w)&&(x=!0)}catch(e){}return{type:Ba.Element,tagName:w,attributes:k,childNodes:[],isSVG:_c(e)||void 0,needBlock:S,rootId:m,isCustom:x}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:_,inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||$a([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Ha(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=pc(p,yc(t.doc))}f&&(p="SCRIPT_PLACEHOLDER");const g=kc(e,r,s,o,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Ya({isMasked:kc(e,r,s,o,i,qa({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:Ba.Text,textContent:p||"",isStyle:h,rootId:l}}(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Ba.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Ba.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function xc(e){return null==e?"":e.toLowerCase()}function Cc(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:T=()=>!1,newlyAddedElement:I=!1}=t;let{preserveWhiteSpace:M=!0}=t;const R=Ec(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:T,newlyAddedElement:I});if(!R)return console.warn(e,"not serialized"),null;let A;A=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Ba.Comment)return!0;if(e.type===Ba.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===Qa(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(xc(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===xc(e.attributes.name)||"icon"===xc(e.attributes.rel)||"apple-touch-icon"===xc(e.attributes.rel)||"shortcut icon"===xc(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&xc(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(xc(e.attributes.property).match(/^(og|twitter|fb):/)||xc(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===xc(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===xc(e.attributes.name)||"googlebot"===xc(e.attributes.name)||"bingbot"===xc(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===xc(e.attributes.name)||"generator"===xc(e.attributes.name)||"framework"===xc(e.attributes.name)||"publisher"===xc(e.attributes.name)||"progid"===xc(e.attributes.name)||xc(e.attributes.property).match(/^article:/)||xc(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===xc(e.attributes.name)||"yandex-verification"===xc(e.attributes.name)||"csrf-token"===xc(e.attributes.name)||"p:domain_verify"===xc(e.attributes.name)||"verify-v1"===xc(e.attributes.name)||"verification"===xc(e.attributes.name)||"shopify-checkout-api-token"===xc(e.attributes.name)))return!0}}return!1}(R,y)&&(M||R.type!==Ba.Text||R.isStyle||R.textContent.replace(/^\s+|\s+$/gm,"").length)?sc():-2;const O=Object.assign(R,{id:A});if(r.add(e,O),-2===A)return null;w&&w(e);let D=!p;if(O.type===Ba.Element){D=D&&!O.needBlock,delete O.needBlock;const t=e.shadowRoot;t&&ja(t)&&(O.isShadowHost=!0)}if((O.type===Ba.Document||O.type===Ba.Element)&&D){y.headWhitespace&&O.type===Ba.Element&&"head"===O.tagName&&(M=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T};for(const n of Array.from(e.childNodes)){const e=Cc(n,t);e&&O.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Cc(n,t);r&&(ja(e.shadowRoot)&&(r.isShadow=!0),O.childNodes.push(r))}}return e.parentNode&&Ua(e.parentNode)&&ja(e.parentNode)&&(O.isShadow=!0),O.type===Ba.Element&&"iframe"===O.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=tc((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{nc(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return tc(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&k){const n=Cc(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T});n&&k(e,n)}}),E),O.type===Ba.Element&&"link"===O.tagName&&"string"==typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"==typeof O.attributes.href&&"css"===Qa(O.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=tc((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{nc(s),o=!0,t()}))}(e,(()=>{if(x){const t=Cc(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T});t&&x(e,t)}}),C),O}function Tc(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Ic(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Mc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Rc={map:{},getId(){return console.error(Mc),-1},getNode(){return console.error(Mc),null},removeNodeFromMap(){console.error(Mc)},has(){return console.error(Mc),!1},reset(){console.error(Mc)}};function Ac(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){Kc("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=Qc((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function Oc(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Qc((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Oc(e,t,s||{},!0)}function Dc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Rc=new Proxy(Rc,{get(e,t,n){return"map"===t&&console.error(Mc),Reflect.get(e,t,n)}}));let Lc=Date.now;function Nc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Tc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Tc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Tc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function Pc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Fc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function $c(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Bc(e,t,n,r,o){if(!e)return!1;const s=$c(e);if(!s)return!1;const i=wc(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Sc(s,i);let c=-1;return!(a<0)&&(r&&(c=Sc(s,wc(null,r))),a>-1&&c<0||a<c)}function Uc(e,t){return-2===t.getId(e)}function jc(e,t){if(Ua(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||jc(e.parentNode,t))}function Hc(e){return Boolean(e.changedTouches)}function zc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Wc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function qc(e){return Boolean(Tc([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Lc=()=>(new Date).getTime());class Yc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Vc(e){let t=null;return Tc([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Gc(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Vc(n);)n=t;return n}(e);return t.contains(n)}function Xc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Gc(e))}const Jc={};function Kc(e){const t=Jc[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Jc[e]=r.bind(window)}function Qc(...e){return Kc("setTimeout")(...e)}var Zc=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Zc||{}),eu=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(eu||{}),tu=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(tu||{}),nu=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(nu||{});function ru(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function ou(e){return"__ln"in e}class su{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=ru([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&ou(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&ou(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const iu=(e,t)=>`${e}@${t}`;class au{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new su,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Xc(o))return;const s=Ua(o.parentNode)?this.mirror.getId(Vc(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=Cc(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{zc(e,this.mirror)&&!Bc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Wc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),qc(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Bc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)uu(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)lu(this.droppedSet,e)||uu(this.removes,e,this.mirror)?lu(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!Uc(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Bc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:kc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,$c(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=Ja(t),o=t.tagName;r=Ka(t,o,n);const s=qa({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=Ya({isMasked:kc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(Bc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!bc(t.tagName,n)&&(o.attributes[n]=vc(this.doc,Va(t.tagName),Va(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Bc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Ua(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Bc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Uc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(cu(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||jc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[iu(n,r)]?cu(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Ua(e.target)||!ja(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Uc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[iu(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Bc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),qc(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function cu(e,t){e.delete(t),t.childNodes.forEach((t=>cu(e,t)))}function uu(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some((e=>e.id===t)))return!0;r=r.parentNode}return!1}(e,t,n)}function lu(e,t){return 0!==e.size&&du(e,t)}function du(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||du(e,n))}let pu;function hu(e){pu=e}function fu(){pu=void 0}const mu=e=>{if(!pu)return e;return(...t)=>{try{return e(...t)}catch(e){if(pu&&!0===pu(e))return()=>{};throw e}}};function gu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const _u=[];function yu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function vu(e,t){const n=new au;_u.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=gu([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(mu((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function bu({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(tu).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Va(i);const l=(t=>i=>{const a=yu(i);if(Bc(a,r,o,s,!0))return;let c=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=nu.Mouse;break;case"touch":c=nu.Touch;break;case"pen":c=nu.Pen}c===nu.Touch?tu[t]===tu.MouseDown?l="TouchStart":tu[t]===tu.MouseUp&&(l="TouchEnd"):nu.Pen}else Hc(i)&&(c=nu.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===nu.Touch||l.startsWith("Mouse")&&c===nu.Mouse)&&(c=null)):tu[t]===tu.Click&&(c=u,u=null);const d=Hc(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;mu(e)({type:tu[l],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(tu[i]){case tu.MouseDown:case tu.MouseUp:a=a.replace("mouse","pointer");break;case tu.TouchStart:case tu.TouchEnd:return}c.push(Ic(a,l,t))})),mu((()=>{c.forEach((e=>e()))}))}function Su({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return Ic("scroll",mu(Ac(mu((i=>{const a=yu(i);if(!a||Bc(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=Nc(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const wu=["INPUT","TEXTAREA","SELECT"],ku=new WeakMap;function Eu({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=yu(e);const l=e.isTrusted,g=n&&Ga(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||wu.indexOf(g)<0||Bc(n,r,o,s,!0))return;const y=n;if(y.classList.contains(i)||a&&y.matches(a))return;const v=Ja(n);let b=Ka(y,g,v),S=!1;const w=qa({maskInputOptions:c,tagName:g,type:v}),k=kc(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Ya({isMasked:k,element:n,value:b,maskInputFn:u}),_(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Ya({isMasked:k,element:e,value:Ka(e,g,v),maskInputFn:u});_(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function _(t,r){const o=ku.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){ku.set(t,r);const o=n.getId(t);mu(e)({...r,id:o})}}const y=("last"===l.input?["change"]:["input","change"]).map((e=>Ic(e,mu(g),t))),v=t.defaultView;if(!v)return()=>{y.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&y.push(...S.map((e=>Oc(e[0],e[1],{set(){mu(g)({target:this,isTrusted:!1})}},!1,v)))),mu((()=>{y.forEach((e=>e()))}))}function xu(e){return function(e,t){if(Mu("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Mu("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Mu("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Mu("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Cu(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Tu({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?gu([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):gu([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=gu([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(gu([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return gu([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=gu([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),mu((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function Iu(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=vu(e,e.doc));const o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=Ac(mu((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),u=mu(Ac(mu((e=>{const t=yu(e),{clientX:n,clientY:o}=Hc(e)?e.changedTouches[0]:e;i||(i=Lc()),a.push({x:n,y:o,id:r.getId(t),timeOffset:Lc()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?eu.Drag:e instanceof MouseEvent?eu.MouseMove:eu.TouchMove)})),o,{trailing:!1})),l=[Ic("mousemove",u,n),Ic("touchmove",u,n),Ic("drag",u,n)];return mu((()=>{l.forEach((e=>e()))}))}(e),s=bu(e),i=Su(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Ic("resize",mu(Ac(mu((()=>{const t=Pc(),o=Fc();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Eu(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=mu((i=>Ac(mu((s=>{const a=yu(s);if(!a||Bc(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),s.media||500))),c=[Ic("play",a(0),i),Ic("pause",a(1),i),Ic("seeked",a(2),i),Ic("volumechange",a(3),i),Ic("ratechange",a(4),i)];return mu((()=>{c.forEach((e=>e()))}))}(e);let l=()=>{},d=()=>{},p=()=>{},h=()=>{};e.recordDOM&&(l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:mu(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Cu(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:mu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Cu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:mu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Cu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:mu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Cu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};Ru("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ru("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ru("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ru("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:mu(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Cu(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:[...xu(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:mu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Cu(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...xu(o),i]}]}),r.apply(o,s)}))})})),mu((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=Tu(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:mu(((o,i,a)=>{const[c,u,l]=a;if(n.has(c))return s.apply(i,[c,u,l]);const{id:d,styleId:p}=Cu(gu([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:xu(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:mu(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:u,styleId:l}=Cu(gu([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:xu(s.parentRule)}),o.apply(s,a)}))}),mu((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),e.collectFonts&&(h=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=Dc(t.fonts,"add",(function(t){return function(n){return Qc(mu((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),mu((()=>{r.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=mu((()=>{const e=t.getSelection();if(!e||a&&gu([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;Bc(a,r,o,s,!0)||Bc(l,r,o,s,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),Ic("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Dc(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return mu((()=>{_u.forEach((e=>e.reset())),gu([r,"optionalAccess",e=>e.disconnect,"call",e=>e()]),o(),s(),i(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function Mu(e){return void 0!==window[e]}function Ru(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Au{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function Ou(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class Du{constructor(){this.crossOriginIframeMirror=new Au(sc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Lu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Au(sc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Au(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Ou([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Zc.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Zc.IncrementalSnapshot,data:{source:eu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Zc.Meta:case Zc.Load:case Zc.DomContentLoaded:return!1;case Zc.Plugin:return t;case Zc.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Zc.IncrementalSnapshot:switch(t.data.source){case eu.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case eu.Drag:case eu.TouchMove:case eu.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case eu.ViewportResize:return!1;case eu.MediaInteraction:case eu.MouseInteraction:case eu.Scroll:case eu.CanvasMutation:case eu.Input:return this.replaceIds(t.data,e,["id"]),t;case eu.StyleSheetRule:case eu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case eu.Font:return t;case eu.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case eu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),Ou([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Ba.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Nu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Pu{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ja(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=vu({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Su({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Qc((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Tu({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Dc(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Xc(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class Fu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class $u{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Yc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:za(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Bu{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,function(...e){Kc("requestAnimationFrame")(...e)}((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Uu,ju;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=Mi([e,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Hu=new Wa;function zu(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:_,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordDOM:C=!0,recordCanvas:T=!1,recordCrossOriginIframes:I=!1,recordAfter:M=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:D,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:N=new Set([]),errorHandler:P,onMutation:F,getCanvasManager:$}=e;hu(P);const B=!I||window.parent===window;let U=!1;if(!B)try{window.parent.document&&(U=!1)}catch(e){U=!0}if(B&&!t)throw new Error("emit function is required");if(!B&&!U)return()=>{};void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Hu.reset();const j=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let z;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const q=e=>{for(const t of D||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!U&&(e=w(e)),e};Uu=(e,o)=>{const s=e;if(s.timestamp=Lc(),!Mi([_u,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===Zc.FullSnapshot||s.type===Zc.IncrementalSnapshot&&s.data.source===eu.Mutation||_u.forEach((e=>e.unfreeze())),B)Mi([t,"optionalCall",e=>e(q(s),o)]);else if(U){const e={type:"rrweb",event:q(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===Zc.FullSnapshot)z=s,W=0;else if(s.type===Zc.IncrementalSnapshot){if(s.data.source===eu.Mutation&&s.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&z&&s.timestamp-z.timestamp>n;(e||t)&&ee(!0)}};const Y=e=>{Uu({type:Zc.IncrementalSnapshot,data:{source:eu.Mutation,...e}})},V=e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.Scroll,...e}}),G=e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.CanvasMutation,...e}}),X=new $u({mutationCb:Y,adoptedStyleSheetCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.AdoptedStyleSheet,...e}})}),J="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Du:new Lu({mirror:Hu,mutationCb:Y,stylesheetManager:X,recordCrossOriginIframes:I,wrappedEmit:Uu});for(const e of D||[])e.getMirror&&e.getMirror({nodeMirror:Hu,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const K=new Bu,Q=function(e,t){try{return e?e(t):new Fu}catch(e){return console.warn("Unable to initialize CanvasManager"),new Fu}}($,{mirror:Hu,win:window,mutationCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.CanvasMutation,...e}}),recordCanvas:T,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:P}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Nu:new Pu({mutationCb:Y,scrollCb:V,bypassOptions:{onMutation:F,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:j,dataURLOptions:E,maskAttributeFn:y,maskTextFn:b,maskInputFn:v,recordCanvas:T,inlineImages:O,sampling:k,slimDOMOptions:H,iframeManager:J,stylesheetManager:X,canvasManager:Q,keepIframeSrcFn:L,processedNodeManager:K},mirror:Hu}),ee=(e=!1)=>{if(!C)return;Uu({type:Zc.Meta,data:{href:window.location.href,width:Fc(),height:Pc()}},e),X.reset(),Z.init(),_u.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Wa,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOM:y=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:C=()=>!1}=t||{};return Cc(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:C,newlyAddedElement:!1})}(document,{mirror:Hu,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:j,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,slimDOM:H,dataURLOptions:E,recordCanvas:T,inlineImages:O,onSerialize:e=>{zc(e,Hu)&&J.addIframe(e),Wc(e,Hu)&&X.trackLinkElement(e),qc(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),e.contentWindow&&Q.addWindow(e.contentWindow),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{X.attachLinkElement(e,t)},keepIframeSrcFn:L});if(!t)return console.warn("Failed to snapshot the document");Uu({type:Zc.FullSnapshot,data:{node:t,initialOffset:Nc(window)}}),_u.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,Hu.getId(document))};ju=ee;try{const e=[],t=e=>mu(Iu)({onMutation:F,mutationCb:Y,mousemoveCb:(e,t)=>Uu({type:Zc.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.MouseInteraction,...e}}),scrollCb:V,viewportResizeCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.ViewportResize,...e}}),inputCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.Input,...e}}),mediaInteractionCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.MediaInteraction,...e}}),styleSheetRuleCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.StyleSheetRule,...e}}),styleDeclarationCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.StyleDeclaration,...e}}),canvasMutationCb:G,fontCb:e=>Uu({type:Zc.IncrementalSnapshot,data:{source:eu.Font,...e}}),selectionCb:e=>{Uu({type:Zc.IncrementalSnapshot,data:{source:eu.Selection,...e}})},customElementCb:e=>{Uu({type:Zc.IncrementalSnapshot,data:{source:eu.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:j,inlineStylesheet:f,sampling:k,recordDOM:C,recordCanvas:T,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:L,blockSelector:s,unblockSelector:i,slimDOMOptions:H,dataURLOptions:E,mirror:Hu,iframeManager:J,stylesheetManager:X,shadowDomManager:Z,processedNodeManager:K,canvasManager:Q,ignoreCSSAttributes:N,plugins:Mi([D,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Uu({type:Zc.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});J.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Ic("DOMContentLoaded",(()=>{Uu({type:Zc.DomContentLoaded,data:{}}),"DOMContentLoaded"===M&&n()}))),e.push(Ic("load",(()=>{Uu({type:Zc.Load,data:{}}),"load"===M&&n()}),window))),()=>{e.forEach((e=>e())),K.destroy(),ju=void 0,fu()}}catch(e){console.warn(e)}}zu.mirror=Hu,zu.takeFullSnapshot=function(e){if(!ju)throw new Error("please take full snapshot after start recording");ju(e)};const Wu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,qu=["info","warn","error","log"],Yu="[Replay] ";function Vu(e,t="info"){no({category:"console",data:{logger:"replay"},level:t,message:`${Yu}${e}`},{level:t})}const Gu=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=n.captureExceptions,t=n.traceInternals}};return Wu?(qu.forEach((e=>{n[e]=(...n)=>{A[e](Yu,...n),t&&Vu(n.join(""),Cn(e))}})),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),A.error(Yu,r),e?Xt(r):t&&Vu(r,"error")},n.infoTick=(...e)=>{A.info(Yu,...e),t&&setTimeout((()=>Vu(e[0])),0)}):qu.forEach((e=>{n[e]=()=>{}})),n}();function Xu(e){return e>9999999999?e:1e3*e}function Ju(e){return e>9999999999?e/1e3:e}function Ku(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Zc.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:qe(t,10,1e3)}}),"console"===t.category))))}function Qu(e){return e.closest("button,a")||e}function Zu(e){const t=el(e);return t&&t instanceof Element?Qu(t):t}function el(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let tl;function nl(e){return tl||(tl=[],F(Ra,"open",(function(e){return function(...t){if(tl)try{tl.forEach((e=>e()))}catch(e){}return e.apply(Ra,t)}}))),tl.push(e),()=>{const t=tl?tl.indexOf(e):-1;t>-1&&tl.splice(t,1)}}const rl=new Set([eu.Mutation,eu.StyleSheetRule,eu.StyleDeclaration,eu.AdoptedStyleSheet,eu.CanvasMutation,eu.Selection,eu.MediaInteraction]);class ol{constructor(e,t,n=Ku){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=nl((()=>{this._lastMutation=il()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!sl.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Ju(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Ju(e)}registerScroll(e=Date.now()){this._lastScroll=Ju(e)}registerClick(e){const t=Qu(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=il();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Ra.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Ra.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=os((()=>this._checkClicks()),1e3)}}const sl=["A","BUTTON","INPUT"];function il(){return Date.now()/1e3}function al(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(rl.has(n)&&e.registerMutation(t.timestamp),n===eu.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===eu.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=zu.mirror.getNode(r);o instanceof HTMLElement&&n===tu.Click&&e.registerClick(o)}}catch(e){}}function cl(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ul;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ul||(ul={}));const ll=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function dl(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(ll.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const pl=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Zu(e.event):el(e.event),n=k(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return cl({category:`ui.${e.name}`,...hl(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=Zu(t.event),s.handleClick(i,a)),Ku(e,n)};function hl(e,t){const n=zu.mirror.getId(e),r=n&&zu.mirror.getNode(n),o=r&&zu.mirror.getMeta(r),s=o&&function(e){return e.type===ul.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===ul.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:dl(s.attributes)}}:{}}}function fl(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const u=k(i,{maxStringLength:200})||"<unknown>",l=hl(i,u);return cl({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&Ku(e,n)}const ml={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:yl(s),end:yl(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=yl(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:yl(h),end:yl(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function gl(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function _l(e){const t=ml[e.entryType];return t?t(e):null}function yl(e){return((J||Ra.performance.timeOrigin)+e)/1e3}function vl(e){const t=e.entries[e.entries.length-1];return El(e,"largest-contentful-paint",t&&t.element?[t.element]:void 0)}function bl(e){return void 0!==e.sources}function Sl(e){const t=[],n=[];for(const r of e.entries)if(bl(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=zu.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return El(e,"cumulative-layout-shift",n,t)}function wl(e){const t=e.entries[e.entries.length-1];return El(e,"first-input-delay",t&&t.target?[t.target]:void 0)}function kl(e){const t=e.entries[e.entries.length-1];return El(e,"interaction-to-next-paint",t&&t.target?[t.target]:void 0)}function El(e,t,n,r){const o=e.value,s=e.rating,i=yl(o);return{type:"web-vital",name:t,start:i,end:i,data:{value:o,size:o,rating:s,nodeIds:n?n.map((e=>zu.mirror.getId(e))):void 0,attributions:r}}}class xl extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Cl{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Na)throw new xl;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Xu(e):null}}class Tl{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Wu&&Gu.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return Wu&&Gu.error("Error in compression worker: ",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Il{constructor(e){this._worker=new Tl(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Xu(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Na?Promise.reject(new xl):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Wu&&Gu.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Ml{constructor(e){this._fallback=new Cl,this._compression=new Il(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(Wu&&Gu.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const t of e)r.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(e){Wu&&Gu.exception(e,"Failed to add events when switching buffers.")}}}function Rl({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;Wu&&Gu.info("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Ml(n)}catch(e){Wu&&Gu.exception(e,"Failed to create compression worker")}}(t);if(e)return e}return Wu&&Gu.info("Using simple buffer"),new Cl}function Al(){try{return"sessionStorage"in Ra&&!!Ra.sessionStorage}catch(e){return!1}}function Ol(e){!function(){if(!Al())return;try{Ra.sessionStorage.removeItem(Aa)}catch(e){}}(),e.session=void 0}function Dl(e){return void 0!==e&&Math.random()<e}function Ll(e){const t=Date.now();return{id:e.id||K(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Nl(e){if(Al())try{Ra.sessionStorage.setItem(Aa,JSON.stringify(e))}catch(e){}}function Pl({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return Dl(e)?"session":!!t&&"buffer"}(e,t),s=Ll({sampled:o,previousSessionId:r});return n&&Nl(s),s}function Fl(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function $l(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Fl(e.started,t,r)||Fl(e.lastActivity,n,r)}function Bl(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!$l(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Ul({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&function(){if(!Al())return null;try{const e=Ra.sessionStorage.getItem(Aa);if(!e)return null;const t=JSON.parse(e);return Wu&&Gu.infoTick("Loading existing session"),Ll(t)}catch(e){return null}}();return o?Bl(o,{sessionIdleExpire:e,maxReplayDuration:t})?(Wu&&Gu.infoTick("Session in sessionStorage is expired, creating new one..."),Pl(r,{previousSessionId:o.id})):o:(Wu&&Gu.infoTick("Creating new session"),Pl(r,{previousSessionId:n}))}function jl(e,t,n){return!!zl(e,t)&&(Hl(e,t,n),!0)}async function Hl(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o="buffer"===e.recordingMode;try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Zc.Custom}(e))return t(e)}catch(e){return Wu&&Gu.exception(e,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!s)return;return await r.addEvent(s)}catch(t){const n=t&&t instanceof xl,s=n?"addEventSizeExceeded":"addEvent";if(n&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(t),await e.stop({reason:s});const i=ke();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function zl(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Xu(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Wu&&Gu.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function Wl(e){return!e.type}function ql(e){return"transaction"===e.type}function Yl(e){return"feedback"===e.type}function Vl(e){return(t,n)=>{if(!e.isEnabled()||!Wl(t)&&!ql(t))return;const r=n&&n.statusCode;!r||r<200||r>=300||(ql(t)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;os((async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}}))}(e,t))}}function Gl(e){return t=>{e.isEnabled()&&Wl(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Ku(e,cl({category:"replay.hydrate-error",data:{url:x()}}))}}(e,t)}}function Xl(e){const t=ke();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!Jl(t))return;const n=function(e){if(!Jl(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return cl(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>La?(n=!0,`${e.slice(0,La)}`):e;if("object"==typeof e)try{const t=qe(e,7);return JSON.stringify(t).length>La?(n=!0,`${JSON.stringify(t,null,2).slice(0,La)}`):t}catch(e){}return e}));return cl({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return cl(e)}(t);n&&Ku(e,n)}(e,t)))}function Jl(e){return!!e.category}function Kl(){const e=ye().getPropagationContext().dsc;e&&delete e.replay_id;const t=Lt();if(t){delete jt(t).replay_id}}function Ql(e){return Object.assign(((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Wl(t)&&!ql(t)&&!Yl(t))return t;if(!e.checkAndHandleExpiredSession())return Kl(),t;if(Yl(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Zc.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return Wu&&Gu.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==Oa&&!(!t.exception||t.type)&&Dl(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}function Zl(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:Zc.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function ed(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(Zl(e,[n]),!1))))}}function td(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Wu||!e.getOptions()._experiments.traceInternals)&&yi(t,ke())}(e,t.name)||e.addUpdate((()=>(Zl(e,[t]),!0))))}function nd(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=ld(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function rd(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function od(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[ld(e)];if(!e)return[void 0]}catch(t){return Wu&&Gu.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Wu&&Gu.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function sd(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function id(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:W({method:s,statusCode:i,request:a,response:c})}}function ad(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function cd(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Da,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Da);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function ud(e,t){return Object.entries(e).reduce(((n,[r,o])=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=o),n}),{})}function ld(e){return new URLSearchParams(e).toString()}function dd(e,t){const n=function(e,t=Ra.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Ra.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return P(n,t)}async function pd(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=dd(i,n.networkDetailAllowUrls)&&!dd(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return md(e[0],t);if(2===e.length)return md(e[1],t);return{}}(n,t):{};if(!e)return cd(o,r,void 0);const s=hd(n),[i,a]=od(s),c=cd(o,r,i);if(a)return sd(c,a);return c}(n,t.input,u):ad(u),h=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&void 0!==o)return ad(o);const s=r?fd(r.headers,n):{};if(!r||!t&&void 0!==o)return cd(s,o,void 0);const[i,a]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Wu&&Gu.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=os((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?(Wu&&Gu.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(Wu&&Gu.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(r),c=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const s=e&&e.length&&void 0===n?nd(e):n;return r?cd(o,s,t?e:void 0):ad(s)}catch(e){return Wu&&Gu.exception(e,"Failed to serialize response body"),cd(o,n,void 0)}}(i,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:s});if(a)return sd(c,a);return c}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=id("resource.fetch",r);td(n.replay,o)}catch(e){Wu&&Gu.exception(e,"Failed to capture fetch breadcrumb")}}function hd(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function fd(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function md(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?fd(n,t):Array.isArray(n)?{}:ud(n,t):{}}async function gd(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!dd(c,n.networkDetailAllowUrls)||dd(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:ad(d),response:ad(p)}}const h=a[Ds],f=h?ud(h.request_headers,n.networkRequestHeaders):{},m=ud(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e}),{})}(a),n.networkResponseHeaders),[g,_]=n.networkCaptureBodies?od(i):[void 0],[y,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Wu&&Gu.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Wu&&Gu.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Wu&&Gu.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=cd(f,d,g),S=cd(m,p,y);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:_?sd(b,_):b,response:v?sd(S,v):S}}(e,t,n),o=id("resource.xhr",r);td(n.replay,o)}catch(e){Wu&&Gu.exception(e,"Failed to capture xhr breadcrumb")}}function _d(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=nd(r),s=n.getResponseHeader("content-length")?rd(n.getResponseHeader("content-length")):function(e,t){try{return nd("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}function yd(e){const t=ke();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(_d(t,n),gd(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t){const{input:n,response:r}=t,o=nd(n?hd(n):void 0),s=r?rd(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}(t,n),pd(t,n,e))}catch(e){Wu&&Gu.exception(e,"Error when enriching network breadcrumb")}}(a,e,t)))}catch(e){}}function vd(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function bd(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Wu&&Gu.warn("Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&al(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!jl(e,n,o))return!0;if(!o)return!1;const t=e.session;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;jl(e,function(e){const t=e.getOptions();return{type:Zc.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(Wu&&Gu.info(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&Nl(t))}return t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0}))}}async function Sd({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=ke(),p=ye(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return Ie({});const m={type:"replay_event",replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,o);const s=await Yt(e.getOptions(),r,o,t,e,ve());if(!s)return null;s.platform=s.platform||"javascript";const i=e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),Wu&&Gu.info("An event processor returned `null`, will not send event."),Ie({});delete g.sdkProcessingMetadata;const _=function(e,t,n,r){return Un(Qn(e,Kn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let y;try{y=await h.send(_)}catch(e){const t=new Error(Oa);try{t.cause=e}catch(e){}throw t}if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new wd(y.statusCode);const v=bo({},y);if(vo(v,"replay"))throw new kd(v);return y}class wd extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class kd extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Ed(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Sd(e),!0}catch(n){if(n instanceof wd||n instanceof kd)throw n;if(Qt("Replays",{_retryCount:t.count}),r&&r(n),t.count>=3){const e=new Error(`${Oa} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{os((async()=>{try{await Ed(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const xd="__THROTTLED";function Cd(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":xd}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class Td{constructor({options:e,recordingOptions:t}){Td.prototype.__init.call(this),Td.prototype.__init2.call(this),Td.prototype.__init3.call(this),Td.prototype.__init4.call(this),Td.prototype.__init5.call(this),Td.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function u(){return o&&clearTimeout(o),o=os(a,t),i&&void 0===s&&(s=os(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==s?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Cd(((e,t)=>function(e,t,n){return zl(e,t)?Hl(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;if(o&&(this.clickDetector=new ol(this,o)),Wu){const t=e._experiments;Gu.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){Wu&&Gu.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Wu&&Gu.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):Wu&&Gu.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(Wu&&Gu.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(Wu&&Gu.info("Buffering is in progress, call `flush()` to save the replay"));Wu&&Gu.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Ul({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(Wu&&Gu.info("Buffering is in progress, call `flush()` to save the replay"));Wu&&Gu.infoTick("Starting replay in buffer mode");const e=Ul({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=zu({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:bd(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Wu&&Gu.info("Stopping Replay"+(t?` triggered by ${t}`:"")),Kl(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Ol(this)}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Wu&&Gu.info("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Wu&&Gu.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Wu&&Gu.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Fl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Ra.location.pathname}${Ra.location.hash}${Ra.location.search}`,t=`${Ra.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===xd){const e=cl({category:"replay.throttled"});this.addUpdate((()=>!jl(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Lt(),t=e&&Dt(e),n=(t&&Ct(t).data||{})[Ge];if(t&&n&&["route","custom"].includes(n))return Ct(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Rl({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Ul({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Bl(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Ra.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ra.addEventListener("blur",this._handleWindowBlur),Ra.addEventListener("focus",this._handleWindowFocus),Ra.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=ke();Rs(pl(e)),xs(ed(e)),Xl(e),yd(e),un(Ql(e)),t&&(t.on("beforeSendEvent",Gl(e)),t.on("afterSendEvent",Vl(e)),t.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),t.on("spanStart",(t=>{e.lastActiveSpan=t})),t.on("spanEnd",(t=>{e.lastActiveSpan=t})),t.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(ba(e,n))})),r.push(_a(gl(vl,e)),ga(gl(Sl,e)),ya(gl(wl,e)),va(gl(kl,e))),()=>{r.forEach((e=>e()))}}(this)}_removeListeners(){try{Ra.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ra.removeEventListener("blur",this._handleWindowBlur),Ra.removeEventListener("focus",this._handleWindowFocus),Ra.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Ra.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=cl({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=cl({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{fl(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;$l(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Wu&&Gu.info("Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Zc.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(_l).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter((e=>e.start>=t))}return Promise.all(Zl(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(Zl(e,[vd(Ra.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Ed({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=ke();if(t){const n=e instanceof kd?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else Wu&&Gu.error("No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Wu&&Gu.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Wu&&Gu.info(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),void(r&&this._debouncedFlush());const s=this.eventBuffer;s&&0===this.session.segmentId&&!s.hasCheckout&&Wu&&Gu.info("Flushing initial segment without checkout.");const i=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,i&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Nl(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=cl({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Id(e,t){return[...e,...t].join(",")}const Md='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Rd=["content-length","content-type","accept"];let Ad=!1;const Od=e=>new Dd(e);class Dd{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:d=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:_=!0,networkRequestHeaders:y=[],networkResponseHeaders:v=[],mask:b=[],maskAttributes:S=["title","placeholder"],unmask:w=[],block:k=[],unblock:E=[],ignore:x=[],maskFn:C,beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M}={}){this.name=Dd.id;const R=function({mask:e,unmask:t,block:n,unblock:r,ignore:o}){return{maskTextSelector:Id(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Id(t,[]),blockSelector:Id(n,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:Id(r,[]),ignoreSelector:Id(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:b,unmask:w,block:k,unblock:E,ignore:x});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:S,maskAllText:c,privacyOptions:R,key:e,value:t,el:n}),...R,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Pa),stickySession:o,useCompression:s,workerUrl:i,blockAllMedia:l,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:d,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:f,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:_,networkRequestHeaders:Ld(y),networkResponseHeaders:Ld(v),beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Md}`:Md),this._isInitialized&&Ai())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ad}set _isInitialized(e){Ad=e}afterAllSetup(e){Ai()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay&&this._replay.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...W(e)},o=Dn(n.replaysSessionSampleRate),s=Dn(n.replaysOnErrorSampleRate);null==o&&null==s&&R((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));null!=o&&(r.sessionSampleRate=o);null!=s&&(r.errorSampleRate=s);return r}(this._initialOptions,e);this._replay=new Td({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function Ld(e){return[...Rd,...e.map((e=>e.toLowerCase()))]}function Nd(){const e=ke();return e&&e.getIntegrationByName("Replay")}var Pd;function Fd(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Fd(e.parentNode,t,n,r+1):-1}function $d(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}Dd.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Pd||(Pd={}));const Bd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Ud={map:{},getId(){return console.error(Bd),-1},getNode(){return console.error(Bd),null},removeNodeFromMap(){console.error(Bd)},has(){return console.error(Bd),!1},reset(){console.error(Bd)}};function jd(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Vd((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>jd(e,t,s||{},!0)}function Hd(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function zd(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const i=Fd(s,$d(t,n));let a=-1;return!(i<0)&&(r&&(a=Fd(s,$d(null,r))),i>-1&&a<0||i<a)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Ud=new Proxy(Ud,{get(e,t,n){return"map"===t&&console.error(Bd),Reflect.get(e,t,n)}})),/[1-9][0-9]{12}/.test(Date.now().toString());const Wd={};function qd(e){const t=Wd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Wd[e]=r.bind(window)}function Yd(...e){return qd("requestAnimationFrame")(...e)}function Vd(...e){return qd("setTimeout")(...e)}var Gd=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Gd||{});let Xd;const Jd=e=>{if(!Xd)return e;return(...t)=>{try{return e(...t)}catch(e){if(Xd&&!0===Xd(e))return()=>{};throw e}}};for(var Kd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qd="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Zd=0;Zd<64;Zd++)Qd[Kd.charCodeAt(Zd)]=Zd;const ep=new Map;const tp=(e,t,n)=>{if(!e||!op(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=ep.get(e);return n||(n=new Map,ep.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function np(e,t,n){if(e instanceof Array)return e.map((e=>np(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Kd[n[t]>>2],o+=Kd[(3&n[t])<<4|n[t+1]>>4],o+=Kd[(15&n[t+1])<<2|n[t+2]>>6],o+=Kd[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[np(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[np(e.data,t,n),e.width,e.height]}}if(op(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:tp(e,t,n)}}return e}const rp=(e,t,n)=>e.map((e=>np(e,t,n))),op=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function sp(e,t,n,r,o){const s=[];try{const i=Hd(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!zd(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function ip(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const u=Hd(e,i,(function(e){return function(...c){const u=e.apply(this,c);if(tp(u,a,this),"tagName"in this.canvas&&!zd(this.canvas,r,o,s)){const e=rp(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const o=jd(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class ap{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,Mi([this,"access",e=>e.worker,"optionalAccess",e=>e.terminate,"call",e=>e()]),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&(Xd=u),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),e.enableManualSnapshot||Jd((()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,o,s,i,{dataURLOptions:c})}))()}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:o,recordCanvas:s,enableManualSnapshot:i}=this.options;if(!this.windowsSet.has(e)){if(i)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));Jd((()=>{if(s&&"all"===t&&this.initCanvasMutationObserver(e,n,r,o),s&&"number"==typeof t){const t=sp(e,n,r,o,!0);this.restoreHandlers.push((()=>{t()}))}}))(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:Gd["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})},e}initCanvasFPSObserver(e,t,n,r,o,s){const i=this.takeSnapshot(!1,e,t,n,r,o,s.dataURLOptions);this.restoreHandlers.push((()=>{cancelAnimationFrame(i)}))}initCanvasMutationObserver(e,t,n,r){const o=sp(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=Hd(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return zd(this.canvas,n,r,o)||Vd((()=>{const n=rp(i,t,this);e(this.canvas,{type:Gd["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch(n){const r=jd(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Gd["2D"],property:a,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o){const s=[];return s.push(...ip(t.WebGLRenderingContext.prototype,Gd.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...ip(t.WebGL2RenderingContext.prototype,Gd.WebGL2,e,n,r,o,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push((()=>{o(),s(),i()}))}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push((()=>{cancelAnimationFrame(n)}))}takeSnapshot(e,t,n,r,o,s,i,a){const c=1e3/t;let u,l=0;const d=e=>{if(e)return[e];const t=[],s=e=>{e.querySelectorAll("canvas").forEach((e=>{zd(e,n,r,o)||t.push(e)}))};for(const e of this.windows){const t=e.deref();t&&s(t.document)}for(const e of this.shadowDoms){const t=e.deref();t&&s(t)}return t},p=t=>{this.windows.length&&(l&&t-l<c?u=Yd(p):(l=t,d(a).forEach((t=>{if(!this.mirror.hasNode(t))return;const n=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(n)&&t.width&&t.height){if(this.snapshotInProgressMap.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Mi([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{Mi([this,"access",e=>e.worker,"optionalAccess",e=>e.postMessage,"call",r=>r({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:i,maxCanvasSize:s},[e])])})).catch((e=>{Jd((()=>{throw e}))()}))}})),e||(u=Yd(p))))};return u=Yd(p),u}startPendingCanvasMutationFlusher(){Yd((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,Yd(e)};Yd(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),Yd((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const cp={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},up=1280,lp=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,up):up,n?Math.min(n,up):up]};let o;const s=new Promise((e=>o=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new ap({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...cp[e||"medium"]||cp.medium}},async snapshot(e){(await s).snapshot(e)}}},dp=o,pp=dp.document,hp=dp.navigator,fp="Report a Bug",mp=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=ke();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&ye().setTags(e.tags);const r=fo({source:"api",url:x(),...e},t);return new Promise(((e,t)=>{const o=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3),s=n.on("afterSendEvent",((n,i)=>{if(n.event_id===r)return clearTimeout(o),s(),i&&"number"==typeof i.statusCode&&i.statusCode>=200&&i.statusCode<300&&e(r),i&&"number"==typeof i.statusCode&&0===i.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):i&&"number"==typeof i.statusCode&&403===i.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},gp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function _p(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function yp(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function vp({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=pp.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||fp,o.appendChild(function(){const e=e=>dp.document.createElementNS("http://www.w3.org/2000/svg",e),t=yp(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=yp(e("g"),{clipPath:"url(#clip0_57_80)"}),r=yp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=yp(e("clipPath"),{id:"clip0_57_80"}),i=yp(e("rect"),{width:"20",height:"20",fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),t}()),e){const t=pp.createElement("span");t.appendChild(pp.createTextNode(e)),o.appendChild(t)}const s=function(e){const t=pp.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(r);return{el:o,appendToDom(){n.appendChild(s),n.appendChild(o)},removeFromDom(){n.removeChild(o),n.removeChild(s)},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const bp="rgba(88, 74, 192, 1)",Sp={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:bp,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},wp={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:bp,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function kp(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const Ep=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:r="sentry-feedback",autoInject:o=!0,showBranding:s=!0,isEmailRequired:i=!1,isNameRequired:a=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:l=!0,useSentryUser:d={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:f,colorScheme:m="system",themeLight:g={},themeDark:_={},addScreenshotButtonLabel:y="Add a screenshot",cancelButtonLabel:v="Cancel",confirmButtonLabel:b="Confirm",emailLabel:S="Email",emailPlaceholder:w="your.email@example.org",formTitle:k="Report a Bug",isRequiredLabel:E="(required)",messageLabel:x="Description",messagePlaceholder:C="What's the bug? What did you expect?",nameLabel:T="Name",namePlaceholder:I="Your Name",removeScreenshotButtonLabel:M="Remove screenshot",submitButtonLabel:R="Send Bug Report",successMessageText:O="Thank you for your report!",triggerLabel:D=fp,triggerAriaLabel:L="",onFormOpen:N,onFormClose:P,onSubmitSuccess:F,onSubmitError:$,onFormSubmitted:B}={})=>{const U={id:r,autoInject:o,showBranding:s,isEmailRequired:i,isNameRequired:a,showEmail:c,showName:u,enableScreenshot:l,useSentryUser:d,tags:p,styleNonce:h,scriptNonce:f,colorScheme:m,themeDark:_,themeLight:g,triggerLabel:D,triggerAriaLabel:L,cancelButtonLabel:v,submitButtonLabel:R,confirmButtonLabel:b,formTitle:k,emailLabel:S,emailPlaceholder:w,messageLabel:x,messagePlaceholder:C,nameLabel:T,namePlaceholder:I,successMessageText:O,isRequiredLabel:E,addScreenshotButtonLabel:y,removeScreenshotButtonLabel:M,onFormClose:P,onFormOpen:N,onSubmitError:$,onSubmitSuccess:F,onFormSubmitted:B};let j=null,H=[];const z=e=>{if(!j){const t=pp.createElement("div");t.id=String(e.id),pp.body.appendChild(t),j=t.attachShadow({mode:"open"}),j.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=pp.createElement("style");return o.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${kp("dark"===e?{...wp,...t}:{...Sp,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${kp({...wp,...t})}\n  }\n}`:""}\n}\n`,r&&o.setAttribute("nonce",r),o}(e))}return j},W=async(t,n,r)=>{const o=ke(),s=o&&o.getIntegrationByName(t);if(s)return s;const i=(n&&n()||await e(r,f))();return o&&o.addIntegration(i),i},q=async e=>{const r=e.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(hp.userAgent)||/Macintosh/i.test(hp.userAgent)&&hp.maxTouchPoints&&hp.maxTouchPoints>1||!isSecureContext),[o,s]=await Promise.all([W("FeedbackModal",t,"feedbackModalIntegration"),r?W("FeedbackScreenshot",n,"feedbackScreenshotIntegration"):void 0]);if(!o)throw gp&&A.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");r&&!s&&gp&&A.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.");const i=o.createDialog({options:{...e,onFormClose:()=>{i&&i.close(),e.onFormClose&&e.onFormClose()},onFormSubmitted:()=>{i&&i.close(),e.onFormSubmitted&&e.onFormSubmitted()}},screenshotIntegration:r?s:void 0,sendFeedback:mp,shadow:z(e)});return i},Y=(e,t={})=>{const n=_p(U,t),r="string"==typeof e?pp.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)throw gp&&A.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let o=null;const s=async()=>{o||(o=await q({...n,onFormSubmitted:()=>{o&&o.removeFromDom(),n.onFormSubmitted&&n.onFormSubmitted()}})),o.appendToDom(),o.open()};r.addEventListener("click",s);const i=()=>{H=H.filter((e=>e!==i)),o&&o.removeFromDom(),o=null,r.removeEventListener("click",s)};return H.push(i),i},V=(e={})=>{const t=_p(U,e),n=z(t),r=vp({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:h});return Y(r.el,{...t,onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}}),r};return{name:"Feedback",setupOnce(){Ai()&&U.autoInject&&("loading"===pp.readyState?pp.addEventListener("DOMContentLoaded",(()=>V().appendToDom())):V().appendToDom())},attachTo:Y,createWidget(e={}){const t=V(_p(U,e));return t.appendToDom(),t},async createForm(e={}){return q(_p(U,e))},remove(){j&&(j.parentElement&&j.parentElement.remove(),j=null),H.forEach((e=>e())),H=[]}}};function xp(){const e=ke();return e&&e.getIntegrationByName("Feedback")}var Cp,Tp,Ip,Mp,Rp,Ap,Op,Dp={},Lp=[],Np=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Pp=Array.isArray;function Fp(e,t){for(var n in t)e[n]=t[n];return e}function $p(e){var t=e.parentNode;t&&t.removeChild(e)}function Bp(e,t,n){var r,o,s,i={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?Cp.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===i[s]&&(i[s]=e.defaultProps[s]);return Up(e,i,r,o,null)}function Up(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++Ip:o,__i:-1,__u:0};return null==o&&null!=Tp.vnode&&Tp.vnode(s),s}function jp(e){return e.children}function Hp(e,t){this.props=e,this.context=t}function zp(e,t){if(null==t)return e.__?zp(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?zp(e):null}function Wp(e,t,n){var r,o=e.__v,s=o.__e,i=e.__P;if(i)return(r=Fp({},o)).__v=o.__v+1,Tp.vnode&&Tp.vnode(r),th(i,r,o,e.__n,void 0!==i.ownerSVGElement,32&o.__u?[s]:null,t,null==s?zp(o):s,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&qp(r),r}function qp(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return qp(e)}}function Yp(e){(!e.__d&&(e.__d=!0)&&Mp.push(e)&&!Vp.__r++||Rp!==Tp.debounceRendering)&&((Rp=Tp.debounceRendering)||Ap)(Vp)}function Vp(){var e,t,n,r=[],o=[];for(Mp.sort(Op);e=Mp.shift();)e.__d&&(n=Mp.length,t=Wp(e,r,o)||t,0===n||Mp.length>n?(nh(r,t,o),o.length=r.length=0,t=void 0,Mp.sort(Op)):t&&Tp.__c&&Tp.__c(t,Lp));t&&nh(r,t,o),Vp.__r=0}function Gp(e,t,n,r,o,s,i,a,c,u,l){var d,p,h,f,m,g=r&&r.__k||Lp,_=t.length;for(n.__d=c,function(e,t,n){var r,o,s,i,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(o=e.__k[r]=null==(o=t[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?Up(null,o,null,null,o):Pp(o)?Up(jp,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?Up(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,a=Jp(o,n,i=r+d,l),o.__i=a,s=null,-1!==a&&(l--,(s=n[a])&&(s.__u|=131072)),null==s||null===s.__v?(-1==a&&d--,"function"!=typeof o.type&&(o.__u|=65536)):a!==i&&(a===i+1?d++:a>i?l>c-i?d+=a-i:d--:d=a<i&&a==i-1?a-i:0,a!==r+d&&(o.__u|=65536))):(s=n[r])&&null==s.key&&s.__e&&(s.__e==e.__d&&(e.__d=zp(s)),sh(s,s,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(s=n[r])&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=zp(s)),sh(s,s))}(n,t,g),c=n.__d,d=0;d<_;d++)null!=(h=n.__k[d])&&"boolean"!=typeof h&&"function"!=typeof h&&(p=-1===h.__i?Dp:g[h.__i]||Dp,h.__i=d,th(e,h,p,o,s,i,a,c,u,l),f=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&oh(p.ref,null,h),l.push(h.ref,h.__c||f,h)),null==m&&null!=f&&(m=f),65536&h.__u||p.__k===h.__k?c=Xp(h,c,e):"function"==typeof h.type&&void 0!==h.__d?c=h.__d:f&&(c=f.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=c,n.__e=m}function Xp(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Xp(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function Jp(e,t,n,r){var o=e.key,s=e.type,i=n-1,a=n+1,c=t[n];if(null===c||c&&o==c.key&&s===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&!(131072&c.__u)&&o==c.key&&s===c.type)return i;i--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&s===c.type)return a;a++}}return-1}function Kp(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Np.test(t)?n:n+"px"}function Qp(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Kp(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Kp(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?eh:Zp,s)):e.removeEventListener(t,s?eh:Zp,s);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function Zp(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Tp.event?Tp.event(e):e)}}function eh(e){if(this.l)return this.l[e.type+!0](Tp.event?Tp.event(e):e)}function th(e,t,n,r,o,s,i,a,c,u){var l,d,p,h,f,m,g,_,y,v,b,S,w,k,E,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(l=Tp.__b)&&l(t);e:if("function"==typeof x)try{if(_=t.props,y=(l=x.contextType)&&r[l.__c],v=l?y?y.props.value:l.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,v):(t.__c=d=new Hp(_,v),d.constructor=x,d.render=ih),y&&y.sub(d),d.props=_,d.state||(d.state={}),d.context=v,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=Fp({},d.__s)),Fp(d.__s,x.getDerivedStateFromProps(_,d.__s))),h=d.props,f=d.state,d.__v=t,p)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&i.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,v),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,f,m)}))}if(d.context=v,d.props=_,d.__P=e,d.__e=!1,S=Tp.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do{d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=Fp(Fp({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(h,f)),Gp(e,Pp(E=null!=l&&l.type===jp&&null==l.key?l.props.children:l)?E:[E],t,n,r,o,s,i,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&i.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=s?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Tp.__e(e,t,n)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=rh(n.__e,t,n,r,o,s,i,c,u);(l=Tp.diffed)&&l(t)}function nh(e,t,n){for(var r=0;r<n.length;r++)oh(n[r],n[++r],n[++r]);Tp.__c&&Tp.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Tp.__e(e,t.__v)}}))}function rh(e,t,n,r,o,s,i,a,c){var u,l,d,p,h,f,m,g=n.props,_=t.props,y=t.type;if("svg"===y&&(o=!0),null!=s)for(u=0;u<s.length;u++)if((h=s[u])&&"setAttribute"in h==!!y&&(y?h.localName===y:3===h.nodeType)){e=h,s[u]=null;break}if(null==e){if(null===y)return document.createTextNode(_);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,_.is&&_),s=null,a=!1}if(null===y)g===_||a&&e.data===_||(e.data=_);else{if(s=s&&Cp.call(e.childNodes),g=n.props||Dp,!a&&null!=s)for(g={},u=0;u<e.attributes.length;u++)g[(h=e.attributes[u]).name]=h.value;for(u in g)h=g[u],"children"==u||("dangerouslySetInnerHTML"==u?d=h:"key"===u||u in _||Qp(e,u,null,h,o));for(u in _)h=_[u],"children"==u?p=h:"dangerouslySetInnerHTML"==u?l=h:"value"==u?f=h:"checked"==u?m=h:"key"===u||a&&"function"!=typeof h||g[u]===h||Qp(e,u,h,g[u],o);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),Gp(e,Pp(p)?p:[p],t,n,r,o&&"foreignObject"!==y,s,i,s?s[0]:n.__k&&zp(n,0),a,c),null!=s)for(u=s.length;u--;)null!=s[u]&&$p(s[u]);a||(u="value",void 0!==f&&(f!==e[u]||"progress"===y&&!f||"option"===y&&f!==g[u])&&Qp(e,u,f,g[u],!1),u="checked",void 0!==m&&m!==e[u]&&Qp(e,u,m,g[u],!1))}return e}function oh(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Tp.__e(e,n)}}function sh(e,t,n){var r,o;if(Tp.unmount&&Tp.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||oh(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Tp.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&sh(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||$p(e.__e),e.__=e.__e=e.__d=void 0}function ih(e,t,n){return this.constructor(e,n)}Cp=Lp.slice,Tp={__e:function(e,t,n,r){for(var o,s,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(e)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),i=o.__d),i)return o.__E=o}catch(t){e=t}throw e}},Ip=0,Hp.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Fp({},this.state),"function"==typeof e&&(e=e(Fp({},n),this.props)),e&&Fp(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Yp(this))},Hp.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Yp(this))},Hp.prototype.render=jp,Mp=[],Ap="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Op=function(e,t){return e.__v.__b-t.__v.__b},Vp.__r=0;var ah,ch,uh,lh,dh=0,ph=[],hh=[],fh=Tp,mh=fh.__b,gh=fh.__r,_h=fh.diffed,yh=fh.__c,vh=fh.unmount,bh=fh.__;function Sh(e,t){fh.__h&&fh.__h(ch,e,dh||t),dh=0;var n=ch.__H||(ch.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:hh}),n.__[e]}function wh(e){return dh=1,kh(Dh,e)}function kh(e,t,n){var r=Sh(ah++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Dh(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=ch,!ch.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var i=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&r.__c.props===e)&&(!s||s.call(this,e,t,n))};ch.u=!0;var s=ch.shouldComponentUpdate,i=ch.componentWillUpdate;ch.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,o(e,t,n),s=r}i&&i.call(this,e,t,n)},ch.shouldComponentUpdate=o}return r.__N||r.__}function Eh(e,t){var n=Sh(ah++,4);!fh.__s&&Oh(n.__H,t)&&(n.__=e,n.i=t,ch.__h.push(n))}function xh(e,t){var n=Sh(ah++,7);return Oh(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Ch(e,t){return dh=8,xh((function(){return e}),t)}function Th(){for(var e;e=ph.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Rh),e.__H.__h.forEach(Ah),e.__H.__h=[]}catch(t){e.__H.__h=[],fh.__e(t,e.__v)}}fh.__b=function(e){ch=null,mh&&mh(e)},fh.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),bh&&bh(e,t)},fh.__r=function(e){gh&&gh(e),ah=0;var t=(ch=e.__c).__H;t&&(uh===ch?(t.__h=[],ch.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=hh,e.__N=e.i=void 0}))):(t.__h.forEach(Rh),t.__h.forEach(Ah),t.__h=[],ah=0)),uh=ch},fh.diffed=function(e){_h&&_h(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ph.push(t)&&lh===fh.requestAnimationFrame||((lh=fh.requestAnimationFrame)||Mh)(Th)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==hh&&(e.__=e.__V),e.i=void 0,e.__V=hh}))),uh=ch=null},fh.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Rh),e.__h=e.__h.filter((function(e){return!e.__||Ah(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],fh.__e(n,e.__v)}})),yh&&yh(e,t)},fh.unmount=function(e){vh&&vh(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Rh(e)}catch(e){t=e}})),n.__H=void 0,t&&fh.__e(t,n.__v))};var Ih="function"==typeof requestAnimationFrame;function Mh(e){var t,n=function(){clearTimeout(r),Ih&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ih&&(t=requestAnimationFrame(n))}function Rh(e){var t=ch,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ch=t}function Ah(e){var t=ch;e.__c=e.__(),ch=t}function Oh(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Dh(e,t){return"function"==typeof t?t(e):t}const Lh={__proto__:null,useCallback:Ch,useContext:function(e){var t=ch.context[e.__c],n=Sh(ah++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(ch)),t.props.value):e.__},useDebugValue:function(e,t){fh.useDebugValue&&fh.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Sh(ah++,3);!fh.__s&&Oh(n.__H,t)&&(n.__=e,n.i=t,ch.__H.__h.push(n))},useErrorBoundary:function(e){var t=Sh(ah++,10),n=wh();return t.__=e,ch.componentDidCatch||(ch.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Sh(ah++,11);if(!e.__){for(var t=ch.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){dh=6,Eh((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:Eh,useMemo:xh,useReducer:kh,useRef:function(e){return dh=5,xh((function(){return{current:e}}),[])},useState:wh};function Nh(){const e=e=>pp.createElementNS("http://www.w3.org/2000/svg",e),t=yp(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=yp(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Ph({options:e}){const t=xh((()=>({__html:Nh().outerHTML})),[]);return Bp("h2",{class:"dialog__header"},Bp("span",{class:"dialog__title"},e.formTitle),e.showBranding?Bp("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Fh(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function $h({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:l,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:p,cancelButtonLabel:h,emailLabel:f,emailPlaceholder:m,isEmailRequired:g,isNameRequired:_,messageLabel:y,messagePlaceholder:v,nameLabel:b,namePlaceholder:S,submitButtonLabel:w,isRequiredLabel:k}=e,[E,x]=wh(null),[C,T]=wh(!1),I=u&&u.input,[M,R]=wh(null),O=Ch((e=>{R(e),T(!1)}),[]),D=Ch((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:f,isEmailRequired:g,isNameRequired:_,messageLabel:y,nameLabel:b});return t.length>0?x(`Please enter in the following required fields: ${t.join(", ")}`):x(null),0===t.length}),[f,g,_,y,b]),L=Ch((async e=>{try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(u&&C?u.value():void 0),r={name:Fh(t,"name"),email:Fh(t,"email"),message:Fh(t,"message"),attachments:n?[n]:void 0};if(!D(r))return;try{await o({name:r.name,email:r.email,message:r.message,source:"widget",tags:l},{attachments:r.attachments}),s(r)}catch(e){gp&&A.error(e),x(e),i(e)}}catch(e){}}),[u&&C,s,i]);return Bp("form",{class:"form",onSubmit:L},I&&C?Bp(I,{onError:O}):null,Bp("div",{class:"form__right","data-sentry-feedback":!0},Bp("div",{class:"form__top"},E?Bp("div",{class:"form__error-container"},E):null,c?Bp("label",{for:"name",class:"form__label"},Bp(Bh,{label:b,isRequiredLabel:k,isRequired:_}),Bp("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:S,required:_,type:"text"})):Bp("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?Bp("label",{for:"email",class:"form__label"},Bp(Bh,{label:f,isRequiredLabel:k,isRequired:g}),Bp("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):Bp("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Bp("label",{for:"message",class:"form__label"},Bp(Bh,{label:y,isRequiredLabel:k,isRequired:!0}),Bp("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:v,required:!0,rows:5})),I?Bp("label",{for:"screenshot",class:"form__label"},Bp("button",{class:"btn btn--default",type:"button",onClick:()=>{R(null),T((e=>!e))}},C?p:d),M?Bp("div",{class:"form__error-container"},M.message):null):null),Bp("div",{class:"btn-group"},Bp("button",{class:"btn btn--primary",type:"submit"},w),Bp("button",{class:"btn btn--default",type:"button",onClick:r},h))))}function Bh({label:e,isRequired:t,isRequiredLabel:n}){return Bp("span",{class:"form__label__text"},e,t&&Bp("span",{class:"form__label__text--required"},n))}function Uh(){const e=e=>dp.document.createElementNS("http://www.w3.org/2000/svg",e),t=yp(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),n=yp(e("g"),{clipPath:"url(#clip0_57_156)"}),r=yp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=yp(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=yp(e("clipPath"),{id:"clip0_57_156"}),a=yp(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),t}function jh({open:e,onFormSubmitted:t,...n}){const r=n.options,o=xh((()=>({__html:Uh().outerHTML})),[]),[s,i]=wh(null),a=Ch((()=>{s&&(clearTimeout(s),i(null)),t()}),[s]),c=Ch((e=>{n.onSubmitSuccess(e),i(setTimeout((()=>{t(),i(null)}),5e3))}),[t]);return Bp(jp,null,s?Bp("div",{class:"success__position",onClick:a},Bp("div",{class:"success__content"},r.successMessageText,Bp("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):Bp("dialog",{class:"dialog",onClick:r.onFormClose,open:e},Bp("div",{class:"dialog__position"},Bp("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()}},Bp(Ph,{options:r}),Bp($h,{...n,onSubmitSuccess:c})))))}const Hh=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,s=e.useSentryUser,i=function(){const e=ye().getUser(),t=ve().getUser(),n=be().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),a=pp.createElement("div"),c=function(e){const t=pp.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: var(--form-width, 272px);\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n@media (max-width: 600px) {\n  .dialog__content {\n    width: var(--form-width, 100%);\n  }\n}\n\n\n\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n}\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: 100%;\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(e.styleNonce);let u="";const l={get el(){return a},appendToDom(){o.contains(c)||o.contains(a)||(o.appendChild(c),o.appendChild(a))},removeFromDom(){o.removeChild(a),o.removeChild(c),pp.body.style.overflow=u},open(){p(!0),e.onFormOpen&&e.onFormOpen(),u=pp.body.style.overflow,pp.body.style.overflow="hidden"},close(){p(!1),pp.body.style.overflow=u}},d=t&&t.createInput({h:Bp,hooks:Lh,dialog:l,options:e}),p=t=>{!function(e,t,n){var r,o,s,i;Tp.__&&Tp.__(e,t),o=(r="function"==typeof n)?null:t.__k,s=[],i=[],th(t,e=(!r&&n||t).__k=Bp(jp,null,[e]),o||Dp,Dp,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?Cp.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r,i),e.__d=void 0,nh(s,e,i)}(Bp(jh,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:s&&i&&i[s.name]||"",defaultEmail:s&&i&&i[s.email]||"",onFormClose:()=>{p(!1),e.onFormClose&&e.onFormClose()},onSubmit:n,onSubmitSuccess:t=>{p(!1),e.onSubmitSuccess&&e.onSubmitSuccess(t)},onSubmitError:t=>{e.onSubmitError&&e.onSubmitError(t)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted()},open:t}),a)};return l}});function zh(e){const t=pp.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container canvas {\n  object-fit: contain;\n  position: relative;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n`,e&&t.setAttribute("nonce",e),t}const Wh=33,qh=dp.devicePixelRatio,Yh=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),Vh=e=>{const t=e.clientHeight,n=e.clientWidth,r=e.width/e.height;let o=t*r,s=t;o>n&&(o=n,s=n/r);const i=(n-o)/2,a=(t-s)/2;return{startX:i,startY:a,endX:o+i,endY:s+a}};function Gh({h:e,hooks:t,imageBuffer:n,dialog:r,options:o}){const s=function({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:o}){e.useEffect((()=>{(async()=>{t();const e=await hp.mediaDevices.getDisplayMedia({video:{width:dp.innerWidth*dp.devicePixelRatio,height:dp.innerHeight*dp.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),o=pp.createElement("video");await new Promise(((t,r)=>{o.srcObject=e,o.onloadedmetadata=()=>{n(o),e.getTracks().forEach((e=>e.stop())),t()},o.play().catch(r)})),r()})().catch(o)}),[])}}({hooks:t});return function({onError:i}){const a=t.useMemo((()=>({__html:zh(o.styleNonce).innerText})),[]),c=function({h:e}){return function({top:t,left:n,corner:r,onGrabButton:o}){return e("button",{class:`editor__crop-corner editor__crop-corner--${r} `,style:{top:t,left:n},onMouseDown:e=>{e.preventDefault(),o(e,r)},onClick:e=>{e.preventDefault()}})}}({h:e}),u=t.useRef(null),l=t.useRef(null),d=t.useRef(null),[p,h]=t.useState({startX:0,startY:0,endX:0,endY:0}),[f,m]=t.useState(!1),[g,_]=t.useState(!1);function y(){const e=d.current,t=Yh(Vh(n));if(e){e.width=t.width*qh,e.height=t.height*qh,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`;const n=e.getContext("2d");n&&n.scale(qh,qh)}const r=l.current;r&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`),h({startX:0,startY:0,endX:t.width,endY:t.height})}function v(e,t){m(!1),_(!0);const n=b(t),r=()=>{pp.removeEventListener("mousemove",n),pp.removeEventListener("mouseup",r),m(!0),_(!1)};pp.addEventListener("mouseup",r),pp.addEventListener("mousemove",n)}t.useEffect((()=>{dp.addEventListener("resize",y,!1)}),[]),t.useEffect((()=>{const e=d.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const r=Yh(Vh(n)),o=Yh(p);t.clearRect(0,0,r.width,r.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,r.width,r.height),t.clearRect(o.x,o.y,o.width,o.height),t.strokeStyle="#ffffff",t.lineWidth=3,t.strokeRect(o.x+1,o.y+1,o.width-2,o.height-2),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(o.x+3,o.y+3,o.width-6,o.height-6)}),[p]);const b=t.useCallback((e=>function(t){if(!d.current)return;const n=d.current,r=n.getBoundingClientRect(),o=t.clientX-r.x,s=t.clientY-r.y;switch(e){case"top-left":h((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-Wh),startY:Math.min(Math.max(0,s),e.endY-Wh)})));break;case"top-right":h((e=>({...e,endX:Math.max(Math.min(o,n.width/qh),e.startX+Wh),startY:Math.min(Math.max(0,s),e.endY-Wh)})));break;case"bottom-left":h((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-Wh),endY:Math.max(Math.min(s,n.height/qh),e.startY+Wh)})));break;case"bottom-right":h((e=>({...e,endX:Math.max(Math.min(o,n.width/qh),e.startX+Wh),endY:Math.max(Math.min(s,n.height/qh),e.startY+Wh)})))}}),[]),S=t.useRef({initialX:0,initialY:0});return s({onBeforeScreenshot:t.useCallback((()=>{r.el.style.display="none"}),[]),onScreenshot:t.useCallback((e=>{const t=n.getContext("2d");if(!t)throw new Error("Could not get canvas context");n.width=e.videoWidth,n.height=e.videoHeight,n.style.width="100%",n.style.height="100%",t.drawImage(e,0,0)}),[n]),onAfterScreenshot:t.useCallback((()=>{r.el.style.display="block";const e=u.current;e&&e.appendChild(n),y()}),[]),onError:t.useCallback((e=>{r.el.style.display="block",i(e)}),[])}),e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:a}),e("div",{class:"editor__canvas-container",ref:u},e("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:l},e("canvas",{onMouseDown:function(e){if(g)return;S.current={initialX:e.clientX,initialY:e.clientY};const t=e=>{const t=d.current;if(!t)return;const n=e.clientX-S.current.initialX,r=e.clientY-S.current.initialY;h((o=>{const s=Math.max(0,Math.min(o.startX+n,t.width/qh-(o.endX-o.startX))),i=Math.max(0,Math.min(o.startY+r,t.height/qh-(o.endY-o.startY))),a=s+(o.endX-o.startX),c=i+(o.endY-o.startY);return S.current.initialX=e.clientX,S.current.initialY=e.clientY,{startX:s,startY:i,endX:a,endY:c}}))},n=()=>{pp.removeEventListener("mousemove",t),pp.removeEventListener("mouseup",n)};pp.addEventListener("mousemove",t),pp.addEventListener("mouseup",n)},style:{position:"absolute",cursor:f?"move":"auto"},ref:d}),e(c,{left:p.startX-3,top:p.startY-3,onGrabButton:v,corner:"top-left"}),e(c,{left:p.endX-30+3,top:p.startY-3,onGrabButton:v,corner:"top-right"}),e(c,{left:p.startX-3,top:p.endY-30+3,onGrabButton:v,corner:"bottom-left"}),e(c,{left:p.endX-30+3,top:p.endY-30+3,onGrabButton:v,corner:"bottom-right"}),e("div",{style:{left:Math.max(0,p.endX-191),top:Math.max(0,p.endY+8),display:f?"flex":"none"},class:"editor__crop-btn-group"},e("button",{onClick:e=>{e.preventDefault(),d.current&&h({startX:0,startY:0,endX:d.current.width/qh,endY:d.current.height/qh}),m(!1)},class:"btn btn--default"},o.cancelButtonLabel),e("button",{onClick:e=>{e.preventDefault(),function(){const e=pp.createElement("canvas"),t=Yh(Vh(n)),r=Yh(p);e.width=r.width*qh,e.height=r.height*qh;const o=e.getContext("2d");o&&n&&o.drawImage(n,r.x/t.width*n.width,r.y/t.height*n.height,r.width/t.width*n.width,r.height/t.height*n.height,0,0,e.width,e.height);const s=n.getContext("2d");s&&(s.clearRect(0,0,n.width,n.height),n.width=e.width,n.height=e.height,n.style.width=`${r.width}px`,n.style.height=`${r.height}px`,s.drawImage(e,0,0),y())}(),m(!1)},class:"btn btn--primary"},o.confirmButtonLabel)))))}}const Xh=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=pp.createElement("canvas");return{input:Gh({h:e,hooks:t,imageBuffer:o,dialog:n,options:r}),value:async()=>{const e=await new Promise((e=>{o.toBlob(e,"image/png")}));if(e){return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}}),Jh=Ep({lazyLoadIntegration:fi}),Kh=Ep({lazyLoadIntegration:fi,getModalIntegration:()=>Hh,getScreenshotIntegration:()=>Xh}),Qh="c",Zh="g",ef="s",tf="d";function nf(e,t){const n=s("globalMetricsAggregators",(()=>new WeakMap)),r=n.get(e);if(r)return r;const o=new t(e);return e.on("flush",(()=>o.flush())),e.on("close",(()=>o.close())),n.set(e,o),o}function rf(e,t,n,r,o={}){const s=o.client||ke();if(!s)return;const i=Lt(),a=i?Dt(i):void 0,c=a&&Ct(a).description,{unit:u,tags:l,timestamp:d}=o,{release:p,environment:h}=s.getOptions(),f={};p&&(f.release=p),h&&(f.environment=h),c&&(f.transaction=c),Ce&&A.log(`Adding value of ${r} to ${t} metric ${n}`);nf(s,e).add(t,n,r,u,{...f,...l},d)}function of(e,t,n,r){rf(e,"d",t,af(n),r)}const sf={increment:function(e,t,n=1,r){rf(e,"c",t,af(n),r)},distribution:of,set:function(e,t,n,r){rf(e,"s",t,n,r)},gauge:function(e,t,n,r){rf(e,"g",t,af(n),r)},timing:function(e,t,n,r="second",o){if("function"==typeof n){const r=G();return ur({op:"metrics.timing",name:t,startTime:r,onlyIfParent:!0},(s=>On((()=>n()),(()=>{}),(()=>{const n=G();of(e,t,n-r,{...o,unit:"second"}),s.end(n)}))))}of(e,t,n,{...o,unit:r})},getMetricsAggregatorForClient:nf};function af(e){return"string"==typeof e?parseInt(e):e}function cf(e){return e.replace(/[^\w\-./]+/gi,"")}const uf=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function lf(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of uf)if(e===t)return n;return e}(t)),"")}function df(e,t){A.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=function(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version});r&&t&&(o.dsn=Pn(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Un(o,[s])}(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)}const pf={[Qh]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[Zh]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[tf]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[ef]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};class hf{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=G()){const i=Math.floor(s),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[cf(n)]=lf(String(e[n])));return t}(o),u=function(e){return e.replace(/[^\w]+/gi,"_")}(r),l=function(e,t,n,r){const o=Object.entries(W(r)).sort(((e,t)=>e[0].localeCompare(t[0])));return`${e}${t}${n}${o}`}(e,a,u,c);let d=this._buckets.get(l);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new pf[e](n),timestamp:i,metricType:e,name:a,unit:u,tags:c},this._buckets.set(l,d));Nt(e,a,"string"==typeof n?d.metric.weight-p:n,u,o,l)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());df(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}const ff={increment:function(e,t=1,n){sf.increment(hf,e,t,n)},distribution:function(e,t,n){sf.distribution(hf,e,t,n)},set:function(e,t,n){sf.set(hf,e,t,n)},gauge:function(e,t,n){sf.gauge(hf,e,t,n)},timing:function(e,t,n="second",r){return sf.timing(hf,e,t,n,r)}};function mf(e={}){const t=ke();if(!function(){const e=ke();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()}()||!t)return{};const n=_e(i());if(n.getTraceData)return n.getTraceData(e);const r=ye(),o=e.span||Lt(),s=o?kt(o):function(e){const{traceId:t,sampled:n,spanId:r}=e.getPropagationContext();return yt(t,r,n)}(r),a=it(o?jt(o):Ut(t,r));return gt.test(s)?{"sentry-trace":s,baggage:a}:(A.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function gf(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;const s=ct()&&t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){mt(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:ht,message:"internal_error"});e.end()}(n,e),delete r[t]))}const{method:i,url:a}=e.fetchData,c=function(e){try{return new URL(e).href}catch(e){return}}(a),u=c?Hs(c).host:void 0,l=!!Lt(),d=s&&l?lr({name:`${i} ${a}`,attributes:{url:a,type:"fetch","http.method":i,"http.url":c,"server.address":u,[Ke]:o,[Je]:"http.client"}}):new Ln;if(e.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=_f(t,n,ct()&&l?d:void 0);r&&(e.args[1]=n,n.headers=r)}return d}function _f(e,t,n){const r=mf({span:n}),o=r["sentry-trace"],s=r.baggage;if(!o)return;const i=t.headers||(function(e){return"undefined"!=typeof Request&&v(e,Request)}(e)?e.headers:void 0);if(i){if(function(e){return"undefined"!=typeof Headers&&v(e,Headers)}(i)){const e=new Headers(i);if(e.set("sentry-trace",o),s){const t=e.get("baggage");if(t){const n=yf(t);e.set("baggage",n?`${n},${s}`:s)}else e.set("baggage",s)}return e}if(Array.isArray(i)){const e=[...i.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&"baggage"===e[0]&&"string"==typeof e[1]){const[t,n,...r]=e;return[t,yf(n),...r]}return e})),["sentry-trace",o]];return s&&e.push(["baggage",s]),e}{const e="baggage"in i?i.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?yf(e):e)).filter((e=>""===e)):e&&t.push(yf(e)),s&&t.push(s),{...i,"sentry-trace":o,baggage:t.length>0?t.join(","):void 0}}}return{...r}}function yf(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(nt))).join(",")}const vf=new WeakMap,bf=new Map,Sf={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function wf(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:a}={traceFetch:Sf.traceFetch,traceXHR:Sf.traceXHR,trackFetchStreamPerformance:Sf.trackFetchStreamPerformance,...t},c="function"==typeof s?s:e=>!0,u=e=>function(e,t){const n=xo.location&&xo.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(e){return!1}const s=r.origin===o;return t?P(r.toString(),t)||s&&P(r.pathname,t):s}{const n=!!e.match(/^\/(?!\/)/);return t?P(e,t):n}}(e,a),l={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=bf.get(e.span_id);t&&(e.timestamp=t/1e3,bf.delete(e.span_id))}})),e))),o&&function(e){const t="fetch-body-resolved";Sn(t,e),wn(t,(()=>Fs($s)))}((e=>{if(e.response){const t=vf.get(e.response);t&&e.endTimestamp&&bf.set(t,e.endTimestamp)}})),Ps((e=>{const t=gf(e,c,u,l);if(e.response&&e.fetchData.__span&&vf.set(e.response,e.fetchData.__span),t){const n=xf(e.fetchData.url),r=n?Hs(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&kf(t)}))),r&&Ls((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[Ds];if(!o||o.__sentry_own_request__||!s)return;const i=ct()&&t(s.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(mt(t,s.status_code),t.end(),delete r[e]))}const a=xf(s.url),c=a?Hs(a).host:void 0,u=!!Lt(),l=i&&u?lr({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":a,url:s.url,"server.address":c,[Ke]:"auto.http.browser",[Je]:"http.client"}}):new Ln;o.__sentry_xhr_span_id__=l.spanContext().spanId,r[o.__sentry_xhr_span_id__]=l,n(s.url)&&function(e,t){const{"sentry-trace":n,baggage:r}=mf({span:t});n&&function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch(e){}}(e,n,r)}(o,ct()&&u?l:void 0);return l}(e,c,u,l);i&&t&&kf(t)}))}function kf(e){const{url:t}=Ct(e).data||{};if(!t||"string"!=typeof t)return;const n=ba("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!J)return r;return[...r,["http.request.redirect_start",Ef(e.redirectStart)],["http.request.fetch_start",Ef(e.fetchStart)],["http.request.domain_lookup_start",Ef(e.domainLookupStart)],["http.request.domain_lookup_end",Ef(e.domainLookupEnd)],["http.request.connect_start",Ef(e.connectStart)],["http.request.secure_connection_start",Ef(e.secureConnectionStart)],["http.request.connection_end",Ef(e.connectEnd)],["http.request.request_start",Ef(e.requestStart)],["http.request.response_start",Ef(e.responseStart)],["http.request.response_end",Ef(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Ef(e=0){return((J||performance.timeOrigin)+e)/1e3}function xf(e){try{return new URL(e,xo.location.origin).href}catch(e){return}}function Cf(e){return"number"==typeof e&&isFinite(e)}function Tf(e,t,n,{...r}){const o=Ct(e).start_timestamp;return o&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),pr(e,(()=>{const e=lr({startTime:t,...r});return e&&e.end(n),e}))}function If(e){const t=ke();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:s}=e,{release:i,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),u=c&&c.getReplayId(),l=ye(),d=l.getUser(),p=void 0!==d?d.email||d.id||d.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch(e){}return lr({name:n,attributes:{release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:u||void 0,transaction:r,"user_agent.original":es.navigator&&es.navigator.userAgent,...o},startTime:s,experimental:{standalone:!0}})}function Mf(){return es&&es.addEventListener&&es.performance}function Rf(e){return e/1e3}function Af(){let e,t,n=0;if(!function(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch(e){return!1}}())return;let r=!1;function o(){r||(r=!0,t&&function(e,t,n){Zo&&A.log(`Sending CLS span (${e})`);const r=Rf((J||0)+(t&&t.startTime||0)),o=ye().getScopeData().transactionName,s=t?k(t.sources[0]&&t.sources[0].node):"Layout shift",i=W({[Ke]:"auto.http.browser.cls",[Je]:"ui.webvital.cls",[tt]:t&&t.duration||0,"sentry.pageload.span_id":n}),a=If({name:s,transaction:o,attributes:i,startTime:r});a&&(a.addEvent("cls",{[Ze]:"",[et]:e}),a.end(r))}(n,e,t),s())}const s=ga((({metric:t})=>{const r=t.entries[t.entries.length-1];r&&(n=t.value,e=r)}),!0);Fi((()=>{o()})),setTimeout((()=>{const e=ke();if(!e)return;const n=e.on("startNavigationSpan",(()=>{o(),n&&n()})),r=Lt(),s=r&&Dt(r),i=s&&Ct(s);i&&"pageload"===i.op&&(t=s.spanContext().spanId)}),0)}let Of,Df,Lf=0,Nf={};function Pf({recordClsStandaloneSpans:e}){const t=Mf();if(t&&J){t.mark&&es.performance.mark("sentry-tracing-init");const n=ya((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Rf(J),r=Rf(t.startTime);Nf.fid={value:e.value,unit:"millisecond"},Nf["mark.fid"]={value:n+r,unit:"second"}})),r=_a((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Nf.lcp={value:e.value,unit:"millisecond"},Of=t)}),!0),o=Ta("ttfb",(({metric:e})=>{e.entries[e.entries.length-1]&&(Nf.ttfb={value:e.value,unit:"millisecond"})}),xa,fa),s=e?Af():ga((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Nf.cls={value:e.value,unit:""},Df=t)}),!0);return()=>{n(),r(),o(),s&&s()}}return()=>{}}function Ff(e,t){const n=Mf();if(!n||!es.performance.getEntries||!J)return;const r=Rf(J),o=n.getEntries(),{op:s,start_timestamp:i}=Ct(e);if(o.slice(Lf).forEach((t=>{const n=Rf(t.startTime),o=Rf(Math.max(0,t.duration));if(!("navigation"===s&&i&&r+n<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{$f(e,t,r,n)})),$f(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),$f(e,t,"fetch",n,"cache","domainLookupStart"),$f(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+Rf(t.requestStart),o=n+Rf(t.responseEnd),s=n+Rf(t.responseStart);t.responseEnd&&(Tf(e,r,o,{op:"browser.request",name:t.name,attributes:{[Ke]:"auto.ui.browser.metrics"}}),Tf(e,s,o,{op:"browser.response",name:t.name,attributes:{[Ke]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,r);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=Di(),i=Rf(s?s.requestStart:0),a=o+Math.max(n,i),c=o+n,u=c+r,l={[Ke]:"auto.resource.browser.metrics"};a!==c&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=a);Tf(e,a,u,{name:t.name,op:t.entryType,attributes:l})}(e,t,n,o,r);const s=ji(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(Nf.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(Nf.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=Hs(n),a={[Ke]:"auto.resource.browser.metrics"};Bf(a,t,"transferSize","http.response_transfer_size"),Bf(a,t,"encodedBodySize","http.response_content_length"),Bf(a,t,"decodedBodySize","http.decoded_response_content_length"),null!=t.deliveryType&&(a["http.response_delivery_type"]=t.deliveryType);"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(es.location.origin);const c=s+r,u=c+o;Tf(e,c,u,{name:n.replace(es.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}(e,t,t.name,n,o,r)}})),Lf=Math.max(o.length-1,0),function(e){const t=es.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Cf(n.rtt)&&(Nf["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Cf(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);Cf(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s){!function(e){const t=Di();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Nf);const n=Nf["mark.fid"];n&&Nf.fid&&(Tf(e,n.value,n.value+Rf(Nf.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Ke]:"auto.ui.browser.metrics"}}),delete Nf["mark.fid"]),"fcp"in Nf&&t.recordClsOnPageloadSpan||delete Nf.cls,Object.entries(Nf).forEach((([e,t])=>{Zn(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",r),e.setAttribute("performance.activationStart",Li()),function(e){Of&&(Of.element&&e.setAttribute("lcp.element",k(Of.element)),Of.id&&e.setAttribute("lcp.id",Of.id),Of.url&&e.setAttribute("lcp.url",Of.url.trim().slice(0,200)),null!=Of.loadTime&&e.setAttribute("lcp.loadTime",Of.loadTime),null!=Of.renderTime&&e.setAttribute("lcp.renderTime",Of.renderTime),e.setAttribute("lcp.size",Of.size));Df&&Df.sources&&Df.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,k(t.node))))}(e)}Of=void 0,Df=void 0,Nf={}}function $f(e,t,n,r,o,s){const i=s?t[s]:t[`${n}End`],a=t[`${n}Start`];a&&i&&Tf(e,r+Rf(a),r+Rf(i),{op:`browser.${o||n}`,name:t.name,attributes:{[Ke]:"auto.ui.browser.metrics"}})}function Bf(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}const Uf=[],jf=new Map;function Hf(){if(Mf()&&J){const e=va((({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&zf[t.name]));if(!t)return;const{interactionId:n}=t,r=zf[t.name],o=Rf(J+t.startTime),s=Rf(e.value),i=Lt(),a=i?Dt(i):void 0,c=(null!=n?jf.get(n):void 0)||a,u=c?Ct(c).description:ye().getScopeData().transactionName,l=If({name:k(t.target),transaction:u,attributes:W({[Ke]:"auto.http.browser.inp",[Je]:`ui.interaction.${r}`,[tt]:t.duration}),startTime:o});l&&(l.addEvent("inp",{[Ze]:"millisecond",[et]:e.value}),l.end(o+s))}));return()=>{e()}}return()=>{}}const zf={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const Wf={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function qf(e,t={}){const n=new Map;let r,o=!1,s="externalFinish",i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Wf.idleTimeout,finalTimeout:u=Wf.finalTimeout,childSpanTimeout:l=Wf.childSpanTimeout,beforeSpanEnd:d}=t,p=ke();if(!p||!ct())return new Ln;const h=ye(),f=Lt(),m=function(e){const t=lr(e);return ce(ye(),t),Ce&&A.log("[Tracing] Started span is an idle span"),t}(e);function g(){r&&(clearTimeout(r),r=void 0)}function _(e){g(),r=setTimeout((()=>{!o&&0===n.size&&i&&(s="idleTimeout",m.end(e))}),c)}function y(e){r=setTimeout((()=>{!o&&i&&(s="heartbeatFailed",m.end(e))}),l)}function v(e){o=!0,n.clear(),a.forEach((e=>e())),ce(h,f);const t=Ct(m),{start_timestamp:r}=t;if(!r)return;(t.data||{})[Qe]||m.setAttribute(Qe,s),A.log(`[Tracing] Idle span "${t.op}" finished`);const i=Ot(m).filter((e=>e!==m));let l=0;i.forEach((t=>{t.isRecording()&&(t.setStatus({code:ht,message:"cancelled"}),t.end(e),Ce&&A.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=Ct(t),{timestamp:r=0,start_timestamp:o=0}=n,s=o<=e,i=r-o<=(u+c)/1e3;if(Ce){const e=JSON.stringify(t,void 0,2);s?i||A.log("[Tracing] Discarding span since it finished after idle span final timeout",e):A.log("[Tracing] Discarding span since it happened after idle span was finished",e)}i&&s||(!function(e,t){e[Mt]&&e[Mt].delete(t)}(m,t),l++)})),l>0&&m.setAttribute("sentry.idle_span_discarded_spans",l)}return m.end=new Proxy(m.end,{apply(e,t,n){d&&d(m);const[r,...o]=n,s=Et(r||G()),i=Ot(m).filter((e=>e!==m));if(!i.length)return v(s),Reflect.apply(e,t,[s,...o]);const a=i.map((e=>Ct(e).timestamp)).filter((e=>!!e)),c=a.length?Math.max(...a):void 0,l=Ct(m).start_timestamp,p=Math.min(l?l+u/1e3:1/0,Math.max(l||-1/0,Math.min(s,c||1/0)));return v(p),Reflect.apply(e,t,[p,...o])}}),a.push(p.on("spanStart",(e=>{if(o||e===m||Ct(e).timestamp)return;var t;Ot(m).includes(e)&&(t=e.spanContext().spanId,g(),n.set(t,!0),y(G()+l/1e3))}))),a.push(p.on("spanEnd",(e=>{var t;o||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&_(G()+c/1e3))}))),a.push(p.on("idleSpanEnableAutoFinish",(e=>{e===m&&(i=!0,_(),n.size&&y())}))),t.disableAutoFinish||_(),setTimeout((()=>{o||(m.setStatus({code:ht,message:"deadline_exceeded"}),s="finalTimeout",m.end())}),u),m}const Yf={...Wf,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Sf},Vf=(e={})=>{zr();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:s,enableStandaloneClsSpans:i},beforeStartSpan:a,idleTimeout:c,finalTimeout:u,childSpanTimeout:l,markBackgroundSpan:d,traceFetch:p,traceXHR:h,trackFetchStreamPerformance:f,shouldCreateSpanForRequest:m,enableHTTPTimings:g,instrumentPageLoad:_,instrumentNavigation:y}={...Yf,...e},v=Pf({recordClsStandaloneSpans:i||!1});t&&Hf(),r&&o.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{const t=Lt();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=Rf(J+n.startTime),{start_timestamp:r,op:o}=Ct(t);if("navigation"===o&&r&&e<r)continue;const s=Rf(n.duration),i={[Ke]:"auto.ui.browser.metrics"},a=n.scripts[0],{invoker:c,invokerType:u,sourceURL:l,sourceFunctionName:d,sourceCharPosition:p}=a;i["browser.script.invoker"]=c,i["browser.script.invoker_type"]=u,l&&(i["code.filepath"]=l),d&&(i["code.function"]=d),-1!==p&&(i["browser.script.source_char_position"]=p),Tf(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:i})}})).observe({type:"long-animation-frame",buffered:!0}):n&&ba("longtask",(({entries:e})=>{const t=Lt();if(!t)return;const{op:n,start_timestamp:r}=Ct(t);for(const o of e){const e=Rf(J+o.startTime),s=Rf(o.duration);"navigation"===n&&r&&e<r||Tf(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ke]:"auto.ui.browser.metrics"}})}})),s&&ba("event",(({entries:e})=>{const t=Lt();if(t)for(const n of e)if("click"===n.name){const e=Rf(J+n.startTime),r=Rf(n.duration),o={name:k(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Ke]:"auto.ui.browser.metrics"}},s=C(n.target);s&&(o.attributes["ui.component_name"]=s),Tf(t,e,e+r,o)}}));const b={name:void 0,source:void 0};function S(e,t){const n="pageload"===t.op,r=a?a(t):t,o=r.attributes||{};t.name!==r.name&&(o[Ge]="custom",r.attributes=o),b.name=r.name,b.source=o[Ge];const s=qf(r,{idleTimeout:c,finalTimeout:u,childSpanTimeout:l,disableAutoFinish:n,beforeSpanEnd:e=>{v(),Ff(e,{recordClsOnPageloadSpan:!i})}});function d(){["interactive","complete"].includes(xo.document.readyState)&&e.emit("idleSpanEnableAutoFinish",s)}return n&&xo.document&&(xo.document.addEventListener("readystatechange",(()=>{d()})),d()),s}return{name:"BrowserTracing",afterAllSetup(e){let n,r=xo.location&&xo.location.href;function o(){n&&!Ct(n).timestamp&&(Do&&A.log(`[Tracing] Finishing current active span with op: ${Ct(n).op}`),n.end())}e.on("startNavigationSpan",(t=>{ke()===e&&(o(),n=S(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,r={})=>{if(ke()!==e)return;o();const s=_t(r.sentryTrace||Jf("sentry-trace"),r.baggage||Jf("baggage"));ye().setPropagationContext(s),n=S(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=Ct(e).op;if(e!==Dt(e)||"navigation"!==t&&"pageload"!==t)return;const n=ye(),r=n.getPropagationContext();n.setPropagationContext({...r,sampled:void 0!==r.sampled?r.sampled:Tt(e),dsc:r.dsc||jt(e)})})),xo.location&&(_&&Gf(e,{name:xo.location.pathname,startTime:J?J/1e3:void 0,attributes:{[Ge]:"url",[Ke]:"auto.pageload.browser"}}),y&&xs((({to:t,from:n})=>{void 0===n&&r&&-1!==r.indexOf(t)?r=void 0:n!==t&&(r=void 0,Xf(e,{name:xo.location.pathname,attributes:{[Ge]:"url",[Ke]:"auto.navigation.browser"}}))}))),d&&(xo&&xo.document?xo.document.addEventListener("visibilitychange",(()=>{const e=Lt();if(!e)return;const t=Dt(e);if(xo.document.hidden&&t){const e="cancelled",{op:n,status:r}=Ct(t);Do&&A.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:ht,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):Do&&A.warn("[Tracing] Could not set up background tab detection due to lack of global document")),s&&function(e,t,n,r){let o;const s=()=>{const s="ui.action.click",i=Lt(),a=i&&Dt(i);if(a){const e=Ct(a).op;if(["navigation","pageload"].includes(e))return void(Do&&A.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`))}o&&(o.setAttribute(Qe,"interactionInterrupted"),o.end(),o=void 0),r.name?o=qf({name:r.name,op:s,attributes:{[Ge]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):Do&&A.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`)};xo.document&&addEventListener("click",s,{once:!1,capture:!0})}(c,u,l,b),t&&function(){const e=({entries:e})=>{const t=Lt(),n=t&&Dt(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!jf.has(t)){if(Uf.length>10){const e=Uf.shift();jf.delete(e)}Uf.push(t),jf.set(t,n)}}))};ba("event",e),ba("first-input",e)}(),wf(e,{traceFetch:p,traceXHR:h,trackFetchStreamPerformance:f,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:g})}}};function Gf(e,t,n){e.emit("startPageLoadSpan",t,n),ye().setTransactionName(t.name);const r=Lt();return"pageload"===(r&&Ct(r).op)?r:void 0}function Xf(e,t){ve().setPropagationContext(se()),ye().setPropagationContext(se()),e.emit("startNavigationSpan",t),ye().setTransactionName(t.name);const n=Lt();return"navigation"===(n&&Ct(n).op)?n:void 0}function Jf(e){const t=(n=`meta[name=${e}]`,S.document&&S.document.querySelector?S.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}const Kf=100,Qf=5e3,Zf=36e5;function em(e){function t(...e){Ce&&A.info("[Offline]:",...e)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const o=n.createStore(n);let s,i=Qf;function a(e){s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const e=await o.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),u(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof s&&s.unref&&s.unref()}function c(){s||(a(i),i=Math.min(2*i,Zf))}async function u(e,s=!1){if(!s&&zn(e,["replay_event","replay_recording"]))return await o.push(e),a(Kf),{};try{const t=await r.send(e);let n=Kf;if(t)if(t.headers&&t.headers["retry-after"])n=yo(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return a(n),i=Qf,t}catch(r){if(await function(e,t,r){return!zn(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,r))}(e,r,i))return s?await o.unshift(e):await o.push(e),c(),t("Error sending. Event queued.",r),{};throw r}}return n.flushAtStartup&&c(),{send:u,flush:e=>r.flush(e)}}}function tm(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function nm(e){return tm(e.getAllKeys())}function rm(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=tm(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await qn(t);await function(e,t,n){return e((e=>nm(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),tm(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await qn(t);await function(e,t,n){return e((e=>nm(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),tm(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e((e=>nm(e).then((t=>{const n=t[0];if(null!=n)return tm(e.get(n)).then((t=>(e.delete(n),tm(e.transaction).then((()=>t)))))}))))}(n());if(e)return Yn(e)}catch(e){}}}}function om(e=ss){return function(e){return t=>e({...t,createStore:rm})}(em(e))}const sm=1e6,im=String(0),am="main";let cm="",um="",lm="",dm=xo.navigator&&xo.navigator.userAgent||"",pm="";const hm=xo.navigator&&xo.navigator.language||xo.navigator&&xo.navigator.languages&&xo.navigator.languages[0]||"";const fm=xo.navigator&&xo.navigator.userAgentData;var mm;function gm(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[im]:{name:am}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:J||0,a=i-(J||i);return e.samples.forEach(((o,i)=>{if(void 0===o.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[i]={elapsed_since_start_ns:((o.timestamp+a-s)*sm).toFixed(0),stack_id:t,thread_id:im});let c=e.stacks[o.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];t&&void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((o.timestamp+a-s)*sm).toFixed(0),stack_id:n,thread_id:im};r.stacks[n]=u,r.samples[i]=l,n++})),r}(e):e}function _m(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Do&&A.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=gm(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:1e3*G()),a="number"==typeof r.timestamp?1e3*r.timestamp:1e3*G();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||xe,runtime:{name:"javascript",version:xo.navigator.userAgent},os:{name:cm,version:um,build_number:dm},device:{locale:hm,model:pm,manufacturer:dm,architecture:lm,is_emulator:!1},debug_meta:{images:vm(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||K(),trace_id:o,active_thread_id:im,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function ym(e){return"pageload"===Ct(e).op}function vm(e){const t=ke(),n=t&&t.getOptions(),r=n&&n.stackParser;return r?function(e,t){const n=Ne(e);if(!n)return[];const r=[];for(const e of t)e&&n[e]&&r.push({type:"sourcemap",code_file:e,debug_id:n[e]});return r}(r,e):[]}"object"==typeof(mm=fm)&&null!==mm&&"getHighEntropyValues"in mm&&fm.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(cm=e.platform||"",lm=e.architecture||"",pm=e.model||"",um=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];dm=`${t.brand} ${t.version}`}})).catch((e=>{}));let bm=!1;function Sm(e){if(bm)return Do&&A.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Do&&A.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=ke(),n=t&&t.getOptions();if(!n)return Do&&A.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Do&&A.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Do&&A.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Do&&A.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Do&&A.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Do&&A.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function wm(e,t,n,r){return function(e){return e.samples.length<2?(Do&&A.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Do&&A.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?_m(e,t,n,r):null}const km=new Map;function Em(e){const t=km.get(e);return t&&km.delete(e),t}function xm(e){let t;ym(e)&&(t=1e3*G());const n=function(){const e=xo.Profiler;if("function"!=typeof e)return void(Do&&A.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Do&&(A.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),A.log("[Profiling] Disabling profiling for current user session.")),bm=!0}}();if(!n)return;Do&&A.log(`[Profiling] started profiling span: ${Ct(e).description}`);const r=K();async function o(){if(e&&n)return n.stop().then((t=>{s&&(xo.clearTimeout(s),s=void 0),Do&&A.log(`[Profiling] stopped profiling of span: ${Ct(e).description}`),t?function(e,t){if(km.set(e,t),km.size>30){const e=km.keys().next().value;km.delete(e)}}(r,t):Do&&A.log(`[Profiling] profiler returned null profile for: ${Ct(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{Do&&A.log("[Profiling] error while stopping profiler:",e)}))}ye().setContext("profile",{profile_id:r,start_timestamp:t});let s=xo.setTimeout((()=>{Do&&A.log("[Profiling] max profile duration elapsed, stopping profiling for:",Ct(e).description),o()}),3e4);const i=e.end.bind(e);e.end=function(){return e?(o().then((()=>{i()}),(()=>{i()})),e):i()}}const Cm=()=>({name:"BrowserProfiling",setup(e){const t=Lt(),n=t&&Dt(t);n&&ym(n)&&Sm(n)&&xm(n),e.on("spanStart",(e=>{e===Dt(e)&&Sm(e)&&xm(e)})),e.on("beforeEnvelope",(e=>{if(!km.size)return;const t=function(e){const t=[];return Hn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Do&&A.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){Do&&A.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const s=Em(r);if(!s){Do&&A.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const i=wm(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))}});const Tm=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{Do&&A.log("Using Sidecar URL",t)},processEvent:e=>function(e){return Boolean("transaction"===e.type&&e.spans&&e.contexts&&e.contexts.trace&&"ui.action.click"===e.contexts.trace.op&&e.spans.some((({description:e})=>e&&e.includes("#sentry-spotlight"))))}(e)?null:e,afterAllSetup:e=>{!function(e,t){const n=ns("fetch");let r=0;e.on("beforeEnvelope",(e=>{r>3?A.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:qn(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then((e=>{e.status>=200&&e.status<400&&(r=0)}),(e=>{r++,A.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)}))}))}(e,t)}}}}}]);