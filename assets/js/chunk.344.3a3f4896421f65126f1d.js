"use strict";(self.webpackChunksocial_selectors=self.webpackChunksocial_selectors||[]).push([[344],{344:function(e,t,n){n.r(t),n.d(t,{BrowserClient:function(){return Ko},OpenFeatureIntegrationHook:function(){return Vm},SDK_VERSION:function(){return o},SEMANTIC_ATTRIBUTE_SENTRY_OP:function(){return Ke},SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:function(){return Ze},SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:function(){return Je},SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:function(){return Xe},Scope:function(){return he},WINDOW:function(){return Io},addBreadcrumb:function(){return to},addEventProcessor:function(){return pn},addIntegration:function(){return Sn},addTracingExtensions:function(){return wo},breadcrumbsIntegration:function(){return Vs},browserApiErrorsIntegration:function(){return Xs},browserProfilingIntegration:function(){return $m},browserSessionIntegration:function(){return ei},browserTracingIntegration:function(){return sm},buildLaunchDarklyFlagUsedHandler:function(){return Wm},captureConsoleIntegration:function(){return Co},captureEvent:function(){return en},captureException:function(){return Zt},captureFeedback:function(){return To},captureMessage:function(){return Qt},captureSession:function(){return gn},captureUserFeedback:function(){return mi},chromeStackLineParser:function(){return hs},close:function(){return ln},contextLinesIntegration:function(){return Oi},continueTrace:function(){return sr},createTransport:function(){return bo},createUserFeedbackEnvelope:function(){return Jo},debugIntegration:function(){return po},dedupeIntegration:function(){return ao},defaultRequestInstrumentationOptions:function(){return Df},defaultStackLineParsers:function(){return ks},defaultStackParser:function(){return Es},endSession:function(){return fn},eventFromException:function(){return Wo},eventFromMessage:function(){return Yo},exceptionFromError:function(){return Fo},extraErrorDataIntegration:function(){return io},featureFlagsIntegration:function(){return zm},feedbackAsyncIntegration:function(){return uf},feedbackIntegration:function(){return lf},feedbackSyncIntegration:function(){return lf},flush:function(){return un},forceLoad:function(){return hi},functionToStringIntegration:function(){return so},geckoStackLineParser:function(){return gs},getActiveSpan:function(){return Pt},getClient:function(){return xe},getCurrentHub:function(){return no},getCurrentScope:function(){return be},getDefaultIntegrations:function(){return li},getFeedback:function(){return Fp},getGlobalScope:function(){return we},getIsolationScope:function(){return Se},getReplay:function(){return Vd},getRootSpan:function(){return Nt},getSpanDescendants:function(){return Lt},getSpanStatusFromHttpCode:function(){return gt},globalHandlersIntegration:function(){return ti},httpClientIntegration:function(){return Ei},httpContextIntegration:function(){return oi},inboundFiltersIntegration:function(){return Zr},init:function(){return di},instrumentOutgoingRequests:function(){return Lf},isInitialized:function(){return dn},lastEventId:function(){return cn},launchDarklyIntegration:function(){return qm},lazyLoadIntegration:function(){return yi},linkedErrorsIntegration:function(){return ui},makeBrowserOfflineTransport:function(){return gm},makeFetchTransport:function(){return cs},makeMultiplexedTransport:function(){return Jr},metrics:function(){return Cf},moduleMetadataIntegration:function(){return Wr},onLoad:function(){return fi},openFeatureIntegration:function(){return Ym},opera10StackLineParser:function(){return bs},opera11StackLineParser:function(){return ws},parameterize:function(){return qr},registerSpanErrorInstrumentation:function(){return Hr},replayCanvasIntegration:function(){return wp},replayIntegration:function(){return qd},reportingObserverIntegration:function(){return Si},rewriteFramesIntegration:function(){return Mr},sendFeedback:function(){return Tp},sessionTimingIntegration:function(){return kr},setContext:function(){return tn},setCurrentClient:function(){return wr},setExtra:function(){return rn},setExtras:function(){return nn},setHttpStatus:function(){return _t},setMeasurement:function(){return Vn},setTag:function(){return sn},setTags:function(){return on},setUser:function(){return an},showReportDialog:function(){return pi},spanToBaggageHeader:function(){return Wt},spanToJSON:function(){return It},spanToTraceHeader:function(){return xt},spotlightBrowserIntegration:function(){return Um},startBrowserTracingNavigationSpan:function(){return am},startBrowserTracingPageLoadSpan:function(){return im},startInactiveSpan:function(){return or},startNewTrace:function(){return cr},startSession:function(){return hn},startSpan:function(){return nr},startSpanManual:function(){return rr},suppressTracing:function(){return ar},thirdPartyErrorFilterIntegration:function(){return br},unleashIntegration:function(){return Gm},updateSpanName:function(){return Ut},winjsStackLineParser:function(){return ys},withActiveSpan:function(){return ir},withIsolationScope:function(){return Ee},withScope:function(){return ke},zodErrorsIntegration:function(){return xn}});const r="production",o="8.52.0",s=globalThis;function i(e,t,n){const r=n||s,i=r.__SENTRY__=r.__SENTRY__||{},a=i[o]=i[o]||{};return a[e]||(a[e]=t())}function a(){return c(s),s}function c(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||o,t[o]=t[o]||{}}const u=Object.prototype.toString;function l(e){switch(u.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return b(e,Error)}}function d(e,t){return u.call(e)===`[object ${t}]`}function p(e){return d(e,"ErrorEvent")}function h(e){return d(e,"DOMError")}function f(e){return d(e,"String")}function m(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function g(e){return null===e||m(e)||"object"!=typeof e&&"function"!=typeof e}function _(e){return d(e,"Object")}function y(e){return"undefined"!=typeof Event&&b(e,Event)}function v(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function b(e,t){try{return e instanceof t}catch(e){return!1}}function S(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const w=s,k=80;function E(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||k;for(;n&&s++<r&&(u=x(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function x(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(w.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o&&o.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&f(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function C(){try{return w.document.location.href}catch(e){return""}}function T(e){if(!w.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}const I="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,M=["debug","info","warn","error","log","assert","trace"],R={};function A(e){if(!("console"in s))return e();const t=s.console,n={},r=Object.keys(R);r.forEach((e=>{const r=R[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const O=i("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return I?M.forEach((n=>{t[n]=(...t)=>{e&&A((()=>{s.console[n](`Sentry Logger [${n}]:`,...t)}))}})):M.forEach((e=>{t[e]=()=>{}})),t}));function D(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function L(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function N(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{S(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function P(e,t,n=!1){return!!f(e)&&(d(t,"RegExp")?t.test(e):!!f(t)&&(n?e===t:e.includes(t)))}function F(e,t=[],n=!1){return t.some((t=>P(e,t,n)))}function $(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&B(o,r);try{e[t]=o}catch(n){I&&O.log(`Failed to replace method "${t}" in object`,e)}}function U(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){I&&O.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function B(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,U(e,"__sentry_original__",t)}catch(e){}}function j(e){return e.__sentry_original__}function H(e){if(l(e))return{message:e.message,name:e.name,stack:e.stack,...q(e)};if(y(e)){const t={type:e.type,target:z(e.target),currentTarget:z(e.currentTarget),...q(e)};return"undefined"!=typeof CustomEvent&&b(e,CustomEvent)&&(t.detail=e.detail),t}return e}function z(e){try{return t=e,"undefined"!=typeof Element&&b(t,Element)?E(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function q(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function W(e){return Y(e,new Map)}function Y(e,t){if(function(e){if(!_(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.getOwnPropertyNames(e))void 0!==e[n]&&(r[n]=Y(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Y(e,t))})),r}return e}const V=1e3;function G(){return Date.now()/V}const X=function(){const{performance:e}=s;if(!e||!e.now)return G;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/V}();let J;const K=(()=>{const{performance:e}=s;if(!e||!e.now)return void(J="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;return i||c<t?o<=c?(J="timeOrigin",e.timeOrigin):(J="navigationStart",a):(J="dateNow",r)})();function Z(){const e=s,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function Q(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ee(e){const{message:t,event_id:n}=e;if(t)return t;const r=Q(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function te(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function ne(e,t){const n=Q(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function re(e){if(function(e){try{return e.__sentry_captured__}catch(e){}}(e))return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}function oe(e){const t=X(),n={sid:Z(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return W({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&se(n,e),n}function se(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||X(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Z()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ie(){return Z()}function ae(){return Z().substring(16)}function ce(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=ce(r[e],t[e],n-1));return r}const ue="_sentrySpan";function le(e,t){t?U(e,ue,t):delete e[ue]}function de(e){return e[ue]}class pe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ie(),spanId:ae()}}clone(){const e=new pe;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,le(e,de(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&se(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,r]=t instanceof he?[t.getScopeData(),t.getRequestSession()]:_(t)?[e,e.requestSession]:[],{tags:o,extra:s,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:l}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,le(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ie()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:G(),...e};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:de(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ce(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:ae(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Z();if(!this._client)return O.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:Z();if(!this._client)return O.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Z();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(O.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const he=pe;class fe{constructor(e,t){let n,r;n=e||new he,r=t||new he,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return v(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function me(){const e=c(a());return e.stack=e.stack||new fe(i("defaultCurrentScope",(()=>new he)),i("defaultIsolationScope",(()=>new he)))}function ge(e){return me().withScope(e)}function _e(e,t){const n=me();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function ye(e){return me().withScope((()=>e(me().getIsolationScope())))}function ve(e){const t=c(e);return t.acs?t.acs:{withIsolationScope:ye,withScope:ge,withSetScope:_e,withSetIsolationScope:(e,t)=>ye(t),getCurrentScope:()=>me().getScope(),getIsolationScope:()=>me().getIsolationScope()}}function be(){return ve(a()).getCurrentScope()}function Se(){return ve(a()).getIsolationScope()}function we(){return i("globalScope",(()=>new he))}function ke(...e){const t=ve(a());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function Ee(...e){const t=ve(a());if(2===e.length){const[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])}function xe(){return be().getClient()}function Ce(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:o}=t;return W({trace_id:n,span_id:r,parent_span_id:o})}const Te="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var Ie;function Me(e){return new Ae((t=>{t(e)}))}function Re(e){return new Ae(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Ie||(Ie={}));class Ae{constructor(e){Ae.prototype.__init.call(this),Ae.prototype.__init2.call(this),Ae.prototype.__init3.call(this),Ae.prototype.__init4.call(this),this._state=Ie.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Ae(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Ae(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Ie.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ie.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ie.PENDING&&(v(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ie.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ie.RESOLVED&&e[1](this._value),this._state===Ie.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Oe(e,t,n,r=0){return new Ae(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);Te&&i.id&&null===a&&O.log(`Event processor "${i.id}" dropped event`),v(a)?a.then((t=>Oe(e,t,n,r+1).then(o))).then(null,s):Oe(e,a,n,r+1).then(o).then(null,s)}}))}let De,Le,Ne;function Pe(e){const t=s._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Ne&&n.length===Le||(Le=n.length,Ne=n.reduce(((n,r)=>{De||(De={});const o=De[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const s=o[e],i=s&&s.filename,a=t[r];if(i&&a){n[i]=a,De[r]=[i,a];break}}}return n}),{})),Ne}const Fe=50,$e="?",Ue=/\(error: (.*)\)/,Be=/captureMessage|captureException/;function je(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const o=[],s=e.split("\n");for(let e=n;e<s.length;e++){const n=s[e];if(n.length>1024)continue;const i=Ue.test(n)?n.replace(Ue,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){o.push(t);break}}if(o.length>=Fe+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(He(t).function||"")&&t.pop();t.reverse(),Be.test(He(t).function||"")&&(t.pop(),Be.test(He(t).function||"")&&t.pop());return t.slice(0,Fe).map((e=>({...e,filename:e.filename||He(t).filename,function:e.function||$e})))}(o.slice(r))}}function He(e){return e[e.length-1]||{}}const ze="<anonymous>";function qe(e){try{return e&&"function"==typeof e&&e.name||ze}catch(e){return ze}}function We(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}function Ye(e,t=100,n=1/0){try{return Ge("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ve(e,t=3,n=102400){const r=Ye(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?Ve(e,t-1,n):r;var o}function Ge(e,t,n=1/0,r=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,i]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(S(t))return"[VueViewModel]";if(_(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${qe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Ge("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=H(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=Ge(e,t,c-1,r,o),d++}return i(t),l}const Xe="sentry.source",Je="sentry.sample_rate",Ke="sentry.op",Ze="sentry.origin",Qe="sentry.idle_span_finish_reason",et="sentry.measurement_unit",tt="sentry.measurement_value",nt="sentry.custom_span_name",rt="sentry.exclusive_time",ot="sentry-",st=/^sentry-/,it=8192;function at(e){const t=function(e){if(!e||!f(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=ut(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return ut(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(st)){e[t.slice(ot.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function ct(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>it?(I&&O.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${ot}${t}`]=n),e)),{}))}function ut(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}function lt(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=xe(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}const dt="_sentryMetrics";function pt(e){const t=e[dt];if(!t)return;const n={};for(const[,[e,r]]of t){(n[e]||(n[e]=[])).push(W(r))}return n}const ht=0,ft=1,mt=2;function gt(e){if(e<400&&e>=100)return{code:ft};if(e>=400&&e<500)switch(e){case 401:return{code:mt,message:"unauthenticated"};case 403:return{code:mt,message:"permission_denied"};case 404:return{code:mt,message:"not_found"};case 409:return{code:mt,message:"already_exists"};case 413:return{code:mt,message:"failed_precondition"};case 429:return{code:mt,message:"resource_exhausted"};case 499:return{code:mt,message:"cancelled"};default:return{code:mt,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:mt,message:"unimplemented"};case 503:return{code:mt,message:"unavailable"};case 504:return{code:mt,message:"deadline_exceeded"};default:return{code:mt,message:"internal_error"}}return{code:mt,message:"unknown_error"}}function _t(e,t){e.setAttribute("http.response.status_code",t);const n=gt(t);"unknown_error"!==n.message&&e.setStatus(n)}const yt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function vt(e,t){const n=function(e){if(!e)return;const t=e.match(yt);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=at(t);if(!n||!n.traceId)return{traceId:ie(),spanId:ae()};const{traceId:o,parentSpanId:s,parentSampled:i}=n;return{traceId:o,parentSpanId:s,spanId:ae(),sampled:i,dsc:r||{}}}function bt(e=ie(),t=ae(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const St=1;let wt=!1;function kt(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a}=It(e);return W({parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a})}function Et(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext();return W({parent_span_id:r?t:It(e).parent_span_id,span_id:r?ae():t,trace_id:n})}function xt(e){const{traceId:t,spanId:n}=e.spanContext();return bt(t,n,Mt(e))}function Ct(e){return"number"==typeof e?Tt(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Tt(e.getTime()):X()}function Tt(e){return e>9999999999?e/1e3:e}function It(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:s,endTime:i,parentSpanId:a,status:c}=e;return W({span_id:t,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:Ct(o),timestamp:Ct(i)||void 0,status:Rt(c),op:r[Ke],origin:r[Ze],_metrics_summary:pt(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function Mt(e){const{traceFlags:t}=e.spanContext();return t===St}function Rt(e){if(e&&e.code!==ht)return e.code===ft?"ok":e.message||"unknown_error"}const At="_sentryChildSpans",Ot="_sentryRootSpan";function Dt(e,t){const n=e[Ot]||e;U(t,Ot,n),e[At]?e[At].add(t):U(e,At,new Set([t]))}function Lt(e){const t=new Set;return function e(n){if(!t.has(n)&&Mt(n)){t.add(n);const r=n[At]?Array.from(n[At]):[];for(const t of r)e(t)}}(e),Array.from(t)}function Nt(e){return e[Ot]||e}function Pt(){const e=ve(a());return e.getActiveSpan?e.getActiveSpan():de(be())}function Ft(e,t,n,r,o,s){const i=Pt();i&&function(e,t,n,r,o,s,i){const a=e[dt]||(e[dt]=new Map),c=`${t}:${n}@${o}`,u=a.get(i);if(u){const[,e]=u;a.set(i,[c,{min:Math.min(e.min,r),max:Math.max(e.max,r),count:e.count+=1,sum:e.sum+=r,tags:e.tags}])}else a.set(i,[c,{min:r,max:r,count:1,sum:r,tags:s}])}(i,e,t,n,r,o,s)}function $t(){wt||(A((()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")})),wt=!0)}function Ut(e,t){e.updateName(t),e.setAttributes({[Xe]:"custom",[nt]:t})}const Bt="_frozenDsc";function jt(e,t){U(e,Bt,t)}function Ht(e,t){const n=t.getOptions(),{publicKey:o}=t.getDsn()||{},s=W({environment:n.environment||r,release:n.release,public_key:o,trace_id:e});return t.emit("createDsc",s),s}function zt(e,t){const n=t.getPropagationContext();return n.dsc||Ht(n.traceId,e)}function qt(e){const t=xe();if(!t)return{};const n=Nt(e),r=n[Bt];if(r)return r;const o=n.spanContext().traceState,s=o&&o.get("sentry.dsc"),i=s&&at(s);if(i)return i;const a=Ht(e.spanContext().traceId,t),c=It(n),u=c.data||{},l=u[Je];null!=l&&(a.sample_rate=`${l}`);const d=u[Xe],p=c.description;return"url"!==d&&p&&(a.transaction=p),lt()&&(a.sampled=String(Mt(n))),t.emit("createDsc",a,n),a}function Wt(e){return ct(qt(e))}function Yt(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t,c=W(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=W(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=W(o);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=W(s);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});i&&(e.level=i);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Et(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:qt(t),...e.sdkProcessingMetadata};const n=Nt(t),r=It(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function Vt(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=t;Gt(e,"extra",n),Gt(e,"tags",r),Gt(e,"user",o),Gt(e,"contexts",s),e.sdkProcessingMetadata=ce(e.sdkProcessingMetadata,a,2),i&&(e.level=i),h&&(e.transactionName=h),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Gt(e,t,n){e[t]=ce(e[t],n,1)}function Xt(e,t,n,o,s,i){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=e,u={...t,event_id:t.event_id||n.event_id||Z(),timestamp:t.timestamp||G()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:o,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||r,!e.release&&o&&(e.release=o);!e.dist&&s&&(e.dist=s);e.message&&(e.message=D(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=D(a.value,i));const c=e.request;c&&c.url&&(c.url=D(c.url,i))}(u,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(u,l),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=Pe(t);try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{n&&e.filename&&(e.debug_id=n[e.filename])}))}))}catch(e){}}(u,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new he;return n.update(t),n}(o,n.captureContext);n.mechanism&&ne(u,n.mechanism);const p=s?s.getEventProcessors():[],h=we().getScopeData();if(i){Vt(h,i.getScopeData())}if(d){Vt(h,d.getScopeData())}const f=[...n.attachments||[],...h.attachments];f.length&&(n.attachments=f),Yt(u,h);return Oe([...p,...h.eventProcessors],u,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof a&&a>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Ye(e.data,t,n)}})))},...e.user&&{user:Ye(e.user,t,n)},...e.contexts&&{contexts:Ye(e.contexts,t,n)},...e.extra&&{extra:Ye(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ye(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:Ye(e.data,t,n)}}))));e.contexts&&e.contexts.flags&&r.contexts&&(r.contexts.flags=Ye(e.contexts.flags,3,n));return r}(e,a,c):e)))}function Jt(e){if(e)return function(e){return e instanceof he||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Kt.includes(e)))}(e)?{captureContext:e}:e}const Kt=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Zt(e,t){return be().captureException(e,Jt(t))}function Qt(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return be().captureMessage(e,n,r)}function en(e,t){return be().captureEvent(e,t)}function tn(e,t){Se().setContext(e,t)}function nn(e){Se().setExtras(e)}function rn(e,t){Se().setExtra(e,t)}function on(e){Se().setTags(e)}function sn(e,t){Se().setTag(e,t)}function an(e){Se().setUser(e)}function cn(){return Se().lastEventId()}async function un(e){const t=xe();return t?t.flush(e):(Te&&O.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ln(e){const t=xe();return t?t.close(e):(Te&&O.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function dn(){return!!xe()}function pn(e){Se().addEventProcessor(e)}function hn(e){const t=xe(),n=Se(),o=be(),{release:i,environment:a=r}=t&&t.getOptions()||{},{userAgent:c}=s.navigator||{},u=oe({release:i,environment:a,user:o.getUser()||n.getUser(),...c&&{userAgent:c},...e}),l=n.getSession();return l&&"ok"===l.status&&se(l,{status:"exited"}),fn(),n.setSession(u),o.setSession(u),u}function fn(){const e=Se(),t=be(),n=t.getSession()||e.getSession();n&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),se(e,n)}(n),mn(),e.setSession(),t.setSession()}function mn(){const e=Se(),t=be(),n=xe(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function gn(e=!1){e?fn():mn()}const _n=[];function yn(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r),s=o.findIndex((e=>"Debug"===e.name));if(s>-1){const[e]=o.splice(s,1);o.push(e)}return o}function vn(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function bn(e,t,n){if(n[t.name])Te&&O.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===_n.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),_n.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Te&&O.log(`Integration installed: ${t.name}`)}}function Sn(e){const t=xe();t?t.addIntegration(e):Te&&O.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function wn(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function kn(e){const t=new Set;for(const n of e.issues){const e=n.path.map((e=>"number"==typeof e?"<array>":e)).join(".");e.length>0&&t.add(e)}const n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){const n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${D(n.join(", "),100)}`}function En(e,t=!1,n,r){if(!(n.exception&&n.exception.values&&r&&r.originalException&&(o=r.originalException,l(o)&&"ZodError"===o.name&&Array.isArray(o.issues))&&0!==r.originalException.issues.length))return n;var o;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(wn);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:kn(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(e){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:"unknown"}}}}}const xn=(e={})=>{const t=void 0===e.limit?10:e.limit;return{name:"ZodErrors",processEvent(n,r){return En(t,e.saveZodIssuesAsAttachment,n,r)}}};function Cn(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(v(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Tn(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;Te&&O.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}class In{constructor(e={}){this._traceId=e.traceId||ie(),this._spanId=e.spanId||ae()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}const Mn=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Rn(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function An(e){const t=Mn.exec(e);if(!t)return void A((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s="",i="",a=""]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return On({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function On(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Dn(e){const t="string"==typeof e?An(e):On(e);if(t&&function(e){if(!I)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(O.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(O.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(O.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(O.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}function Ln(e,t=[]){return[e,t]}function Nn(e,t){const[n,r]=e;return[n,[...r,t]]}function Pn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Fn(e,t){return Pn(e,((e,n)=>t.includes(n)))}function $n(e){return s.__SENTRY__&&s.__SENTRY__.encodePolyfill?s.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function Un(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[$n(r),e]:r.push("string"==typeof e?$n(e):e)}for(const e of n){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Ye(n))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function Bn(e){let t="string"==typeof e?$n(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((r=n(e),s.__SENTRY__&&s.__SENTRY__.decodePolyfill?s.__SENTRY__.decodePolyfill(r):(new TextDecoder).decode(r)));var r}const o=r(),i=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;i.push([e,t?n(t):r()])}return[o,i]}function jn(e){return[{type:"span"},e]}function Hn(e){const t="string"==typeof e.data?$n(e.data):e.data;return[W({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const zn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function qn(e){return zn[e]}function Wn(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Yn(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Rn(r)},...o&&{trace:W({...o})}}}function Vn(e,t,n,r=Pt()){const o=r&&Nt(r);o&&(Te&&O.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[tt]:t,[et]:n}))}function Gn(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},r=n[et],o=n[tt];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})})),t}const Xn="_sentryScope",Jn="_sentryIsolationScope";function Kn(e){return{scope:e[Xn],isolationScope:e[Jn]}}class Zn{constructor(e={}){this._traceId=e.traceId||ie(),this._spanId=e.spanId||ae(),this._startTime=e.startTimestamp||X(),this._attributes={},this.setAttributes({[Ze]:"manual",[Ke]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?St:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=Ct(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Xe,"custom"),this}end(e){this._endTime||(this._endTime=Ct(e),function(e){if(!Te)return;const{description:t="< unknown name >",op:n="< unknown op >"}=It(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${Nt(e)===e?"root ":""}span "${t}" with ID ${r}`;O.log(o)}(this),this._onSpanEnded())}getSpanJSON(){return W({data:this._attributes,description:this._name,op:this._attributes[Ke],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Rt(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ze],_metrics_summary:pt(this),profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[rt],measurements:Gn(this._events),is_segment:this._isStandaloneSpan&&Nt(this)===this||void 0,segment_id:this._isStandaloneSpan?Nt(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){Te&&O.log("[Tracing] Adding an event to span:",e);const r=Qn(t)?t:n||X(),o=Qn(t)?{}:t||{},s={name:e,time:Ct(r),attributes:o};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=xe();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Nt(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=xe();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(function(e,t){const n=qt(e[0]),r=t&&t.getDsn(),o=t&&t.getOptions().tunnel,s={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!o&&r&&{dsn:Rn(r)}},i=t&&t.getOptions().beforeSendSpan,a=i?e=>{const t=i(It(e));return t||$t(),t}:e=>It(e),c=[];for(const t of e){const e=a(t);e&&c.push(jn(e))}return Ln(s,c)}([this],e)):(Te&&O.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(Kn(this).scope||be()).captureEvent(t)}}_convertSpanToTransaction(){if(!er(It(this)))return;this._name||(Te&&O.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=Kn(this),n=(e||be()).getClient()||xe();if(!0!==this._sampled)return Te&&O.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const r=Lt(this).filter((e=>e!==this&&!function(e){return e instanceof Zn&&e.isStandaloneSpan()}(e))).map((e=>It(e))).filter(er),o=this._attributes[Xe];delete this._attributes[nt],r.forEach((e=>{e.data&&delete e.data[nt]}));const s={contexts:{trace:kt(this)},spans:r.length>1e3?r.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...W({dynamicSamplingContext:qt(this)})},_metrics_summary:pt(this),...o&&{transaction_info:{source:o}}},i=Gn(this._events);return i&&Object.keys(i).length&&(Te&&O.log("[Measurements] Adding measurements to transaction event",JSON.stringify(i,void 0,2)),s.measurements=i),s}}function Qn(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function er(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}const tr="__SENTRY_SUPPRESS_TRACING__";function nr(e,t){const n=dr();if(n.startSpan)return n.startSpan(e,t);const r=lr(e),{forceTransaction:o,parentSpan:s}=e;return ke(e.scope,(()=>fr(s)((()=>{const n=be(),s=hr(n),i=e.onlyIfParent&&!s?new In:ur({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});return le(n,i),Cn((()=>t(i)),(()=>{const{status:e}=It(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:mt,message:"internal_error"})}),(()=>i.end()))}))))}function rr(e,t){const n=dr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=lr(e),{forceTransaction:o,parentSpan:s}=e;return ke(e.scope,(()=>fr(s)((()=>{const n=be(),s=hr(n),i=e.onlyIfParent&&!s?new In:ur({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});function a(){i.end()}return le(n,i),Cn((()=>t(i,a)),(()=>{const{status:e}=It(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:mt,message:"internal_error"})}))}))))}function or(e){const t=dr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=lr(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>ke(e.scope,t):void 0!==o?e=>ir(o,e):e=>e())((()=>{const t=be(),o=hr(t);return e.onlyIfParent&&!o?new In:ur({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))}const sr=(e,t)=>{const n=ve(a());if(n.continueTrace)return n.continueTrace(e,t);const{sentryTrace:r,baggage:o}=e;return ke((e=>{const n=vt(r,o);return e.setPropagationContext(n),t()}))};function ir(e,t){const n=dr();return n.withActiveSpan?n.withActiveSpan(e,t):ke((n=>(le(n,e||void 0),t(n))))}function ar(e){const t=dr();return t.suppressTracing?t.suppressTracing(e):ke((t=>(t.setSDKProcessingMetadata({[tr]:!0}),e())))}function cr(e){return ke((t=>(t.setPropagationContext({traceId:ie()}),Te&&O.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),ir(null,e))))}function ur({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!lt())return new In;const o=Se();let s;if(e&&!n)s=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[tr]&&Mt(e),i=s?new Zn({...n,parentSpanId:r,traceId:o,sampled:s}):new In({traceId:o});Dt(e,i);const a=xe();a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i));return i}(e,r,t),Dt(e,s);else if(e){const n=qt(e),{traceId:o,spanId:i}=e.spanContext(),a=Mt(e);s=pr({traceId:o,parentSpanId:i,...t},r,a),jt(s,n)}else{const{traceId:e,dsc:n,parentSpanId:i,sampled:a}={...o.getPropagationContext(),...r.getPropagationContext()};s=pr({traceId:e,parentSpanId:i,...t},r,a),n&&jt(s,n)}return function(e){if(!Te)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=It(e),{spanId:o}=e.spanContext(),s=Mt(e),i=Nt(e),a=i===e,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:e,description:t}=It(i);u.push(`root ID: ${i.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}O.log(`${c}\n  ${u.join("\n  ")}`)}(s),function(e,t,n){e&&(U(e,Jn,n),U(e,Xn,t))}(s,r,o),s}function lr(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=Ct(e.startTime),delete n.startTime,n}return t}function dr(){return ve(a())}function pr(e,t,n){const r=xe(),o=r&&r.getOptions()||{},{name:s="",attributes:i}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[tr]?[!1]:function(e,t){if(!lt(e))return[!1];const n=Se().getScopeData().sdkProcessingMetadata.normalizedRequest,r={...t,normalizedRequest:t.normalizedRequest||n};let o;o="function"==typeof e.tracesSampler?e.tracesSampler(r):void 0!==r.parentSampled?r.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const s=Tn(o);return void 0===s?(Te&&O.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):s?Math.random()<s?[!0,s]:(Te&&O.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[!1,s]):(Te&&O.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,s])}(o,{name:s,parentSampled:n,attributes:i,transactionContext:{name:s,parentSampled:n}}),u=new Zn({...e,attributes:{[Xe]:"custom",...e.attributes},sampled:a});return void 0!==c&&u.setAttribute(Je,c),r&&r.emit("spanStart",u),u}function hr(e){const t=de(e);if(!t)return;const n=xe();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Nt(t):t}function fr(e){return void 0!==e?t=>ir(e,t):e=>e()}const mr=new Map,gr=new Set;function _r(e,t){return function(e){if(s._sentryModuleMetadata)for(const t of Object.keys(s._sentryModuleMetadata)){const n=s._sentryModuleMetadata[t];if(gr.has(t))continue;gr.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){mr.set(e.filename,n);break}}}(e),mr.get(t)}function yr(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=_r(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}function vr(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}const br=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{Pn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(vr(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;yr(e.getOptions().stackParser,t)}))},processEvent(t){const n=function(e){const t=We(e);if(!t)return;return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(Sr))).map((e=>e.slice(Sr.length))):[]))}(t);if(n){const r=n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))));if(r){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}});const Sr="_sentryBundlerPluginAppKey:";function wr(e){be().setClient(e)}const kr=()=>{const e=1e3*X();return{name:"SessionTiming",processEvent(t){const n=1e3*X();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}};function Er(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const xr=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Cr(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=xr.exec(t);return n?n.slice(1):[]}function Tr(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=Er(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Ir(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}const Mr=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in s&&void 0!==s.window,o=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){const e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(o||s){const e=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,s=t?function(e,t){e=Tr(e).slice(1),t=Tr(t).slice(1);const n=Ir(e.split("/")),r=Ir(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,e):function(e,t){let n=Cr(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}(e);r.filename=`${n}${s}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>o(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};const Rr={},Ar={};function Or(e,t){Rr[e]=Rr[e]||[],Rr[e].push(t)}function Dr(e,t){if(!Ar[e]){Ar[e]=!0;try{t()}catch(t){I&&O.error(`Error while instrumenting ${e}`,t)}}}function Lr(e,t){const n=e&&Rr[e];if(n)for(const r of n)try{r(t)}catch(t){I&&O.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${qe(r)}\nError:`,t)}}let Nr=null;function Pr(e){const t="error";Or(t,e),Dr(t,Fr)}function Fr(){Nr=s.onerror,s.onerror=function(e,t,n,r,o){return Lr("error",{column:r,error:o,line:n,msg:e,url:t}),!!Nr&&Nr.apply(this,arguments)},s.onerror.__SENTRY_INSTRUMENTED__=!0}let $r=null;function Ur(e){const t="unhandledrejection";Or(t,e),Dr(t,Br)}function Br(){$r=s.onunhandledrejection,s.onunhandledrejection=function(e){return Lr("unhandledrejection",e),!$r||$r.apply(this,arguments)},s.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let jr=!1;function Hr(){jr||(jr=!0,Pr(zr),Ur(zr))}function zr(){const e=Pt(),t=e&&Nt(e);if(t){const e="internal_error";Te&&O.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:mt,message:e})}}function qr(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}zr.tag="sentry_tracingErrorCallback";const Wr=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{Pn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(vr(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;yr(e.getOptions().stackParser,t)}))}}),Yr="7";function Vr(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Gr(e,t,n){return t||`${function(e){return`${Vr(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:Yr};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}function Xr(e,t){let n;return Pn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Jr(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=An(t);if(!a)return;const c=Gr(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=Xr(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return Xr(e,n)}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e)),o=n.length?n:[["",r]];return(await Promise.all(o.map((([t,n])=>n.send(function(e,t){return Ln(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...o.values(),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}const Kr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],Zr=(e={})=>({name:"InboundFilters",processEvent(t,n,r){const o=r.getOptions(),s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Kr],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,o);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Te&&O.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${ee(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));return t}(e).some((e=>F(e,t)))}(e,t.ignoreErrors))return Te&&O.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ee(e)}`),!0;if(function(e){if(e.type)return!1;if(!e.exception||!e.exception.values||0===e.exception.values.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return Te&&O.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${ee(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&F(n,t)}(e,t.ignoreTransactions))return Te&&O.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${ee(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Qr(e);return!!n&&F(n,t)}(e,t.denyUrls))return Te&&O.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ee(e)}.\nUrl: ${Qr(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Qr(e);return!n||F(n,t)}(e,t.allowUrls))return Te&&O.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ee(e)}.\nUrl: ${Qr(e)}`),!0;return!1}(t,s)?null:t}});function Qr(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Te&&O.error(`Cannot extract url for event ${ee(e)}`),null}}const eo=100;function to(e,t){const n=xe(),r=Se();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=eo}=n.getOptions();if(s<=0)return;const i={timestamp:G(),...e},a=o?A((()=>o(i,t))):i;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,s))}const no=function(){return{bindClient(e){be().setClient(e)},withScope:ke,getClient:()=>xe(),getScope:be,getIsolationScope:Se,captureException:(e,t)=>be().captureException(e,t),captureMessage:(e,t,n)=>be().captureMessage(e,t,n),captureEvent:en,addBreadcrumb:to,setUser:an,setTags:on,setTag:sn,setExtra:rn,setExtras:nn,setContext:tn,getIntegration(e){const t=xe();return t&&t.getIntegrationByName(e.id)||null},startSession:hn,endSession:fn,captureSession(e){if(e)return fn();!function(){const e=be(),t=xe(),n=e.getSession();t&&n&&t.captureSession(n)}()}}};let ro;const oo=new WeakMap,so=()=>({name:"FunctionToString",setupOnce(){ro=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=j(this),n=oo.has(xe())&&void 0!==t?t:this;return ro.apply(n,e)}}catch(e){}},setup(e){oo.set(e,!0)}}),io=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,r,o){const{maxValueLength:s=250}=o.getOptions();return function(e,t={},n,r,o){if(!t.originalException||!l(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=function(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==r.indexOf(t))continue;const s=e[t];o[t]=l(s)||"string"==typeof s?D(`${s}`,n):s}if(t&&void 0!==e.cause&&(o.cause=l(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=l(n)?n.toString():n}}return o}catch(e){Te&&O.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r,o);if(i){const t={...e.contexts},r=Ye(i,n);return _(r)&&(U(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n,s)}}};const ao=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!uo(e,t))return!1;if(!co(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=lo(t),r=lo(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!uo(e,t))return!1;if(!co(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return Te&&O.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function co(e,t){let n=We(e),r=We(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function uo(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function lo(e){return e.exception&&e.exception.values&&e.exception.values[0]}const po=(e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:"Debug",setup(e){e.on("beforeSendEvent",((e,n)=>{t.debugger,A((()=>{t.stringify?(console.log(JSON.stringify(e,null,2)),n&&Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(e),n&&Object.keys(n).length&&console.log(n))}))}))}}};class ho extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function fo(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Re(new ho("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Ae(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Me(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}const mo=6e4;function go(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?mo:r-t}function _o(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function yo(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+go(i,r):429===t&&(o.all=r+6e4);return o}const vo=64;function bo(e,t,n=fo(e.bufferSize||vo)){let r={};return{send:function(o){const s=[];if(Pn(o,((t,n)=>{const o=qn(n);if(_o(r,o)){const r=So(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return Me({});const i=Ln(o[0],s),a=t=>{Pn(i,((n,r)=>{const o=So(n,r);e.recordDroppedEvent(t,qn(r),o)}))};return n.add((()=>t({body:Un(i)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Te&&O.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=yo(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof ho)return Te&&O.error("Skipped sending event because buffer is full."),a("queue_overflow"),Me({});throw e}))},flush:e=>n.drain(e)}}function So(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function wo(){Hr()}function ko(e){const t="console";Or(t,e),Dr(t,Eo)}function Eo(){"console"in s&&M.forEach((function(e){e in s.console&&$(s.console,e,(function(t){return R[e]=t,function(...t){Lr("console",{args:t,level:e});const n=R[e];n&&n.apply(s.console,t)}}))}))}function xo(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Co=(e={})=>{const t=e.levels||M,n=!!e.handled;return{name:"CaptureConsole",setup(e){"console"in s&&ko((({args:r,level:o})=>{xe()===e&&t.includes(o)&&function(e,t,n){const r={level:xo(t),extra:{arguments:e}};ke((o=>{if(o.addEventProcessor((e=>(e.logger="console",ne(e,{handled:n,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${N(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),Qt(t,r)}return}const s=e.find((e=>e instanceof Error));if(s)return void Zt(s,r);Qt(N(e," "),r)}))}(r,o,n)}))}}};function To(e,t={},n=be()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,l={contexts:{feedback:W({contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c})},type:"feedback",level:"info",tags:u},d=n&&n.getClient()||xe();d&&d.emit("beforeSendFeedback",l,t);return n.captureEvent(l,t)}const Io=s;let Mo=0;function Ro(){return Mo>0}function Ao(e,t={}){if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(j(e))return e}catch(t){return e}const n=function(...n){try{const r=n.map((e=>Ao(e,t)));return e.apply(this,r)}catch(e){throw Mo++,setTimeout((()=>{Mo--})),ke((r=>{r.addEventProcessor((e=>(t.mechanism&&(te(e,void 0,void 0),ne(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Zt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}B(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return e.name}})}catch(e){}return n}const Oo="Not capturing exception because it's already been captured.";class Do{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Dn(e.dsn):Te&&O.warn("No DSN provided, client will not send events."),this._dsn){const t=Gr(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}const t=["enableTracing","tracesSampleRate","tracesSampler"].find((t=>t in e&&null==e[t]));t&&A((()=>{console.warn(`[Sentry] Deprecation warning: \`${t}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)}))}captureException(e,t,n){const r=Z();if(re(e))return Te&&O.log(Oo),r;const o={event_id:r,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,r){const o={event_id:Z(),...n},s=m(e)?e:String(e),i=g(e)?this.eventFromMessage(s,t,o):this.eventFromException(e,o);return this._process(i.then((e=>this._captureEvent(e,o,r)))),o.event_id}captureEvent(e,t,n){const r=Z();if(t&&t.originalException&&re(t.originalException))return Te&&O.log(Oo),r;const o={event_id:r,...t},s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,s||n)),o.event_id}captureSession(e){"string"!=typeof e.release?Te&&O.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),se(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Me(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];bn(this,e,this._integrations),t||vn(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){const o=Wn(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=Yn(e,o,r,t);return delete e.sdkProcessingMetadata,Ln(i,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Nn(n,Hn(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const o=Wn(n);return Ln({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Rn(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;Te&&O.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(Te&&O.error("Error while sending envelope:",e),e))):(Te&&O.error("Transport disabled"),Me({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&bn(e,t,n)})),n}(this,e),vn(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(se(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ae((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n=be(),r=Se()){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s.length>0&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),Xt(o,e,t,n,this,r).then((e=>{if(null===e)return e;e.contexts={trace:Ce(n),...e.contexts};const t=zt(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:t,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Te){const t=e;"log"===t.logLevel?O.log(t.message):O.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,s=No(e),i=Lo(e),a=e.type||"error",c=`before send for type \`${a}\``,u=void 0===o?void 0:Tn(o);if(i&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",e),Re(new ho(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===a?"replay":a,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new ho("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i}=t;if(Lo(n)&&o)return o(n,r);if(No(n)){if(n.spans&&i){const t=[];for(const r of n.spans){const n=i(r);n?t.push(n):($t(),e.recordDroppedEvent("before_send","span"))}n.spans=t}if(s){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(n,r)}}return n}(this,r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(v(e))return e.then((e=>{if(!_(e)&&null!==e)throw new ho(n);return e}),(e=>{throw new ho(`${t} rejected with ${e}`)}));if(!_(e)&&null!==e)throw new ho(n);return e}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,e),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new ho(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!s&&o&&this._updateSessionFromEvent(o,r),s){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof ho)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new ho(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){Te&&O.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(Te&&O.log("No outcomes to send"));if(!this._dsn)return void(Te&&O.log("No dsn provided, will not send outcomes"));Te&&O.log("Sending outcomes:",e);const t=(n=e,Ln((r=this._options.tunnel&&Rn(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||G(),discarded_events:n}]]));var n,r,o;this.sendEnvelope(t)}}function Lo(e){return void 0===e.type}function No(e){return"transaction"===e.type}const Po="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Fo(e,t){const n=Bo(e,t),r={type:zo(t),value:qo(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function $o(e,t,n,r){const o=xe(),s=o&&o.getOptions().normalizeDepth,i=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:Ve(t,s)};if(i)return{exception:{values:[Fo(e,i)]},extra:a};const c={exception:{values:[{type:y(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Xo(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=Bo(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Uo(e,t){return{exception:{values:[Fo(e,t)]}}}function Bo(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&jo.test(e.message))return 1;return 0}(t),o=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch(e){}return[]}const jo=/Minified React error #\d+;/i;function Ho(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function zo(e){const t=e&&e.name;if(!t&&Ho(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function qo(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:Ho(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function Wo(e,t,n,r){const o=Vo(e,t,n&&n.syntheticException||void 0,r);return ne(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Me(o)}function Yo(e,t,n="info",r,o){const s=Go(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),Me(s)}function Vo(e,t,n,r,o){let s;if(p(t)&&t.error){return Uo(e,t.error)}if(h(t)||d(t,"DOMException")){const o=t;if("stack"in t)s=Uo(e,t);else{const t=o.name||(h(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=Go(e,i,n,r),te(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(l(t))return Uo(e,t);if(_(t)||y(t)){return s=$o(e,t,n,o),ne(s,{synthetic:!0}),s}return s=Go(e,t,n,r),te(s,`${t}`,void 0),ne(s,{synthetic:!0}),s}function Go(e,t,n,r){const o={};if(r&&n){const r=Bo(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]}),ne(o,{synthetic:!0})}if(m(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Xo(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(H(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return D(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:D(r,t)}return""}(e),r=t?"promise rejection":"exception";if(p(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(y(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Jo(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Rn(r)}},s=function(e){return[{type:"user_report"},e]}(e);return Ln(o,[s])}class Ko extends Do{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:o}))),version:o}),e._metadata=s}(t,"browser",["browser"],Io.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&Io.document&&Io.document.addEventListener("visibilitychange",(()=>{"hidden"===Io.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Wo(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return Yo(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Po&&O.warn("SDK not enabled, will not capture user feedback."));const t=Jo(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}const Zo=s;function Qo(){if(!("fetch"in Zo))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function es(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function ts(){if("string"==typeof EdgeRuntime)return!0;if(!Qo())return!1;if(es(Zo.fetch))return!0;let e=!1;const t=Zo.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=es(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){I&&O.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}const ns="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,rs=s,os={};function ss(e){const t=os[e];if(t)return t;let n=rs[e];if(es(n))return os[e]=n.bind(rs);const r=rs.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(t)}catch(t){ns&&O.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?os[e]=n.bind(rs):n}function is(e){os[e]=void 0}function as(...e){return ss("setTimeout")(...e)}function cs(e,t=ss("fetch")){let n=0,r=0;return bo(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return is("fetch"),Re("No fetch implementation available");try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return is("fetch"),n-=s,r--,Re(e)}}))}function us(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?$e:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const ls=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ds=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ps=/\((\S*)(?::(\d+))(?::(\d+))\)/,hs=[30,e=>{const t=ls.exec(e);if(t){const[,e,n,r]=t;return us(e,$e,+n,+r)}const n=ds.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=ps.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=xs(n[1]||$e,n[2]);return us(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],fs=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ms=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gs=[50,e=>{const t=fs.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=ms.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||$e;return[n,e]=xs(n,e),us(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],_s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ys=[40,e=>{const t=_s.exec(e);return t?us(t[2],t[1]||$e,+t[3],t[4]?+t[4]:void 0):void 0}],vs=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,bs=[10,e=>{const t=vs.exec(e);return t?us(t[2],t[3]||$e,+t[1]):void 0}],Ss=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,ws=[20,e=>{const t=Ss.exec(e);return t?us(t[5],t[3]||t[4]||$e,+t[1],+t[2]):void 0}],ks=[hs,gs],Es=je(...ks),xs=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:$e,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};let Cs,Ts,Is;function Ms(e){Or("dom",e),Dr("dom",Rs)}function Rs(){if(!rs.document)return;const e=Lr.bind(null,"dom"),t=As(e,!0);rs.document.addEventListener("click",t,!1),rs.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=rs[t],r=n&&n.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&($(r,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=r[n]=r[n]||{refCount:0};if(!s.handler){const r=As(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),$(r,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},o=n[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function As(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;U(n,"_sentryCaptured",!0),r&&!r._sentryId&&U(r,"_sentryId",Z());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Ts)return!1;try{if(!e.target||e.target._sentryId!==Is)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),Ts=n.type,Is=r?r._sentryId:void 0}clearTimeout(Cs),Cs=rs.setTimeout((()=>{Is=void 0,Ts=void 0}),1e3)}}const Os="__sentry_xhr_v3__";function Ds(e){Or("xhr",e),Dr("xhr",Ls)}function Ls(){if(!rs.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,o=1e3*X(),s=f(n[0])?n[0].toUpperCase():void 0,i=function(e){if(f(e))return e;try{return e.toString()}catch(e){}return}(n[1]);if(!s||!i)return e.apply(t,n);t[Os]={method:s,url:i,request_headers:{}},"POST"===s&&i.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Os];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}Lr("xhr",{endTimestamp:1e3*X(),startTimestamp:o,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,n){return a(),e.apply(t,n)}}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,s=t[Os];return s&&f(r)&&f(o)&&(s.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Os];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return Lr("xhr",{startTimestamp:1e3*X(),xhr:t}),e.apply(t,n)}})}const Ns=s;let Ps;function Fs(e){const t="history";Or(t,e),Dr(t,$s)}function $s(){if(!function(){const e=Ns.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ns&&!!Ns.history.pushState&&!!Ns.history.replaceState;return!t&&n}())return;const e=rs.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Ps,t=String(n);Ps=t;Lr("history",{from:e,to:t})}return e.apply(this,t)}}rs.onpopstate=function(...t){const n=rs.location.href,r=Ps;Ps=n;if(Lr("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},$(rs.history,"pushState",t),$(rs.history,"replaceState",t)}function Us(e,t){const n="fetch";Or(n,e),Dr(n,(()=>Bs(void 0,t)))}function Bs(e,t=!1){t&&!ts()||$(s,"fetch",(function(t){return function(...n){const r=new Error,{method:o,url:i}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:zs(t),method:Hs(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:zs(t),method:Hs(t,"method")?String(t.method).toUpperCase():"GET"}}(n),a={args:n,fetchData:{method:o,url:i},startTimestamp:1e3*X(),virtualError:r};return e||Lr("fetch",{...a}),t.apply(s,n).then((async t=>(e?e(t):Lr("fetch",{...a,endTimestamp:1e3*X(),response:t}),t)),(e=>{throw Lr("fetch",{...a,endTimestamp:1e3*X(),error:e}),l(e)&&void 0===e.stack&&(e.stack=r.stack,U(e,"framesToPop",1)),e}))}}))}function js(e){let t;try{t=e.clone()}catch(e){return}!async function(e,t){if(e&&e.body){const n=e.body,r=n.getReader(),o=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),9e4);let s=!0;for(;s;){let e;try{e=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),5e3);const{done:o}=await r.read();clearTimeout(e),o&&(t(),s=!1)}catch(e){s=!1}finally{clearTimeout(e)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,(()=>{}))}}(t,(()=>{Lr("fetch-body-resolved",{endTimestamp:1e3*X(),response:e})}))}function Hs(e,t){return!!e&&"object"==typeof e&&!!e[t]}function zs(e){return"string"==typeof e?e:e?Hs(e,"url")?e.url:e.toString?e.toString():"":""}function qs(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Ws(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Ys=1024,Vs=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&ko(function(e){return function(t){if(xe()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:xo(t.level),message:N(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${N(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}to(n,{input:t.args,level:t.level})}}(e)),t.dom&&Ms(function(e,t){return function(n){if(xe()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>Ys&&(Po&&O.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=Ys),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=E(t,{keyAttrs:s,maxStringLength:i}),o=T(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),to(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Ds(function(e){return function(t){if(xe()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Os];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o,u={method:s,url:i,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};to({category:"xhr",data:u,type:"http",level:qs(a)},l)}}(e)),t.fetch&&Us(function(e){return function(t){if(xe()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){to({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},s={input:t.args,response:e,startTimestamp:n,endTimestamp:r};to({category:"fetch",data:o,type:"http",level:qs(o.status_code)},s)}}}(e)),t.history&&Fs(function(e){return function(t){if(xe()!==e)return;let n=t.from,r=t.to;const o=Ws(Io.location.href);let s=n?Ws(n):void 0;const i=Ws(r);s&&s.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),to({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){xe()===e&&to({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ee(t)},{event:t})}}(e))}}};const Gs=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Xs=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&$(Io,"setTimeout",Js),t.setInterval&&$(Io,"setInterval",Js),t.requestAnimationFrame&&$(Io,"requestAnimationFrame",Ks),t.XMLHttpRequest&&"XMLHttpRequest"in Io&&$(XMLHttpRequest.prototype,"send",Zs);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Gs).forEach(Qs)}}}};function Js(e){return function(...t){const n=t[0];return t[0]=Ao(n,{mechanism:{data:{function:qe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ks(e){return function(t){return e.apply(this,[Ao(t,{mechanism:{data:{function:"requestAnimationFrame",handler:qe(e)},handled:!1,type:"instrument"}})])}}function Zs(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&$(n,e,(function(t){const n={mechanism:{data:{function:e,handler:qe(t)},handled:!1,type:"instrument"}},r=j(t);return r&&(n.mechanism.data.handler=qe(r)),Ao(t,n)}))})),e.apply(this,t)}}function Qs(e){const t=Io[e],n=t&&t.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&($(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ao(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:qe(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Ao(r,{mechanism:{data:{function:"addEventListener",handler:qe(r),target:e},handled:!1,type:"instrument"}}),o])}})),$(n,"removeEventListener",(function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(e){}return e.call(this,t,n,r)}})))}const ei=()=>({name:"BrowserSession",setupOnce(){void 0!==Io.document?(hn({ignoreDuration:!0}),gn(),Fs((({from:e,to:t})=>{void 0!==e&&e!==t&&(hn({ignoreDuration:!0}),gn())}))):Po&&O.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),ti=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Pr((t=>{const{stackParser:n,attachStacktrace:r}=ri();if(xe()!==e||Ro())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=f(t)&&t.length>0?t:C();0===c.length&&c.push({colno:u,filename:d,function:$e,in_app:!0,lineno:l});return e}(Vo(n,c||o,void 0,r,!1),s,i,a);u.level="error",en(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),ni("onerror")),t.onunhandledrejection&&(!function(e){Ur((t=>{const{stackParser:n,attachStacktrace:r}=ri();if(xe()!==e||Ro())return;const o=function(e){if(g(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),s=g(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Vo(n,o,void 0,r,!0);s.level="error",en(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),ni("onunhandledrejection"))}}};function ni(e){Po&&O.log(`Global Handler attached: ${e}`)}function ri(){const e=xe();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const oi=()=>({name:"HttpContext",preprocessEvent(e){if(!Io.navigator&&!Io.location&&!Io.document)return;const t=e.request&&e.request.url||Io.location&&Io.location.href,{referrer:n}=Io.document||{},{userAgent:r}=Io.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}});function si(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&b(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;a&&(s.exception.values=(c=ii(e,t,o,i.originalException,r,s.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=D(e.value,u)),e)))))}function ii(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(b(r[o],Error)){ai(i,a);const s=e(t,r[o]),u=c.length;ci(s,o,u,a),c=ii(e,t,n,r[o],o,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(b(r,Error)){ai(i,a);const u=e(t,r),l=c.length;ci(u,`errors[${s}]`,l,a),c=ii(e,t,n,r,o,[u,...c],u,l)}})),c}function ai(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function ci(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const ui=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){const s=o.getOptions();si(Fo,s.stackParser,s.maxValueLength,n,t,e,r)}}};function li(e){const t=[Zr(),so(),Xs(),Vs(),ti(),ui(),ao(),oi()];return!1!==e.autoSessionTracking&&t.push(ei()),t}function di(e={}){const t=function(e={}){const t={defaultIntegrations:li(e),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Io.SENTRY_RELEASE&&Io.SENTRY_RELEASE.id?Io.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==Io.window&&Io;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=Io.location&&Io.location.href||"",o=!!n&&Io===Io.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),s=void 0!==e.nw;return!!n&&!o&&!s}())return void A((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));Po&&(Qo()||O.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:(r=t.stackParser||Es,Array.isArray(r)?je(...r):r),integrations:yn(t),transport:t.transport||cs};var r;return function(e,t){!0===t.debug&&(Te?O.enable():A((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),be().update(t.initialScope);const n=new e(t);return wr(n),n.init(),n}(Ko,n)}function pi(e={}){if(!Io.document)return void(Po&&O.error("Global document not defined in showReportDialog call"));const t=be(),n=t.getClient(),r=n&&n.getDsn();if(!r)return void(Po&&O.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=cn();t&&(e.eventId=t)}const o=Io.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(e,t){const n=Dn(e);if(!n)return"";const r=`${Vr(n)}embed/error-page/`;let o=`dsn=${Rn(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(r,e),e.onLoad&&(o.onload=e.onLoad);const{onClose:s}=e;if(s){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{s()}finally{Io.removeEventListener("message",e)}};Io.addEventListener("message",e)}const i=Io.document.head||Io.document.body;i?i.appendChild(o):Po&&O.error("Not injecting report dialog. No injection point found in HTML")}function hi(){}function fi(e){e()}function mi(e){const t=xe();t&&t.captureUserFeedback(e)}const gi={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},_i=Io;async function yi(e,t){const n=gi[e],r=_i.Sentry=_i.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if("function"==typeof s&&!("_isShim"in s))return s;const i=function(e){const t=xe(),n=t&&t.getOptions(),r=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${o}/${e}.min.js`,r).toString()}(n),a=Io.document.createElement("script");a.src=i,a.crossOrigin="anonymous",a.referrerPolicy="origin",t&&a.setAttribute("nonce",t);const c=new Promise(((e,t)=>{a.addEventListener("load",(()=>e())),a.addEventListener("error",t)})),u=Io.document.currentScript,l=Io.document.body||Io.document.head||u&&u.parentElement;if(!l)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);l.appendChild(a);try{await c}catch(t){throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}const vi=s,bi=new WeakMap,Si=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(bi.has(xe()))for(const t of e)ke((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Qt(`${n}: ${r}`)}))}return{name:"ReportingObserver",setupOnce(){if(!("ReportingObserver"in Zo))return;new vi.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){bi.set(e,!0)}}};function wi(e,t){const n=t&&t.getDsn(),r=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){if(!t)return!1;return ki(e)===ki(t)}(e,r)}function ki(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Ei=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:"HttpClient",setup(e){!function(e,t){if(!ts())return;Us((n=>{if(xe()!==e)return;const{response:r,args:o,error:s,virtualError:i}=n,[a,c]=o;r&&function(e,t,n,r,o){if(Ii(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let s,i,a,c;Ri()&&([s,a]=xi("Cookie",e),[i,c]=xi("Set-Cookie",n));en(Mi({url:e.url,method:e.method,status:n.status,requestHeaders:s,responseHeaders:i,requestCookies:a,responseCookies:c,error:o}))}}(t,a,r,c,s||i)}),!1)}(e,t),function(e,t){if(!("XMLHttpRequest"in s))return;Ds((n=>{if(xe()!==e)return;const{error:r,virtualError:o}=n,s=n.xhr,i=s[Os];if(!i)return;const{method:a,request_headers:c}=i;try{!function(e,t,n,r,o){if(Ii(e,t.status,t.responseURL)){let e,s,i;if(Ri()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(s=Ti(e))}catch(e){}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{})}(t)}catch(e){}e=r}en(Mi({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:s,error:o}))}}(t,s,a,c,r||o)}catch(e){Po&&O.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function xi(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Ti(t))}catch(e){}return[n,r]}function Ci(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Ti(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function Ii(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!wi(n,xe());var r,o}function Mi(e){const t=xe(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,s={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Ci(e.responseHeaders)}}};return ne(s,{type:"http.client",handled:!1}),s}function Ri(){const e=xe();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const Ai=s,Oi=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent(e){return function(e,t){const n=Ai.document,r=Ai.location&&(o=Ai.location.href,o.split(/[?#]/,1)[0]);var o;if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const a=["<!DOCTYPE html>","<html>",...i.split("\n"),"</html>"];return s.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>L(e,0)));const s=Math.min(r-1,o);t.context_line=L(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>L(e,0)))}(t,e,r),e}(e,a,r,t))))})),e}(e,t)}}};function Di(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Li(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Ni(){return"undefined"!=typeof window&&(!Li()||function(){const e=s.process;return!!e&&"renderer"===e.type}())}const Pi=(e,t,n,r)=>{let o,s;return i=>{t.value>=0&&(i||r)&&(s=t.value-(o||0),(s||void 0===o)&&(o=t.value,t.delta=s,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Fi=(e=!0)=>{const t=rs.performance&&rs.performance.getEntriesByType&&rs.performance.getEntriesByType("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},$i=()=>{const e=Fi();return e&&e.activationStart||0},Ui=(e,t)=>{const n=Fi();let r="navigate";n&&(rs.document&&rs.document.prerendering||$i()>0?r="prerender":rs.document&&rs.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Bi=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ji=e=>{const t=t=>{("pagehide"===t.type||rs.document&&"hidden"===rs.document.visibilityState)&&e(t)};rs.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},Hi=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let zi=-1;const qi=e=>{"hidden"===rs.document.visibilityState&&zi>-1&&(zi="visibilitychange"===e.type?e.timeStamp:0,Wi())},Wi=()=>{removeEventListener("visibilitychange",qi,!0),removeEventListener("prerenderingchange",qi,!0)},Yi=()=>(rs.document&&zi<0&&(zi="hidden"!==rs.document.visibilityState||rs.document.prerendering?1/0:0,addEventListener("visibilitychange",qi,!0),addEventListener("prerenderingchange",qi,!0)),{get firstHiddenTime(){return zi}}),Vi=e=>{rs.document&&rs.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},Gi=[1800,3e3],Xi=[.1,.25],Ji=(e,t={})=>{((e,t={})=>{Vi((()=>{const n=Yi(),r=Ui("FCP");let o;const s=Bi("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-$i(),0),r.entries.push(e),o(!0)))}))}));s&&(o=Pi(e,r,Gi,t.reportAllChanges))}))})(Hi((()=>{const n=Ui("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],n=s[s.length-1];o&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e])}})),o>n.value&&(n.value=o,n.entries=s,r())},a=Bi("layout-shift",i);a&&(r=Pi(e,n,Xi,t.reportAllChanges),ji((()=>{i(a.takeRecords()),r(!0)})),setTimeout(r,0))})))},Ki=[100,300];let Zi=0,Qi=1/0,ea=0;const ta=e=>{e.forEach((e=>{e.interactionId&&(Qi=Math.min(Qi,e.interactionId),ea=Math.max(ea,e.interactionId),Zi=ea?(ea-Qi)/7+1:0)}))};let na;const ra=()=>{"interactionCount"in performance||na||(na=Bi("event",ta,{type:"event",buffered:!0,durationThreshold:0}))},oa=[],sa=new Map;const ia=()=>(na?Zi:performance.interactionCount||0)-0,aa=[],ca=e=>{if(aa.forEach((t=>t(e))),!e.interactionId&&"first-input"!==e.entryType)return;const t=oa[oa.length-1],n=sa.get(e.interactionId);if(n||oa.length<10||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(e);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};sa.set(t.id,t),oa.push(t)}oa.sort(((e,t)=>t.latency-e.latency)),oa.length>10&&oa.splice(10).forEach((e=>sa.delete(e.id)))}},ua=e=>{const t=rs.requestIdleCallback||rs.setTimeout;let n=-1;return e=Hi(e),rs.document&&"hidden"===rs.document.visibilityState?e():(n=t(e),ji(e)),n},la=[200,500],da=(e,t={})=>{"PerformanceEventTiming"in rs&&"interactionId"in PerformanceEventTiming.prototype&&Vi((()=>{ra();const n=Ui("INP");let r;const o=e=>{ua((()=>{e.forEach(ca);const t=(()=>{const e=Math.min(oa.length-1,Math.floor(ia()/50));return oa[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())}))},s=Bi("event",o,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});r=Pi(e,n,la,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ji((()=>{o(s.takeRecords()),r(!0)})))}))},pa=[2500,4e3],ha={},fa=[800,1800],ma=e=>{rs.document&&rs.document.prerendering?Vi((()=>ma(e))):rs.document&&"complete"!==rs.document.readyState?addEventListener("load",(()=>ma(e)),!0):setTimeout(e,0)},ga={},_a={};let ya,va,ba,Sa,wa;function ka(e,t=!1){return La("cls",e,Ma,ya,t)}function Ea(e,t=!1){return La("lcp",e,Aa,ba,t)}function xa(e){return La("fid",e,Ra,va)}function Ca(e){return La("inp",e,Da,wa)}function Ta(e,t){return Na(e,t),_a[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Bi(e,(t=>{Ia(e,{entries:t})}),t)}(e),_a[e]=!0),Pa(e,t)}function Ia(e,t){const n=ga[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){ns&&O.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${qe(r)}\nError:`,t)}}function Ma(){return Ji((e=>{Ia("cls",{metric:e}),ya=e}),{reportAllChanges:!0})}function Ra(){return((e,t={})=>{Vi((()=>{const n=Yi(),r=Ui("FID");let o;const s=e=>{e.startTime<n.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),o(!0))},i=e=>{e.forEach(s)},a=Bi("first-input",i);o=Pi(e,r,Ki,t.reportAllChanges),a&&ji(Hi((()=>{i(a.takeRecords()),a.disconnect()})))}))})((e=>{Ia("fid",{metric:e}),va=e}))}function Aa(){return((e,t={})=>{Vi((()=>{const n=Yi(),r=Ui("LCP");let o;const s=e=>{t.reportAllChanges||(e=e.slice(-1)),e.forEach((e=>{e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-$i(),0),r.entries=[e],o())}))},i=Bi("largest-contentful-paint",s);if(i){o=Pi(e,r,pa,t.reportAllChanges);const n=Hi((()=>{ha[r.id]||(s(i.takeRecords()),i.disconnect(),ha[r.id]=!0,o(!0))}));["keydown","click"].forEach((e=>{rs.document&&addEventListener(e,(()=>ua(n)),{once:!0,capture:!0})})),ji(n)}}))})((e=>{Ia("lcp",{metric:e}),ba=e}),{reportAllChanges:!0})}function Oa(){return((e,t={})=>{const n=Ui("TTFB"),r=Pi(e,n,fa,t.reportAllChanges);ma((()=>{const e=Fi();e&&(n.value=Math.max(e.responseStart-$i(),0),n.entries=[e],r(!0))}))})((e=>{Ia("ttfb",{metric:e}),Sa=e}))}function Da(){return da((e=>{Ia("inp",{metric:e}),wa=e}))}function La(e,t,n,r,o=!1){let s;return Na(e,t),_a[e]||(s=n(),_a[e]=!0),r&&t({metric:r}),Pa(e,t,o?s:void 0)}function Na(e,t){ga[e]=ga[e]||[],ga[e].push(t)}function Pa(e,t,n){return()=>{n&&n();const r=ga[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}const Fa=s,$a="sentryReplaySession",Ua="Unable to send Replay",Ba=15e4,ja=5e3,Ha=2e7,za=36e5;function qa(e,t){return null!=e?e:t()}function Wa(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}var Ya;function Va(e){const t=Wa([e,"optionalAccess",e=>e.host]);return Boolean(Wa([t,"optionalAccess",e=>e.shadowRoot])===e)}function Ga(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Xa(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ja).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Ja(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Xa(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"==typeof e.style.all&&e.style.all;if(r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],s=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${s?" !important":""};`}return`${e.selectorText} { ${t} }`}(e)),n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t)),n||r)return t}return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Ya||(Ya={}));class Ka{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;return qa(Wa([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]),(()=>-1))}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Za({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Qa({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function ec(e){return e.toLowerCase()}function tc(e){return e.toUpperCase()}const nc="__rrweb_original__";function rc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ec(t):null}function oc(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function sc(e,t){let n;try{n=new URL(e,qa(t,(()=>window.location.href)))}catch(e){return null}return qa(Wa([n.pathname.match(/\.([0-9a-z]+)(?:$)/i),"optionalAccess",e=>e[1]]),(()=>null))}const ic={};function ac(e){const t=ic[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return ic[e]=r.bind(window)}function cc(...e){return ac("setTimeout")(...e)}function uc(...e){return ac("clearTimeout")(...e)}function lc(e){try{return e.contentDocument}catch(e){}}let dc=1;const pc=new RegExp("[^a-z0-9-_:]");function hc(){return dc++}let fc,mc;const gc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,_c=/^(?:[a-z+]+:)?\/\//i,yc=/^www\..*/i,vc=/^(data:)([^,]*),(.*)/i;function bc(e,t){return(e||"").replace(gc,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(_c.test(a)||yc.test(a))return`url(${c}${a}${c})`;if(vc.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Sc=/^[^ \t\n\r\u000c]+/,wc=/^[, \t\n\r\u000c]+/;const kc=new WeakMap;function Ec(e,t){return t&&""!==t.trim()?Cc(e,t):t}function xc(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Cc(e,t){let n=kc.get(e);if(n||(n=e.createElement("a"),kc.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Tc(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Ec(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(wc),!(n>=t.length);){let s=r(Sc);if(","===s.slice(-1))s=Ec(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=Ec(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?bc(r,Cc(e)):"object"===t&&"data"===n?Ec(e,r):"function"==typeof s?s(n,r,o):r:Ec(e,r):r}function Ic(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Mc(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Mc(e.parentNode,t,n,r+1):-1}function Rc(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Ac(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=Mc(i,Rc(r,o)),c<0)return!0;a=Mc(i,Rc(t,n),c>=0?c:1/0)}else{if(a=Mc(i,Rc(t,n)),a<0)return!1;c=Mc(i,Rc(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function Oc(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:_={},inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Ya.Document,childNodes:[],compatMode:e.compatMode}:{type:Ya.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ya.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:f=!1,rootId:m,maskAllText:g,maskTextClass:_,unmaskTextClass:y,maskTextSelector:v,unmaskTextSelector:b}=t,S=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o,s),w=function(e){if(e instanceof HTMLFormElement)return"form";const t=ec(e.tagName);return pc.test(t)?"div":t}(e);let k={};const E=e.attributes.length;for(let t=0;t<E;t++){const r=e.attributes[t];r.name&&!Ic(w,r.name,r.value)&&(k[r.name]=Tc(n,w,ec(r.name),r.value,e,c))}if("link"===w&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Xa(t)),r&&(k.rel=null,k.href=null,k.crossorigin=null,k._cssText=bc(r,t.href))}if("style"===w&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Xa(e.sheet);t&&(k._cssText=bc(t,Cc(n)))}if("input"===w||"textarea"===w||"select"===w||"option"===w){const t=e,n=rc(t),r=oc(t,tc(w),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Ac(t,_,v,y,b,Za({type:n,tagName:tc(w),maskInputOptions:a}));k.value=Qa({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(k.checked=o)}"option"===w&&(e.selected&&!a.select?k.selected=!0:delete k.selected);if("canvas"===w&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=nc in o?o[nc]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(k.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(l.type,l.quality)&&(k.rr_dataURL=t)}if("img"===w&&d){fc||(fc=n.createElement("canvas"),mc=fc.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,s=()=>{t.removeEventListener("load",s);try{fc.width=t.naturalWidth,fc.height=t.naturalHeight,mc.drawImage(t,0,0),k.rr_dataURL=fc.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?k.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s)}"audio"!==w&&"video"!==w||(k.rr_mediaState=e.paused?"paused":"played",k.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(k.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(k.rr_scrollTop=e.scrollTop));if(S){const{width:t,height:n}=e.getBoundingClientRect();k={class:k.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==w||h(k.src)||(S||lc(e)||(k.rr_src=k.src),delete k.src);let x;try{customElements.get(w)&&(x=!0)}catch(e){}return{type:Ya.Element,tagName:w,attributes:k,childNodes:[],isSVG:xc(e)||void 0,needBlock:S,rootId:m,isCustom:x}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:_,inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||Wa([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Xa(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=bc(p,Cc(t.doc))}f&&(p="SCRIPT_PLACEHOLDER");const g=Ac(e,r,s,o,i,n);h||f||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Qa({isMasked:Ac(e,r,s,o,i,Za({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:Ya.Text,textContent:p||"",isStyle:h,rootId:l}}(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Ya.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Ya.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function Dc(e){return null==e?"":e.toLowerCase()}function Lc(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:T=()=>!1,newlyAddedElement:I=!1}=t;let{preserveWhiteSpace:M=!0}=t;const R=Oc(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:T,newlyAddedElement:I});if(!R)return console.warn(e,"not serialized"),null;let A;A=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===Ya.Comment)return!0;if(e.type===Ya.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===sc(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Dc(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Dc(e.attributes.name)||"icon"===Dc(e.attributes.rel)||"apple-touch-icon"===Dc(e.attributes.rel)||"shortcut icon"===Dc(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Dc(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Dc(e.attributes.property).match(/^(og|twitter|fb):/)||Dc(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Dc(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Dc(e.attributes.name)||"googlebot"===Dc(e.attributes.name)||"bingbot"===Dc(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Dc(e.attributes.name)||"generator"===Dc(e.attributes.name)||"framework"===Dc(e.attributes.name)||"publisher"===Dc(e.attributes.name)||"progid"===Dc(e.attributes.name)||Dc(e.attributes.property).match(/^article:/)||Dc(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Dc(e.attributes.name)||"yandex-verification"===Dc(e.attributes.name)||"csrf-token"===Dc(e.attributes.name)||"p:domain_verify"===Dc(e.attributes.name)||"verify-v1"===Dc(e.attributes.name)||"verification"===Dc(e.attributes.name)||"shopify-checkout-api-token"===Dc(e.attributes.name)))return!0}}return!1}(R,y)&&(M||R.type!==Ya.Text||R.isStyle||R.textContent.replace(/^\s+|\s+$/gm,"").length)?hc():-2;const O=Object.assign(R,{id:A});if(r.add(e,O),-2===A)return null;w&&w(e);let D=!p;if(O.type===Ya.Element){D=D&&!O.needBlock,delete O.needBlock;const t=e.shadowRoot;t&&Ga(t)&&(O.isShadowHost=!0)}if((O.type===Ya.Document||O.type===Ya.Element)&&D){y.headWhitespace&&O.type===Ya.Element&&"head"===O.tagName&&(M=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T};for(const n of Array.from(e.childNodes)){const e=Lc(n,t);e&&O.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Lc(n,t);r&&(Ga(e.shadowRoot)&&(r.isShadow=!0),O.childNodes.push(r))}}return e.parentNode&&Va(e.parentNode)&&Ga(e.parentNode)&&(O.isShadow=!0),O.type===Ya.Element&&"iframe"===O.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=cc((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{uc(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return cc(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=lc(e);if(t&&k){const n=Lc(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T});n&&k(e,n)}}),E),O.type===Ya.Element&&"link"===O.tagName&&"string"==typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"==typeof O.attributes.href&&"css"===sc(O.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=cc((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{uc(s),o=!0,t()}))}(e,(()=>{if(x){const t=Lc(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:M,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:T});t&&x(e,t)}}),C),O}function Nc(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function Pc(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Fc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let $c={map:{},getId(){return console.error(Fc),-1},getNode(){return console.error(Fc),null},removeNodeFromMap(){console.error(Fc)},has(){return console.error(Fc),!1},reset(){console.error(Fc)}};function Uc(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){su("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=iu((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function Bc(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){iu((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Bc(e,t,s||{},!0)}function jc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&($c=new Proxy($c,{get(e,t,n){return"map"===t&&console.error(Fc),Reflect.get(e,t,n)}}));let Hc=Date.now;function zc(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:Nc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||Nc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||Nc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:Nc([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||Nc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||Nc([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function qc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Wc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Yc(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function Vc(e,t,n,r,o){if(!e)return!1;const s=Yc(e);if(!s)return!1;const i=Rc(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Mc(s,i);let c=-1;return!(a<0)&&(r&&(c=Mc(s,Rc(null,r))),a>-1&&c<0||a<c)}function Gc(e,t){return-2===t.getId(e)}function Xc(e,t){if(Va(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Xc(e.parentNode,t))}function Jc(e){return Boolean(e.changedTouches)}function Kc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Zc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Qc(e){return Boolean(Nc([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Hc=()=>(new Date).getTime());class eu{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function tu(e){let t=null;return Nc([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function nu(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=tu(n);)n=t;return n}(e);return t.contains(n)}function ru(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||nu(e))}const ou={};function su(e){const t=ou[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return ou[e]=r.bind(window)}function iu(...e){return su("setTimeout")(...e)}var au,cu,uu=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(uu||{}),lu=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(lu||{}),du=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(du||{}),pu=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(pu||{});function hu(e){try{return e.contentDocument}catch(e){}}function fu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}function mu(e){return"__ln"in e}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(au||(au={})),function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(cu||(cu={}));class gu{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=fu([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&mu(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&mu(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const _u=(e,t)=>`${e}@${t}`;class yu{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new gu,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!ru(o))return;const s=Va(o.parentNode)?this.mirror.getId(tu(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=Lc(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Kc(e,this.mirror)&&!Vc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Zc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Qc(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Vc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)bu(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Su(this.droppedSet,e)||bu(this.removes,e,this.mirror)?Su(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!Gc(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Vc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Ac(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Yc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=rc(t),o=t.tagName;r=oc(t,o,n);const s=Za({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=Qa({isMasked:Ac(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(Vc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(hu(t))return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Ic(t.tagName,n)&&(o.attributes[n]=Tc(this.doc,ec(t.tagName),ec(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Vc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=Va(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Vc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Gc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(vu(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Xc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[_u(n,r)]?vu(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Va(e.target)||!Ga(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Gc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[_u(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Vc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Qc(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function vu(e,t){e.delete(t),t.childNodes.forEach((t=>vu(e,t)))}function bu(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some((e=>e.id===t)))return!0;r=r.parentNode}return!1}(e,t,n)}function Su(e,t){return 0!==e.size&&wu(e,t)}function wu(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||wu(e,n))}let ku;function Eu(e){ku=e}function xu(){ku=void 0}const Cu=e=>{if(!ku)return e;return(...t)=>{try{return e(...t)}catch(e){if(ku&&!0===ku(e))return()=>{};throw e}}};function Tu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}const Iu=[];function Mu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Ru(e,t){const n=new yu;Iu.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=Tu([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);o&&window[o]&&(r=window[o]);const s=new r(Cu((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Au({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(du).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=ec(i);const l=(t=>i=>{const a=Mu(i);if(Vc(a,r,o,s,!0))return;let c=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=pu.Mouse;break;case"touch":c=pu.Touch;break;case"pen":c=pu.Pen}c===pu.Touch?du[t]===du.MouseDown?l="TouchStart":du[t]===du.MouseUp&&(l="TouchEnd"):pu.Pen}else Jc(i)&&(c=pu.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===pu.Touch||l.startsWith("Mouse")&&c===pu.Mouse)&&(c=null)):du[t]===du.Click&&(c=u,u=null);const d=Jc(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:h,clientY:f}=d;Cu(e)({type:du[l],id:p,x:h,y:f,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(du[i]){case du.MouseDown:case du.MouseUp:a=a.replace("mouse","pointer");break;case du.TouchStart:case du.TouchEnd:return}c.push(Pc(a,l,t))})),Cu((()=>{c.forEach((e=>e()))}))}function Ou({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return Pc("scroll",Cu(Uc(Cu((i=>{const a=Mu(i);if(!a||Vc(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=zc(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const Du=["INPUT","TEXTAREA","SELECT"],Lu=new WeakMap;function Nu({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Mu(e);const l=e.isTrusted,g=n&&tc(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Du.indexOf(g)<0||Vc(n,r,o,s,!0))return;const y=n;if(y.classList.contains(i)||a&&y.matches(a))return;const v=rc(n);let b=oc(y,g,v),S=!1;const w=Za({maskInputOptions:c,tagName:g,type:v}),k=Ac(n,p,f,h,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Qa({isMasked:k,element:n,value:b,maskInputFn:u}),_(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Qa({isMasked:k,element:e,value:oc(e,g,v),maskInputFn:u});_(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function _(t,r){const o=Lu.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Lu.set(t,r);const o=n.getId(t);Cu(e)({...r,id:o})}}const y=("last"===l.input?["change"]:["input","change"]).map((e=>Pc(e,Cu(g),t))),v=t.defaultView;if(!v)return()=>{y.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&y.push(...S.map((e=>Bc(e[0],e[1],{set(){Cu(g)({target:this,isTrusted:!1})}},!1,v)))),Cu((()=>{y.forEach((e=>e()))}))}function Pu(e){return function(e,t){if(Bu("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Bu("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Bu("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Bu("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Fu(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function $u({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?Tu([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Tu([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),s=Tu([o,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Tu([o,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return Tu([s,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Tu([s,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Cu((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function Uu(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Ru(e,e.doc));const o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=Uc(Cu((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),u=Cu(Uc(Cu((e=>{const t=Mu(e),{clientX:n,clientY:o}=Jc(e)?e.changedTouches[0]:e;i||(i=Hc()),a.push({x:n,y:o,id:r.getId(t),timeOffset:Hc()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?lu.Drag:e instanceof MouseEvent?lu.MouseMove:lu.TouchMove)})),o,{trailing:!1})),l=[Pc("mousemove",u,n),Pc("touchmove",u,n),Pc("drag",u,n)];return Cu((()=>{l.forEach((e=>e()))}))}(e),s=Au(e),i=Ou(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Pc("resize",Cu(Uc(Cu((()=>{const t=qc(),o=Wc();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=Nu(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=Cu((i=>Uc(Cu((s=>{const a=Mu(s);if(!a||Vc(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),s.media||500))),c=[Pc("play",a(0),i),Pc("pause",a(1),i),Pc("seeked",a(2),i),Pc("volumechange",a(3),i),Pc("ratechange",a(4),i)];return Cu((()=>{c.forEach((e=>e()))}))}(e);let l=()=>{},d=()=>{},p=()=>{},h=()=>{};e.recordDOM&&(l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Cu(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Fu(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Cu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Fu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Cu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Fu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Cu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Fu(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};ju("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(ju("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),ju("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),ju("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:Cu(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=Fu(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:[...Pu(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:Cu(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=Fu(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...Pu(o),i]}]}),r.apply(o,s)}))})})),Cu((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=$u(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Cu(((o,i,a)=>{const[c,u,l]=a;if(n.has(c))return s.apply(i,[c,u,l]);const{id:d,styleId:p}=Fu(Tu([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:Pu(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Cu(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:u,styleId:l}=Fu(Tu([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:Pu(s.parentRule)}),o.apply(s,a)}))}),Cu((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),e.collectFonts&&(h=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=jc(t.fonts,"add",(function(t){return function(n){return iu(Cu((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),Cu((()=>{r.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=Cu((()=>{const e=t.getSelection();if(!e||a&&Tu([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;Vc(a,r,o,s,!0)||Vc(l,r,o,s,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),Pc("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?jc(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return Cu((()=>{Iu.forEach((e=>e.reset())),Tu([r,"optionalAccess",e=>e.disconnect,"call",e=>e()]),o(),s(),i(),a(),c(),u(),l(),d(),p(),h(),f(),m(),g.forEach((e=>e()))}))}function Bu(e){return void 0!==window[e]}function ju(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Hu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function zu(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],s=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=s(n)):"call"!==o&&"optionalCall"!==o||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}class qu{constructor(){this.crossOriginIframeMirror=new Hu(hc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Wu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Hu(hc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Hu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),zu([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]);const n=hu(e);n&&n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case uu.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:uu.IncrementalSnapshot,data:{source:lu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case uu.Meta:case uu.Load:case uu.DomContentLoaded:return!1;case uu.Plugin:return t;case uu.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case uu.IncrementalSnapshot:switch(t.data.source){case lu.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case lu.Drag:case lu.TouchMove:case lu.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case lu.ViewportResize:return!1;case lu.MediaInteraction:case lu.MouseInteraction:case lu.Scroll:case lu.CanvasMutation:case lu.Input:return this.replaceIds(t.data,e,["id"]),t;case lu.StyleSheetRule:case lu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case lu.Font:return t;case lu.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case lu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),zu([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Ya.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Yu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Vu{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Ga(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=Ru({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ou({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),iu((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push($u({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){const t=hu(e),n=function(e){try{return e.contentWindow}catch(e){}}(e);t&&n&&this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(jc(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&ru(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class Gu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Xu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new eu,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Ja(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Ju{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,function(...e){su("requestAnimationFrame")(...e)}((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Ku,Zu;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=Di([e,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Qu=new Ka;function el(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:_,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordDOM:C=!0,recordCanvas:T=!1,recordCrossOriginIframes:I=!1,recordAfter:M=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:A=!1,inlineImages:O=!1,plugins:D,keepIframeSrcFn:L=()=>!1,ignoreCSSAttributes:N=new Set([]),errorHandler:P,onMutation:F,getCanvasManager:$}=e;Eu(P);const U=!I||window.parent===window;let B=!1;if(!U)try{window.parent.document&&(B=!1)}catch(e){B=!0}if(U&&!t)throw new Error("emit function is required");if(!U&&!B)return()=>{};void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Qu.reset();const j=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let z;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let q=0;const W=e=>{for(const t of D||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!B&&(e=w(e)),e};Ku=(e,o)=>{const s=e;if(s.timestamp=Hc(),!Di([Iu,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===uu.FullSnapshot||s.type===uu.IncrementalSnapshot&&s.data.source===lu.Mutation||Iu.forEach((e=>e.unfreeze())),U)Di([t,"optionalCall",e=>e(W(s),o)]);else if(B){const e={type:"rrweb",event:W(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===uu.FullSnapshot)z=s,q=0;else if(s.type===uu.IncrementalSnapshot){if(s.data.source===lu.Mutation&&s.data.isAttachIframe)return;q++;const e=r&&q>=r,t=n&&z&&s.timestamp-z.timestamp>n;(e||t)&&ee(!0)}};const Y=e=>{Ku({type:uu.IncrementalSnapshot,data:{source:lu.Mutation,...e}})},V=e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.Scroll,...e}}),G=e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.CanvasMutation,...e}}),X=new Xu({mutationCb:Y,adoptedStyleSheetCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.AdoptedStyleSheet,...e}})}),J="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new qu:new Wu({mirror:Qu,mutationCb:Y,stylesheetManager:X,recordCrossOriginIframes:I,wrappedEmit:Ku});for(const e of D||[])e.getMirror&&e.getMirror({nodeMirror:Qu,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const K=new Ju,Z=function(e,t){try{return e?e(t):new Gu}catch(e){return console.warn("Unable to initialize CanvasManager"),new Gu}}($,{mirror:Qu,win:window,mutationCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.CanvasMutation,...e}}),recordCanvas:T,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:P}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Yu:new Vu({mutationCb:Y,scrollCb:V,bypassOptions:{onMutation:F,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskInputOptions:j,dataURLOptions:E,maskAttributeFn:y,maskTextFn:b,maskInputFn:v,recordCanvas:T,inlineImages:O,sampling:k,slimDOMOptions:H,iframeManager:J,stylesheetManager:X,canvasManager:Z,keepIframeSrcFn:L,processedNodeManager:K},mirror:Qu}),ee=(e=!1)=>{if(!C)return;Ku({type:uu.Meta,data:{href:window.location.href,width:Wc(),height:qc()}},e),X.reset(),Q.init(),Iu.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Ka,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOM:y=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:C=()=>!1}=t||{};return Lc(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:C,newlyAddedElement:!1})}(document,{mirror:Qu,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:f,maskAllInputs:j,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,slimDOM:H,dataURLOptions:E,recordCanvas:T,inlineImages:O,onSerialize:e=>{Kc(e,Qu)&&J.addIframe(e),Zc(e,Qu)&&X.trackLinkElement(e),Qc(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{J.attachIframe(e,t),e.contentWindow&&Z.addWindow(e.contentWindow),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{X.attachLinkElement(e,t)},keepIframeSrcFn:L});if(!t)return console.warn("Failed to snapshot the document");Ku({type:uu.FullSnapshot,data:{node:t,initialOffset:zc(window)}}),Iu.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&X.adoptStyleSheets(document.adoptedStyleSheets,Qu.getId(document))};Zu=ee;try{const e=[],t=e=>Cu(Uu)({onMutation:F,mutationCb:Y,mousemoveCb:(e,t)=>Ku({type:uu.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.MouseInteraction,...e}}),scrollCb:V,viewportResizeCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.ViewportResize,...e}}),inputCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.Input,...e}}),mediaInteractionCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.MediaInteraction,...e}}),styleSheetRuleCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.StyleSheetRule,...e}}),styleDeclarationCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.StyleDeclaration,...e}}),canvasMutationCb:G,fontCb:e=>Ku({type:uu.IncrementalSnapshot,data:{source:lu.Font,...e}}),selectionCb:e=>{Ku({type:uu.IncrementalSnapshot,data:{source:lu.Selection,...e}})},customElementCb:e=>{Ku({type:uu.IncrementalSnapshot,data:{source:lu.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:j,inlineStylesheet:f,sampling:k,recordDOM:C,recordCanvas:T,inlineImages:O,userTriggeredOnInput:R,collectFonts:A,doc:e,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:L,blockSelector:s,unblockSelector:i,slimDOMOptions:H,dataURLOptions:E,mirror:Qu,iframeManager:J,stylesheetManager:X,shadowDomManager:Q,processedNodeManager:K,canvasManager:Z,ignoreCSSAttributes:N,plugins:Di([D,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>Ku({type:uu.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});J.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Pc("DOMContentLoaded",(()=>{Ku({type:uu.DomContentLoaded,data:{}}),"DOMContentLoaded"===M&&n()}))),e.push(Pc("load",(()=>{Ku({type:uu.Load,data:{}}),"load"===M&&n()}),window))),()=>{e.forEach((e=>e())),K.destroy(),Zu=void 0,xu()}}catch(e){console.warn(e)}}el.mirror=Qu,el.takeFullSnapshot=function(e){if(!Zu)throw new Error("please take full snapshot after start recording");Zu(e)};function tl(e){return e>9999999999?e:1e3*e}function nl(e){return e>9999999999?e/1e3:e}function rl(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:uu.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Ye(t,10,1e3)}}),"console"===t.category))))}function ol(e){return e.closest("button,a")||e}function sl(e){const t=il(e);return t&&t instanceof Element?ol(t):t}function il(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let al;function cl(e){return al||(al=[],$(Fa,"open",(function(e){return function(...t){if(al)try{al.forEach((e=>e()))}catch(e){}return e.apply(Fa,t)}}))),al.push(e),()=>{const t=al?al.indexOf(e):-1;t>-1&&al.splice(t,1)}}const ul=new Set([lu.Mutation,lu.StyleSheetRule,lu.StyleDeclaration,lu.AdoptedStyleSheet,lu.CanvasMutation,lu.Selection,lu.MediaInteraction]);class ll{constructor(e,t,n=rl){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=cl((()=>{this._lastMutation=pl()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!dl.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:nl(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=nl(e)}registerScroll(e=Date.now()){this._lastScroll=nl(e)}registerClick(e){const t=ol(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=pl();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:Fa.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:Fa.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=as((()=>this._checkClicks()),1e3)}}const dl=["A","BUTTON","INPUT"];function pl(){return Date.now()/1e3}function hl(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(ul.has(n)&&e.registerMutation(t.timestamp),n===lu.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===lu.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=el.mirror.getNode(r);o instanceof HTMLElement&&n===du.Click&&e.registerClick(o)}}catch(e){}}function fl(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ml;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ml||(ml={}));const gl=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function _l(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(gl.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const yl=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?sl(e.event):il(e.event),n=E(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return fl({category:`ui.${e.name}`,...vl(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=sl(t.event),s.handleClick(i,a)),rl(e,n)};function vl(e,t){const n=el.mirror.getId(e),r=n&&el.mirror.getNode(n),o=r&&el.mirror.getMeta(r),s=o&&function(e){return e.type===ml.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===ml.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:_l(s.attributes)}}:{}}}function bl(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const u=E(i,{maxStringLength:200})||"<unknown>",l=vl(i,u);return fl({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&rl(e,n)}const Sl={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:El(s),end:El(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=El(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:f,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:El(h),end:El(s),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function wl(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function kl(e){const t=Sl[e.entryType];return t?t(e):null}function El(e){return((K||Fa.performance.timeOrigin)+e)/1e3}function xl(e){const t=e.entries[e.entries.length-1];return Rl(e,"largest-contentful-paint",t&&t.element?[t.element]:void 0)}function Cl(e){return void 0!==e.sources}function Tl(e){const t=[],n=[];for(const r of e.entries)if(Cl(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=el.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Rl(e,"cumulative-layout-shift",n,t)}function Il(e){const t=e.entries[e.entries.length-1];return Rl(e,"first-input-delay",t&&t.target?[t.target]:void 0)}function Ml(e){const t=e.entries[e.entries.length-1];return Rl(e,"interaction-to-next-paint",t&&t.target?[t.target]:void 0)}function Rl(e,t,n,r){const o=e.value,s=e.rating,i=El(o);return{type:"web-vital",name:t,start:i,end:i,data:{value:o,size:o,rating:s,nodeIds:n?n.map((e=>el.mirror.getId(e))):void 0,attributions:r}}}const Al="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;const Ol=["info","warn","error","log"],Dl="[Replay] ";function Ll(e,t="info"){to({category:"console",data:{logger:"replay"},level:t,message:`${Dl}${e}`},{level:t})}const Nl=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=n.captureExceptions,t=n.traceInternals}};return Al?(Ol.forEach((e=>{n[e]=(...n)=>{O[e](Dl,...n),t&&Ll(n.join(""),xo(e))}})),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),O.error(Dl,r),e?Zt(r):t&&Ll(r,"error")},n.infoTick=(...e)=>{O.info(Dl,...e),t&&setTimeout((()=>Ll(e[0])),0)}):Ol.forEach((e=>{n[e]=()=>{}})),n}();class Pl extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Fl{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Ha)throw new Pl;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?tl(e):null}}class $l{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Al&&Nl.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return Al&&Nl.error("Error in compression worker: ",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class Ul{constructor(e){this._worker=new $l(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=tl(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Ha?Promise.reject(new Pl):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Al&&Nl.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Bl{constructor(e){this._fallback=new Fl,this._compression=new Ul(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(Al&&Nl.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const t of e)r.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(e){Al&&Nl.exception(e,"Failed to add events when switching buffers.")}}}function jl({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;Al&&Nl.info("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Bl(n)}catch(e){Al&&Nl.exception(e,"Failed to create compression worker")}}(t);if(e)return e}return Al&&Nl.info("Using simple buffer"),new Fl}function Hl(){try{return"sessionStorage"in Fa&&!!Fa.sessionStorage}catch(e){return!1}}function zl(e){!function(){if(!Hl())return;try{Fa.sessionStorage.removeItem($a)}catch(e){}}(),e.session=void 0}function ql(e){return void 0!==e&&Math.random()<e}function Wl(e){const t=Date.now();return{id:e.id||Z(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Yl(e){if(Hl())try{Fa.sessionStorage.setItem($a,JSON.stringify(e))}catch(e){}}function Vl({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return ql(e)?"session":!!t&&"buffer"}(e,t),s=Wl({sampled:o,previousSessionId:r});return n&&Yl(s),s}function Gl(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Xl(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Gl(e.started,t,r)||Gl(e.lastActivity,n,r)}function Jl(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!Xl(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function Kl({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&function(){if(!Hl())return null;try{const e=Fa.sessionStorage.getItem($a);if(!e)return null;const t=JSON.parse(e);return Al&&Nl.infoTick("Loading existing session"),Wl(t)}catch(e){return null}}();return o?Jl(o,{sessionIdleExpire:e,maxReplayDuration:t})?(Al&&Nl.infoTick("Session in sessionStorage is expired, creating new one..."),Vl(r,{previousSessionId:o.id})):o:(Al&&Nl.infoTick("Creating new session"),Vl(r,{previousSessionId:n}))}function Zl(e,t,n){return!!ed(e,t)&&(Ql(e,t,n),!0)}async function Ql(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o="buffer"===e.recordingMode;try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=function(e,t){try{if("function"==typeof t&&function(e){return e.type===uu.Custom}(e))return t(e)}catch(e){return Al&&Nl.exception(e,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!s)return;return await r.addEvent(s)}catch(t){const n=t&&t instanceof Pl,s=n?"addEventSizeExceeded":"addEvent";if(n&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(t),await e.stop({reason:s});const i=xe();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function ed(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=tl(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Al&&Nl.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function td(e){return!e.type}function nd(e){return"transaction"===e.type}function rd(e){return"feedback"===e.type}function od(e){return(t,n)=>{if(!e.isEnabled()||!td(t)&&!nd(t))return;const r=n&&n.statusCode;!r||r<200||r>=300||(nd(t)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;as((async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}}))}(e,t))}}function sd(e){return t=>{e.isEnabled()&&td(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){rl(e,fl({category:"replay.hydrate-error",data:{url:C()}}))}}(e,t)}}function id(e){const t=xe();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!ad(t))return;const n=function(e){if(!ad(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return fl(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>ja?(n=!0,`${e.slice(0,ja)}`):e;if("object"==typeof e)try{const t=Ye(e,7);return JSON.stringify(t).length>ja?(n=!0,`${JSON.stringify(t,null,2).slice(0,ja)}`):t}catch(e){}return e}));return fl({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return fl(e)}(t);n&&rl(e,n)}(e,t)))}function ad(e){return!!e.category}function cd(){const e=be().getPropagationContext().dsc;e&&delete e.replay_id;const t=Pt();if(t){delete qt(t).replay_id}}function ud(e){return Object.assign(((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!td(t)&&!nd(t)&&!rd(t))return t;if(!e.checkAndHandleExpiredSession())return cd(),t;if(rd(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:uu.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return Al&&Nl.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==Ua&&!(!t.exception||t.type)&&ql(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}function ld(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:uu.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function dd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(ld(e,[n]),!1))))}}function pd(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Al||!e.getOptions()._experiments.traceInternals)&&wi(t,xe())}(e,t.name)||e.addUpdate((()=>(ld(e,[t]),!0))))}function hd(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Sd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function fd(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function md(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Sd(e)];if(!e)return[void 0]}catch(t){return Al&&Nl.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Al&&Nl.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function gd(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function _d(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:W({method:s,statusCode:i,request:a,response:c})}}function yd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function vd(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>Ba,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Ba);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=o,s&&s.length>0&&(r._meta={warnings:s}),r}function bd(e,t){return Object.entries(e).reduce(((n,[r,o])=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=o),n}),{})}function Sd(e){return new URLSearchParams(e).toString()}function wd(e,t){const n=function(e,t=Fa.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Fa.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return F(n,t)}async function kd(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=wd(i,n.networkDetailAllowUrls)&&!wd(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Cd(e[0],t);if(2===e.length)return Cd(e[1],t);return{}}(n,t):{};if(!e)return vd(o,r,void 0);const s=Ed(n),[i,a]=md(s),c=vd(o,r,i);if(a)return gd(c,a);return c}(n,t.input,u):yd(u),h=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&void 0!==o)return yd(o);const s=r?xd(r.headers,n):{};if(!r||!t&&void 0!==o)return vd(s,o,void 0);const[i,a]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Al&&Nl.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=as((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?(Al&&Nl.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(Al&&Nl.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(r),c=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const s=e&&e.length&&void 0===n?hd(e):n;return r?vd(o,s,t?e:void 0):yd(s)}catch(e){return Al&&Nl.exception(e,"Failed to serialize response body"),vd(o,n,void 0)}}(i,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:s});if(a)return gd(c,a);return c}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:h}}(e,t,n),o=_d("resource.fetch",r);pd(n.replay,o)}catch(e){Al&&Nl.exception(e,"Failed to capture fetch breadcrumb")}}function Ed(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function xd(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Cd(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?xd(n,t):Array.isArray(n)?{}:bd(n,t):{}}async function Td(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!wd(c,n.networkDetailAllowUrls)||wd(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:yd(d),response:yd(p)}}const h=a[Os],f=h?bd(h.request_headers,n.networkRequestHeaders):{},m=bd(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e}),{})}(a),n.networkResponseHeaders),[g,_]=n.networkCaptureBodies?md(i):[void 0],[y,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Al&&Nl.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Al&&Nl.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Al&&Nl.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=vd(f,d,g),S=vd(m,p,y);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:_?gd(b,_):b,response:v?gd(S,v):S}}(e,t,n),o=_d("resource.xhr",r);pd(n.replay,o)}catch(e){Al&&Nl.exception(e,"Failed to capture xhr breadcrumb")}}function Id(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=hd(r),s=n.getResponseHeader("content-length")?fd(n.getResponseHeader("content-length")):function(e,t){try{return hd("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}function Md(e){const t=xe();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Id(t,n),Td(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t){const{input:n,response:r}=t,o=hd(n?Ed(n):void 0),s=r?fd(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}(t,n),kd(t,n,e))}catch(e){Al&&Nl.exception(e,"Error when enriching network breadcrumb")}}(a,e,t)))}catch(e){}}function Rd(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}const Ad=s.navigator;function Od(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Al&&Nl.warn("Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&hl(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Zl(e,n,o))return!0;if(!o)return!1;const t=e.session;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Zl(e,function(e){const t=e.getOptions();return{type:uu.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(Al&&Nl.info(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&Yl(t))}return t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0}))}}async function Dd({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=xe(),p=be(),h=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&h&&f&&s.sampled))return Me({});const m={type:"replay_event",replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,o);const s=await Xt(e.getOptions(),r,o,t,e,Se());if(!s)return null;s.platform=s.platform||"javascript";const i=e.getSdkMetadata(),{name:a,version:c}=i&&i.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),Al&&Nl.info("An event processor returned `null`, will not send event."),Me({});delete g.sdkProcessingMetadata;const _=function(e,t,n,r){return Ln(Yn(e,Wn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,i,f,d.getOptions().tunnel);let y;try{y=await h.send(_)}catch(e){const t=new Error(Ua);try{t.cause=e}catch(e){}throw t}if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new Ld(y.statusCode);const v=yo({},y);if(_o(v,"replay"))throw new Nd(v);return y}class Ld extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Nd extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Pd(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Dd(e),!0}catch(n){if(n instanceof Ld||n instanceof Nd)throw n;if(tn("Replays",{_retryCount:t.count}),r&&r(n),t.count>=3){const e=new Error(`${Ua} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{as((async()=>{try{await Pd(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Fd="__THROTTLED";function $d(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":Fd}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class Ud{constructor({options:e,recordingOptions:t}){Ud.prototype.__init.call(this),Ud.prototype.__init2.call(this),Ud.prototype.__init3.call(this),Ud.prototype.__init4.call(this),Ud.prototype.__init5.call(this),Ud.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function u(){return o&&clearTimeout(o),o=as(a,t),i&&void 0===s&&(s=as(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==s?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=$d(((e,t)=>function(e,t,n){return ed(e,t)?Ql(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;if(o&&(this.clickDetector=new ll(this,o)),Al){const t=e._experiments;Nl.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){Al&&Nl.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Al&&Nl.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):Al&&Nl.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(Al&&Nl.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(Al&&Nl.info("Buffering is in progress, call `flush()` to save the replay"));Al&&Nl.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Kl({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(Al&&Nl.info("Buffering is in progress, call `flush()` to save the replay"));Al&&Nl.infoTick("Starting replay in buffer mode");const e=Kl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=el({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Od(this),.../iPhone|iPad|iPod/i.test(Ad&&Ad.userAgent||"")||/Macintosh/i.test(Ad&&Ad.userAgent||"")&&Ad&&Ad.maxTouchPoints&&Ad.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Al&&Nl.info("Stopping Replay"+(t?` triggered by ${t}`:"")),cd(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,zl(this)}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Al&&Nl.info("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Al&&Nl.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Al&&Nl.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Gl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Fa.location.pathname}${Fa.location.hash}${Fa.location.search}`,t=`${Fa.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Fd){const e=fl({category:"replay.throttled"});this.addUpdate((()=>!Zl(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Pt(),t=e&&Nt(e),n=(t&&It(t).data||{})[Xe];if(t&&n&&["route","custom"].includes(n))return It(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=jl({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=Kl({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Jl(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Fa.document.addEventListener("visibilitychange",this._handleVisibilityChange),Fa.addEventListener("blur",this._handleWindowBlur),Fa.addEventListener("focus",this._handleWindowFocus),Fa.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=xe();Ms(yl(e)),Fs(dd(e)),id(e),Md(e),pn(ud(e)),t&&(t.on("beforeSendEvent",sd(e)),t.on("afterSendEvent",od(e)),t.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),t.on("spanStart",(t=>{e.lastActiveSpan=t})),t.on("spanEnd",(t=>{e.lastActiveSpan=t})),t.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(Ta(e,n))})),r.push(Ea(wl(xl,e)),ka(wl(Tl,e)),xa(wl(Il,e)),Ca(wl(Ml,e))),()=>{r.forEach((e=>e()))}}(this)}_removeListeners(){try{Fa.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Fa.removeEventListener("blur",this._handleWindowBlur),Fa.removeEventListener("focus",this._handleWindowFocus),Fa.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===Fa.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=fl({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=fl({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{bl(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Xl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Al&&Nl.info("Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:uu.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(kl).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter((e=>e.start>=t))}return Promise.all(ld(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(ld(e,[Rd(Fa.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Pd({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=xe();if(t){const n=e instanceof Nd?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else Al&&Nl.error("No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Al&&Nl.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return Al&&Nl.info(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),void(r&&this._debouncedFlush());const s=this.eventBuffer;s&&0===this.session.segmentId&&!s.hasCheckout&&Al&&Nl.info("Flushing initial segment without checkout.");const i=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,i&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Yl(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=fl({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Bd(e,t){return[...e,...t].join(",")}const jd='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Hd=["content-length","content-type","accept"];let zd=!1;const qd=e=>new Wd(e);class Wd{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:d=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:_=!0,networkRequestHeaders:y=[],networkResponseHeaders:v=[],mask:b=[],maskAttributes:S=["title","placeholder"],unmask:w=[],block:k=[],unblock:E=[],ignore:x=[],maskFn:C,beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M}={}){this.name=Wd.id;const R=function({mask:e,unmask:t,block:n,unblock:r,ignore:o}){return{maskTextSelector:Bd(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Bd(t,[]),blockSelector:Bd(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:Bd(r,[]),ignoreSelector:Bd(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:b,unmask:w,block:k,unblock:E,ignore:x});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:S,maskAllText:c,privacyOptions:R,key:e,value:t,el:n}),...R,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,za),stickySession:o,useCompression:s,workerUrl:i,blockAllMedia:l,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:d,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:f,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:_,networkRequestHeaders:Yd(y),networkResponseHeaders:Yd(v),beforeAddRecordingEvent:T,beforeErrorSampling:I,onError:M,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${jd}`:jd),this._isInitialized&&Ni())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return zd}set _isInitialized(e){zd=e}afterAllSetup(e){Ni()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay&&this._replay.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...W(e)},o=Tn(n.replaysSessionSampleRate),s=Tn(n.replaysOnErrorSampleRate);null==o&&null==s&&A((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));null!=o&&(r.sessionSampleRate=o);null!=s&&(r.errorSampleRate=s);return r}(this._initialOptions,e);this._replay=new Ud({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function Yd(e){return[...Hd,...e.map((e=>e.toLowerCase()))]}function Vd(){const e=xe();return e&&e.getIntegrationByName("Replay")}var Gd;function Xd(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Xd(e.parentNode,t,n,r+1):-1}function Jd(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}Wd.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Gd||(Gd={}));const Kd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Zd={map:{},getId(){return console.error(Kd),-1},getNode(){return console.error(Kd),null},removeNodeFromMap(){console.error(Kd)},has(){return console.error(Kd),!1},reset(){console.error(Kd)}};function Qd(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){sp((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Qd(e,t,s||{},!0)}function ep(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function tp(e,t,n,r,o){if(!e)return!1;const s=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!s)return!1;const i=Xd(s,Jd(t,n));let a=-1;return!(i<0)&&(r&&(a=Xd(s,Jd(null,r))),i>-1&&a<0||i<a)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Zd=new Proxy(Zd,{get(e,t,n){return"map"===t&&console.error(Kd),Reflect.get(e,t,n)}})),/[1-9][0-9]{12}/.test(Date.now().toString());const np={};function rp(e){const t=np[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return np[e]=r.bind(window)}function op(...e){return rp("requestAnimationFrame")(...e)}function sp(...e){return rp("setTimeout")(...e)}var ip=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ip||{});let ap;const cp=e=>{if(!ap)return e;return(...t)=>{try{return e(...t)}catch(e){if(ap&&!0===ap(e))return()=>{};throw e}}};for(var up="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),dp=0;dp<64;dp++)lp[up.charCodeAt(dp)]=dp;const pp=new Map;const hp=(e,t,n)=>{if(!e||!gp(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=pp.get(e);return n||(n=new Map,pp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function fp(e,t,n){if(e instanceof Array)return e.map((e=>fp(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=up[n[t]>>2],o+=up[(3&n[t])<<4|n[t+1]>>4],o+=up[(15&n[t+1])<<2|n[t+2]>>6],o+=up[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[fp(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[fp(e.data,t,n),e.width,e.height]}}if(gp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:hp(e,t,n)}}return e}const mp=(e,t,n)=>e.map((e=>fp(e,t,n))),gp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function _p(e,t,n,r,o){const s=[];try{const i=ep(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!tp(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function yp(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const u=ep(e,i,(function(e){return function(...c){const u=e.apply(this,c);if(hp(u,a,this),"tagName"in this.canvas&&!tp(this.canvas,r,o,s)){const e=mp(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const o=Qd(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(o)}return c}class vp{reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,Di([this,"access",e=>e.worker,"optionalAccess",e=>e.terminate,"call",e=>e()]),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&(ap=u),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),e.enableManualSnapshot||cp((()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,o,s,i,{dataURLOptions:c})}))()}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:o,recordCanvas:s,enableManualSnapshot:i}=this.options;if(!this.windowsSet.has(e)){if(i)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));cp((()=>{if(s&&"all"===t&&this.initCanvasMutationObserver(e,n,r,o),s&&"number"==typeof t){const t=_p(e,n,r,o,!0);this.restoreHandlers.push((()=>{t()}))}}))(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:ip["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})},e}initCanvasFPSObserver(e,t,n,r,o,s){const i=this.takeSnapshot(!1,e,t,n,r,o,s.dataURLOptions);this.restoreHandlers.push((()=>{cancelAnimationFrame(i)}))}initCanvasMutationObserver(e,t,n,r){const o=_p(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=ep(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return tp(this.canvas,n,r,o)||sp((()=>{const n=mp(i,t,this);e(this.canvas,{type:ip["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch(n){const r=Qd(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:ip["2D"],property:a,args:[t],setter:!0})}});s.push(r)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o){const s=[];return s.push(...yp(t.WebGLRenderingContext.prototype,ip.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&s.push(...yp(t.WebGL2RenderingContext.prototype,ip.WebGL2,e,n,r,o,0,t)),()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push((()=>{o(),s(),i()}))}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push((()=>{cancelAnimationFrame(n)}))}takeSnapshot(e,t,n,r,o,s,i,a){const c=1e3/t;let u,l=0;const d=e=>{if(e)return[e];const t=[],s=e=>{e.querySelectorAll("canvas").forEach((e=>{tp(e,n,r,o)||t.push(e)}))};for(const e of this.windows){const t=e.deref();t&&s(t.document)}for(const e of this.shadowDoms){const t=e.deref();t&&s(t)}return t},p=t=>{this.windows.length&&(l&&t-l<c?u=op(p):(l=t,d(a).forEach((t=>{if(!this.mirror.hasNode(t))return;const n=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(n)&&t.width&&t.height){if(this.snapshotInProgressMap.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Di([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{Di([this,"access",e=>e.worker,"optionalAccess",e=>e.postMessage,"call",r=>r({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:i,maxCanvasSize:s},[e])])})).catch((e=>{cp((()=>{throw e}))()}))}})),e||(u=op(p))))};return u=op(p),u}startPendingCanvasMutationFlusher(){op((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,op(e)};op(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),op((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}const bp={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Sp=1280,wp=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Sp):Sp,n?Math.min(n,Sp):Sp]};let o;const s=new Promise((e=>o=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new vp({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...bp[e||"medium"]||bp.medium}},async snapshot(e){(await s).snapshot(e)}}},kp=s,Ep=kp.document,xp=kp.navigator,Cp="Report a Bug",Tp=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=xe();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&be().setTags(e.tags);const r=To({source:"api",url:C(),...e},t);return new Promise(((e,t)=>{const o=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3),s=n.on("afterSendEvent",((n,i)=>{if(n.event_id===r)return clearTimeout(o),s(),i&&"number"==typeof i.statusCode&&i.statusCode>=200&&i.statusCode<300?e(r):i&&"number"==typeof i.statusCode&&0===i.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):i&&"number"==typeof i.statusCode&&403===i.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},Ip="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Mp(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function Rp(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}function Ap({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=Ep.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||Cp,o.appendChild(function(){const e=e=>kp.document.createElementNS("http://www.w3.org/2000/svg",e),t=Rp(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=Rp(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Rp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=Rp(e("clipPath"),{id:"clip0_57_80"}),i=Rp(e("rect"),{width:"20",height:"20",fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),t}()),e){const t=Ep.createElement("span");t.appendChild(Ep.createTextNode(e)),o.appendChild(t)}const s=function(e){const t=Ep.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(r);return{el:o,appendToDom(){n.appendChild(s),n.appendChild(o)},removeFromDom(){n.removeChild(o),n.removeChild(s)},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const Op="rgba(88, 74, 192, 1)",Dp={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Op,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Lp={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Op,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Np(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const Pp=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:r="sentry-feedback",autoInject:o=!0,showBranding:s=!0,isEmailRequired:i=!1,isNameRequired:a=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:l=!0,useSentryUser:d={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:f,colorScheme:m="system",themeLight:g={},themeDark:_={},addScreenshotButtonLabel:y="Add a screenshot",cancelButtonLabel:v="Cancel",confirmButtonLabel:b="Confirm",emailLabel:S="Email",emailPlaceholder:w="your.email@example.org",formTitle:k="Report a Bug",isRequiredLabel:E="(required)",messageLabel:x="Description",messagePlaceholder:C="What's the bug? What did you expect?",nameLabel:T="Name",namePlaceholder:I="Your Name",removeScreenshotButtonLabel:M="Remove screenshot",submitButtonLabel:R="Send Bug Report",successMessageText:A="Thank you for your report!",triggerLabel:D=Cp,triggerAriaLabel:L="",onFormOpen:N,onFormClose:P,onSubmitSuccess:F,onSubmitError:$,onFormSubmitted:U}={})=>{const B={id:r,autoInject:o,showBranding:s,isEmailRequired:i,isNameRequired:a,showEmail:c,showName:u,enableScreenshot:l,useSentryUser:d,tags:p,styleNonce:h,scriptNonce:f,colorScheme:m,themeDark:_,themeLight:g,triggerLabel:D,triggerAriaLabel:L,cancelButtonLabel:v,submitButtonLabel:R,confirmButtonLabel:b,formTitle:k,emailLabel:S,emailPlaceholder:w,messageLabel:x,messagePlaceholder:C,nameLabel:T,namePlaceholder:I,successMessageText:A,isRequiredLabel:E,addScreenshotButtonLabel:y,removeScreenshotButtonLabel:M,onFormClose:P,onFormOpen:N,onSubmitError:$,onSubmitSuccess:F,onFormSubmitted:U};let j=null,H=[];const z=e=>{if(!j){const t=Ep.createElement("div");t.id=String(e.id),Ep.body.appendChild(t),j=t.attachShadow({mode:"open"}),j.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=Ep.createElement("style");return o.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${Np("dark"===e?{...Lp,...t}:{...Dp,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Np({...Lp,...t})}\n  }\n}`:""}\n}\n`,r&&o.setAttribute("nonce",r),o}(e))}return j},q=async r=>{const o=r.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(xp.userAgent)||/Macintosh/i.test(xp.userAgent)&&xp.maxTouchPoints&&xp.maxTouchPoints>1||!isSecureContext);let s,i;try{s=(t?t():await e("feedbackModalIntegration",f))(),Sn(s)}catch(e){throw Ip&&O.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const t=o?n?n():await e("feedbackScreenshotIntegration",f):void 0;t&&(i=t(),Sn(i))}catch(e){Ip&&O.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const a=s.createDialog({options:{...r,onFormClose:()=>{a&&a.close(),r.onFormClose&&r.onFormClose()},onFormSubmitted:()=>{a&&a.close(),r.onFormSubmitted&&r.onFormSubmitted()}},screenshotIntegration:i,sendFeedback:Tp,shadow:z(r)});return a},W=(e,t={})=>{const n=Mp(B,t),r="string"==typeof e?Ep.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)throw Ip&&O.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let o=null;const s=async()=>{o||(o=await q({...n,onFormSubmitted:()=>{o&&o.removeFromDom(),n.onFormSubmitted&&n.onFormSubmitted()}})),o.appendToDom(),o.open()};r.addEventListener("click",s);const i=()=>{H=H.filter((e=>e!==i)),o&&o.removeFromDom(),o=null,r.removeEventListener("click",s)};return H.push(i),i},Y=(e={})=>{const t=Mp(B,e),n=z(t),r=Ap({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:h});return W(r.el,{...t,onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}}),r};return{name:"Feedback",setupOnce(){Ni()&&B.autoInject&&("loading"===Ep.readyState?Ep.addEventListener("DOMContentLoaded",(()=>Y().appendToDom())):Y().appendToDom())},attachTo:W,createWidget(e={}){const t=Y(Mp(B,e));return t.appendToDom(),t},async createForm(e={}){return q(Mp(B,e))},remove(){j&&(j.parentElement&&j.parentElement.remove(),j=null),H.forEach((e=>e())),H=[]}}};function Fp(){const e=xe();return e&&e.getIntegrationByName("Feedback")}var $p,Up,Bp,jp,Hp,zp,qp,Wp={},Yp=[],Vp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Gp=Array.isArray;function Xp(e,t){for(var n in t)e[n]=t[n];return e}function Jp(e){var t=e.parentNode;t&&t.removeChild(e)}function Kp(e,t,n){var r,o,s,i={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?$p.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===i[s]&&(i[s]=e.defaultProps[s]);return Zp(e,i,r,o,null)}function Zp(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++Bp:o,__i:-1,__u:0};return null==o&&null!=Up.vnode&&Up.vnode(s),s}function Qp(e){return e.children}function eh(e,t){this.props=e,this.context=t}function th(e,t){if(null==t)return e.__?th(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?th(e):null}function nh(e,t,n){var r,o=e.__v,s=o.__e,i=e.__P;if(i)return(r=Xp({},o)).__v=o.__v+1,Up.vnode&&Up.vnode(r),hh(i,r,o,e.__n,void 0!==i.ownerSVGElement,32&o.__u?[s]:null,t,null==s?th(o):s,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&rh(r),r}function rh(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return rh(e)}}function oh(e){(!e.__d&&(e.__d=!0)&&jp.push(e)&&!sh.__r++||Hp!==Up.debounceRendering)&&((Hp=Up.debounceRendering)||zp)(sh)}function sh(){var e,t,n,r=[],o=[];for(jp.sort(qp);e=jp.shift();)e.__d&&(n=jp.length,t=nh(e,r,o)||t,0===n||jp.length>n?(fh(r,t,o),o.length=r.length=0,t=void 0,jp.sort(qp)):t&&Up.__c&&Up.__c(t,Yp));t&&fh(r,t,o),sh.__r=0}function ih(e,t,n,r,o,s,i,a,c,u,l){var d,p,h,f,m,g=r&&r.__k||Yp,_=t.length;for(n.__d=c,function(e,t,n){var r,o,s,i,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(o=e.__k[r]=null==(o=t[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?Zp(null,o,null,null,o):Gp(o)?Zp(Qp,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?Zp(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,a=ch(o,n,i=r+d,l),o.__i=a,s=null,-1!==a&&(l--,(s=n[a])&&(s.__u|=131072)),null==s||null===s.__v?(-1==a&&d--,"function"!=typeof o.type&&(o.__u|=65536)):a!==i&&(a===i+1?d++:a>i?l>c-i?d+=a-i:d--:d=a<i&&a==i-1?a-i:0,a!==r+d&&(o.__u|=65536))):(s=n[r])&&null==s.key&&s.__e&&(s.__e==e.__d&&(e.__d=th(s)),_h(s,s,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(s=n[r])&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=th(s)),_h(s,s))}(n,t,g),c=n.__d,d=0;d<_;d++)null!=(h=n.__k[d])&&"boolean"!=typeof h&&"function"!=typeof h&&(p=-1===h.__i?Wp:g[h.__i]||Wp,h.__i=d,hh(e,h,p,o,s,i,a,c,u,l),f=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&gh(p.ref,null,h),l.push(h.ref,h.__c||f,h)),null==m&&null!=f&&(m=f),65536&h.__u||p.__k===h.__k?c=ah(h,c,e):"function"==typeof h.type&&void 0!==h.__d?c=h.__d:f&&(c=f.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=c,n.__e=m}function ah(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=ah(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function ch(e,t,n,r){var o=e.key,s=e.type,i=n-1,a=n+1,c=t[n];if(null===c||c&&o==c.key&&s===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&!(131072&c.__u)&&o==c.key&&s===c.type)return i;i--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&s===c.type)return a;a++}}return-1}function uh(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Vp.test(t)?n:n+"px"}function lh(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||uh(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||uh(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?ph:dh,s)):e.removeEventListener(t,s?ph:dh,s);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function dh(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Up.event?Up.event(e):e)}}function ph(e){if(this.l)return this.l[e.type+!0](Up.event?Up.event(e):e)}function hh(e,t,n,r,o,s,i,a,c,u){var l,d,p,h,f,m,g,_,y,v,b,S,w,k,E,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(l=Up.__b)&&l(t);e:if("function"==typeof x)try{if(_=t.props,y=(l=x.contextType)&&r[l.__c],v=l?y?y.props.value:l.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,v):(t.__c=d=new eh(_,v),d.constructor=x,d.render=yh),y&&y.sub(d),d.props=_,d.state||(d.state={}),d.context=v,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=Xp({},d.__s)),Xp(d.__s,x.getDerivedStateFromProps(_,d.__s))),h=d.props,f=d.state,d.__v=t,p)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&i.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,v),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,f,m)}))}if(d.context=v,d.props=_,d.__P=e,d.__e=!1,S=Up.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do{d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=Xp(Xp({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(h,f)),ih(e,Gp(E=null!=l&&l.type===Qp&&null==l.key?l.props.children:l)?E:[E],t,n,r,o,s,i,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&i.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=s?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Up.__e(e,t,n)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=mh(n.__e,t,n,r,o,s,i,c,u);(l=Up.diffed)&&l(t)}function fh(e,t,n){for(var r=0;r<n.length;r++)gh(n[r],n[++r],n[++r]);Up.__c&&Up.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Up.__e(e,t.__v)}}))}function mh(e,t,n,r,o,s,i,a,c){var u,l,d,p,h,f,m,g=n.props,_=t.props,y=t.type;if("svg"===y&&(o=!0),null!=s)for(u=0;u<s.length;u++)if((h=s[u])&&"setAttribute"in h==!!y&&(y?h.localName===y:3===h.nodeType)){e=h,s[u]=null;break}if(null==e){if(null===y)return document.createTextNode(_);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,_.is&&_),s=null,a=!1}if(null===y)g===_||a&&e.data===_||(e.data=_);else{if(s=s&&$p.call(e.childNodes),g=n.props||Wp,!a&&null!=s)for(g={},u=0;u<e.attributes.length;u++)g[(h=e.attributes[u]).name]=h.value;for(u in g)h=g[u],"children"==u||("dangerouslySetInnerHTML"==u?d=h:"key"===u||u in _||lh(e,u,null,h,o));for(u in _)h=_[u],"children"==u?p=h:"dangerouslySetInnerHTML"==u?l=h:"value"==u?f=h:"checked"==u?m=h:"key"===u||a&&"function"!=typeof h||g[u]===h||lh(e,u,h,g[u],o);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),ih(e,Gp(p)?p:[p],t,n,r,o&&"foreignObject"!==y,s,i,s?s[0]:n.__k&&th(n,0),a,c),null!=s)for(u=s.length;u--;)null!=s[u]&&Jp(s[u]);a||(u="value",void 0!==f&&(f!==e[u]||"progress"===y&&!f||"option"===y&&f!==g[u])&&lh(e,u,f,g[u],!1),u="checked",void 0!==m&&m!==e[u]&&lh(e,u,m,g[u],!1))}return e}function gh(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Up.__e(e,n)}}function _h(e,t,n){var r,o;if(Up.unmount&&Up.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||gh(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Up.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&_h(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||Jp(e.__e),e.__=e.__e=e.__d=void 0}function yh(e,t,n){return this.constructor(e,n)}$p=Yp.slice,Up={__e:function(e,t,n,r){for(var o,s,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(e)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),i=o.__d),i)return o.__E=o}catch(t){e=t}throw e}},Bp=0,eh.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Xp({},this.state),"function"==typeof e&&(e=e(Xp({},n),this.props)),e&&Xp(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),oh(this))},eh.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),oh(this))},eh.prototype.render=Qp,jp=[],zp="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qp=function(e,t){return e.__v.__b-t.__v.__b},sh.__r=0;var vh,bh,Sh,wh,kh=0,Eh=[],xh=[],Ch=Up,Th=Ch.__b,Ih=Ch.__r,Mh=Ch.diffed,Rh=Ch.__c,Ah=Ch.unmount,Oh=Ch.__;function Dh(e,t){Ch.__h&&Ch.__h(bh,e,kh||t),kh=0;var n=bh.__H||(bh.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:xh}),n.__[e]}function Lh(e){return kh=1,Nh(Wh,e)}function Nh(e,t,n){var r=Dh(vh++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Wh(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=bh,!bh.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var i=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&r.__c.props===e)&&(!s||s.call(this,e,t,n))};bh.u=!0;var s=bh.shouldComponentUpdate,i=bh.componentWillUpdate;bh.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,o(e,t,n),s=r}i&&i.call(this,e,t,n)},bh.shouldComponentUpdate=o}return r.__N||r.__}function Ph(e,t){var n=Dh(vh++,4);!Ch.__s&&qh(n.__H,t)&&(n.__=e,n.i=t,bh.__h.push(n))}function Fh(e,t){var n=Dh(vh++,7);return qh(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function $h(e,t){return kh=8,Fh((function(){return e}),t)}function Uh(){for(var e;e=Eh.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Hh),e.__H.__h.forEach(zh),e.__H.__h=[]}catch(t){e.__H.__h=[],Ch.__e(t,e.__v)}}Ch.__b=function(e){bh=null,Th&&Th(e)},Ch.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Oh&&Oh(e,t)},Ch.__r=function(e){Ih&&Ih(e),vh=0;var t=(bh=e.__c).__H;t&&(Sh===bh?(t.__h=[],bh.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=xh,e.__N=e.i=void 0}))):(t.__h.forEach(Hh),t.__h.forEach(zh),t.__h=[],vh=0)),Sh=bh},Ch.diffed=function(e){Mh&&Mh(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Eh.push(t)&&wh===Ch.requestAnimationFrame||((wh=Ch.requestAnimationFrame)||jh)(Uh)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==xh&&(e.__=e.__V),e.i=void 0,e.__V=xh}))),Sh=bh=null},Ch.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Hh),e.__h=e.__h.filter((function(e){return!e.__||zh(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Ch.__e(n,e.__v)}})),Rh&&Rh(e,t)},Ch.unmount=function(e){Ah&&Ah(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Hh(e)}catch(e){t=e}})),n.__H=void 0,t&&Ch.__e(t,n.__v))};var Bh="function"==typeof requestAnimationFrame;function jh(e){var t,n=function(){clearTimeout(r),Bh&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Bh&&(t=requestAnimationFrame(n))}function Hh(e){var t=bh,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),bh=t}function zh(e){var t=bh;e.__c=e.__(),bh=t}function qh(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Wh(e,t){return"function"==typeof t?t(e):t}const Yh={__proto__:null,useCallback:$h,useContext:function(e){var t=bh.context[e.__c],n=Dh(vh++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(bh)),t.props.value):e.__},useDebugValue:function(e,t){Ch.useDebugValue&&Ch.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Dh(vh++,3);!Ch.__s&&qh(n.__H,t)&&(n.__=e,n.i=t,bh.__H.__h.push(n))},useErrorBoundary:function(e){var t=Dh(vh++,10),n=Lh();return t.__=e,bh.componentDidCatch||(bh.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Dh(vh++,11);if(!e.__){for(var t=bh.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){kh=6,Ph((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:Ph,useMemo:Fh,useReducer:Nh,useRef:function(e){return kh=5,Fh((function(){return{current:e}}),[])},useState:Lh};function Vh(){const e=e=>Ep.createElementNS("http://www.w3.org/2000/svg",e),t=Rp(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Rp(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Gh({options:e}){const t=Fh((()=>({__html:Vh().outerHTML})),[]);return Kp("h2",{class:"dialog__header"},Kp("span",{class:"dialog__title"},e.formTitle),e.showBranding?Kp("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Xh(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Jh({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:l,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:p,cancelButtonLabel:h,emailLabel:f,emailPlaceholder:m,isEmailRequired:g,isNameRequired:_,messageLabel:y,messagePlaceholder:v,nameLabel:b,namePlaceholder:S,submitButtonLabel:w,isRequiredLabel:k}=e,[E,x]=Lh(null),[C,T]=Lh(!1),I=u&&u.input,[M,R]=Lh(null),A=$h((e=>{R(e),T(!1)}),[]),D=$h((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:f,isEmailRequired:g,isNameRequired:_,messageLabel:y,nameLabel:b});return t.length>0?x(`Please enter in the following required fields: ${t.join(", ")}`):x(null),0===t.length}),[f,g,_,y,b]),L=$h((async e=>{try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(u&&C?u.value():void 0),r={name:Xh(t,"name"),email:Xh(t,"email"),message:Xh(t,"message"),attachments:n?[n]:void 0};if(!D(r))return;try{await o({name:r.name,email:r.email,message:r.message,source:"widget",tags:l},{attachments:r.attachments}),s(r)}catch(e){Ip&&O.error(e),x(e),i(e)}}catch(e){}}),[u&&C,s,i]);return Kp("form",{class:"form",onSubmit:L},I&&C?Kp(I,{onError:A}):null,Kp("div",{class:"form__right","data-sentry-feedback":!0},Kp("div",{class:"form__top"},E?Kp("div",{class:"form__error-container"},E):null,c?Kp("label",{for:"name",class:"form__label"},Kp(Kh,{label:b,isRequiredLabel:k,isRequired:_}),Kp("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:S,required:_,type:"text"})):Kp("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?Kp("label",{for:"email",class:"form__label"},Kp(Kh,{label:f,isRequiredLabel:k,isRequired:g}),Kp("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):Kp("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Kp("label",{for:"message",class:"form__label"},Kp(Kh,{label:y,isRequiredLabel:k,isRequired:!0}),Kp("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:v,required:!0,rows:5})),I?Kp("label",{for:"screenshot",class:"form__label"},Kp("button",{class:"btn btn--default",type:"button",onClick:()=>{R(null),T((e=>!e))}},C?p:d),M?Kp("div",{class:"form__error-container"},M.message):null):null),Kp("div",{class:"btn-group"},Kp("button",{class:"btn btn--primary",type:"submit"},w),Kp("button",{class:"btn btn--default",type:"button",onClick:r},h))))}function Kh({label:e,isRequired:t,isRequiredLabel:n}){return Kp("span",{class:"form__label__text"},e,t&&Kp("span",{class:"form__label__text--required"},n))}function Zh(){const e=e=>kp.document.createElementNS("http://www.w3.org/2000/svg",e),t=Rp(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),n=Rp(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Rp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Rp(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=Rp(e("clipPath"),{id:"clip0_57_156"}),a=Rp(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),t}function Qh({open:e,onFormSubmitted:t,...n}){const r=n.options,o=Fh((()=>({__html:Zh().outerHTML})),[]),[s,i]=Lh(null),a=$h((()=>{s&&(clearTimeout(s),i(null)),t()}),[s]),c=$h((e=>{n.onSubmitSuccess(e),i(setTimeout((()=>{t(),i(null)}),5e3))}),[t]);return Kp(Qp,null,s?Kp("div",{class:"success__position",onClick:a},Kp("div",{class:"success__content"},r.successMessageText,Kp("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):Kp("dialog",{class:"dialog",onClick:r.onFormClose,open:e},Kp("div",{class:"dialog__position"},Kp("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()}},Kp(Gh,{options:r}),Kp(Jh,{...n,onSubmitSuccess:c})))))}const ef=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,s=e.useSentryUser,i=function(){const e=be().getUser(),t=Se().getUser(),n=we().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),a=Ep.createElement("div"),c=function(e){const t=Ep.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n  width: var(--form-width, 272px);\n}\n\n@media (max-width: 600px) {\n  .dialog__title {\n    width: auto;\n  }\n}\n\n.dialog__position:has(.editor) .dialog__title {\n  width: auto;\n}\n\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: var(--form-width, 100%);\n}\n\n.dialog__position:has(.editor) .form__right {\n  width: var(--form-width, 272px);\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(e.styleNonce);let u="";const l={get el(){return a},appendToDom(){o.contains(c)||o.contains(a)||(o.appendChild(c),o.appendChild(a))},removeFromDom(){o.removeChild(a),o.removeChild(c),Ep.body.style.overflow=u},open(){p(!0),e.onFormOpen&&e.onFormOpen(),u=Ep.body.style.overflow,Ep.body.style.overflow="hidden"},close(){p(!1),Ep.body.style.overflow=u}},d=t&&t.createInput({h:Kp,hooks:Yh,dialog:l,options:e}),p=t=>{!function(e,t,n){var r,o,s,i;Up.__&&Up.__(e,t),o=(r="function"==typeof n)?null:t.__k,s=[],i=[],hh(t,e=(!r&&n||t).__k=Kp(Qp,null,[e]),o||Wp,Wp,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?$p.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r,i),e.__d=void 0,fh(s,e,i)}(Kp(Qh,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:s&&i&&i[s.name]||"",defaultEmail:s&&i&&i[s.email]||"",onFormClose:()=>{p(!1),e.onFormClose&&e.onFormClose()},onSubmit:n,onSubmitSuccess:t=>{p(!1),e.onSubmitSuccess&&e.onSubmitSuccess(t)},onSubmitError:t=>{e.onSubmitError&&e.onSubmitError(t)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted()},open:t}),a)};return l}});function tf(e){const t=Ep.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container canvas {\n  object-fit: contain;\n  position: relative;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n`,e&&t.setAttribute("nonce",e),t}const nf=33,rf=kp.devicePixelRatio,of=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),sf=e=>{const t=e.clientHeight,n=e.clientWidth,r=e.width/e.height;let o=t*r,s=t;o>n&&(o=n,s=n/r);const i=(n-o)/2,a=(t-s)/2;return{startX:i,startY:a,endX:o+i,endY:s+a}};function af({h:e,hooks:t,imageBuffer:n,dialog:r,options:o}){const s=function({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:o}){e.useEffect((()=>{(async()=>{t();const e=await xp.mediaDevices.getDisplayMedia({video:{width:kp.innerWidth*kp.devicePixelRatio,height:kp.innerHeight*kp.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),o=Ep.createElement("video");await new Promise(((t,r)=>{o.srcObject=e,o.onloadedmetadata=()=>{n(o),e.getTracks().forEach((e=>e.stop())),t()},o.play().catch(r)})),r()})().catch(o)}),[])}}({hooks:t});return function({onError:i}){const a=t.useMemo((()=>({__html:tf(o.styleNonce).innerText})),[]),c=function({h:e}){return function({top:t,left:n,corner:r,onGrabButton:o}){return e("button",{class:`editor__crop-corner editor__crop-corner--${r} `,style:{top:t,left:n},onMouseDown:e=>{e.preventDefault(),o(e,r)},onClick:e=>{e.preventDefault()}})}}({h:e}),u=t.useRef(null),l=t.useRef(null),d=t.useRef(null),[p,h]=t.useState({startX:0,startY:0,endX:0,endY:0}),[f,m]=t.useState(!1),[g,_]=t.useState(!1);function y(){const e=d.current,t=of(sf(n));if(e){e.width=t.width*rf,e.height=t.height*rf,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`;const n=e.getContext("2d");n&&n.scale(rf,rf)}const r=l.current;r&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`),h({startX:0,startY:0,endX:t.width,endY:t.height})}function v(e,t){m(!1),_(!0);const n=b(t),r=()=>{Ep.removeEventListener("mousemove",n),Ep.removeEventListener("mouseup",r),m(!0),_(!1)};Ep.addEventListener("mouseup",r),Ep.addEventListener("mousemove",n)}t.useEffect((()=>{kp.addEventListener("resize",y,!1)}),[]),t.useEffect((()=>{const e=d.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const r=of(sf(n)),o=of(p);t.clearRect(0,0,r.width,r.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,r.width,r.height),t.clearRect(o.x,o.y,o.width,o.height),t.strokeStyle="#ffffff",t.lineWidth=3,t.strokeRect(o.x+1,o.y+1,o.width-2,o.height-2),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(o.x+3,o.y+3,o.width-6,o.height-6)}),[p]);const b=t.useCallback((e=>function(t){if(!d.current)return;const n=d.current,r=n.getBoundingClientRect(),o=t.clientX-r.x,s=t.clientY-r.y;switch(e){case"top-left":h((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-nf),startY:Math.min(Math.max(0,s),e.endY-nf)})));break;case"top-right":h((e=>({...e,endX:Math.max(Math.min(o,n.width/rf),e.startX+nf),startY:Math.min(Math.max(0,s),e.endY-nf)})));break;case"bottom-left":h((e=>({...e,startX:Math.min(Math.max(0,o),e.endX-nf),endY:Math.max(Math.min(s,n.height/rf),e.startY+nf)})));break;case"bottom-right":h((e=>({...e,endX:Math.max(Math.min(o,n.width/rf),e.startX+nf),endY:Math.max(Math.min(s,n.height/rf),e.startY+nf)})))}}),[]),S=t.useRef({initialX:0,initialY:0});return s({onBeforeScreenshot:t.useCallback((()=>{r.el.style.display="none"}),[]),onScreenshot:t.useCallback((e=>{const t=n.getContext("2d");if(!t)throw new Error("Could not get canvas context");n.width=e.videoWidth,n.height=e.videoHeight,n.style.width="100%",n.style.height="100%",t.drawImage(e,0,0)}),[n]),onAfterScreenshot:t.useCallback((()=>{r.el.style.display="block";const e=u.current;e&&e.appendChild(n),y()}),[]),onError:t.useCallback((e=>{r.el.style.display="block",i(e)}),[])}),e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:a}),e("div",{class:"editor__canvas-container",ref:u},e("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:l},e("canvas",{onMouseDown:function(e){if(g)return;S.current={initialX:e.clientX,initialY:e.clientY};const t=e=>{const t=d.current;if(!t)return;const n=e.clientX-S.current.initialX,r=e.clientY-S.current.initialY;h((o=>{const s=Math.max(0,Math.min(o.startX+n,t.width/rf-(o.endX-o.startX))),i=Math.max(0,Math.min(o.startY+r,t.height/rf-(o.endY-o.startY))),a=s+(o.endX-o.startX),c=i+(o.endY-o.startY);return S.current.initialX=e.clientX,S.current.initialY=e.clientY,{startX:s,startY:i,endX:a,endY:c}}))},n=()=>{Ep.removeEventListener("mousemove",t),Ep.removeEventListener("mouseup",n)};Ep.addEventListener("mousemove",t),Ep.addEventListener("mouseup",n)},style:{position:"absolute",cursor:f?"move":"auto"},ref:d}),e(c,{left:p.startX-3,top:p.startY-3,onGrabButton:v,corner:"top-left"}),e(c,{left:p.endX-30+3,top:p.startY-3,onGrabButton:v,corner:"top-right"}),e(c,{left:p.startX-3,top:p.endY-30+3,onGrabButton:v,corner:"bottom-left"}),e(c,{left:p.endX-30+3,top:p.endY-30+3,onGrabButton:v,corner:"bottom-right"}),e("div",{style:{left:Math.max(0,p.endX-191),top:Math.max(0,p.endY+8),display:f?"flex":"none"},class:"editor__crop-btn-group"},e("button",{onClick:e=>{e.preventDefault(),d.current&&h({startX:0,startY:0,endX:d.current.width/rf,endY:d.current.height/rf}),m(!1)},class:"btn btn--default"},o.cancelButtonLabel),e("button",{onClick:e=>{e.preventDefault(),function(){const e=Ep.createElement("canvas"),t=of(sf(n)),r=of(p);e.width=r.width*rf,e.height=r.height*rf;const o=e.getContext("2d");o&&n&&o.drawImage(n,r.x/t.width*n.width,r.y/t.height*n.height,r.width/t.width*n.width,r.height/t.height*n.height,0,0,e.width,e.height);const s=n.getContext("2d");s&&(s.clearRect(0,0,n.width,n.height),n.width=e.width,n.height=e.height,n.style.width=`${r.width}px`,n.style.height=`${r.height}px`,s.drawImage(e,0,0),y())}(),m(!1)},class:"btn btn--primary"},o.confirmButtonLabel)))))}}const cf=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=Ep.createElement("canvas");return{input:af({h:e,hooks:t,imageBuffer:o,dialog:n,options:r}),value:async()=>{const e=await new Promise((e=>{o.toBlob(e,"image/png")}));if(e){return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}}),uf=Pp({lazyLoadIntegration:yi}),lf=Pp({getModalIntegration:()=>ef,getScreenshotIntegration:()=>cf}),df="c",pf="g",hf="s",ff="d";function mf(e,t){const n=i("globalMetricsAggregators",(()=>new WeakMap)),r=n.get(e);if(r)return r;const o=new t(e);return e.on("flush",(()=>o.flush())),e.on("close",(()=>o.close())),n.set(e,o),o}function gf(e,t,n,r,o={}){const s=o.client||xe();if(!s)return;const i=Pt(),a=i?Nt(i):void 0,c=a&&It(a).description,{unit:u,tags:l,timestamp:d}=o,{release:p,environment:h}=s.getOptions(),f={};p&&(f.release=p),h&&(f.environment=h),c&&(f.transaction=c),Te&&O.log(`Adding value of ${r} to ${t} metric ${n}`);mf(s,e).add(t,n,r,u,{...f,...l},d)}function _f(e,t,n,r){gf(e,"d",t,vf(n),r)}const yf={increment:function(e,t,n=1,r){gf(e,"c",t,vf(n),r)},distribution:_f,set:function(e,t,n,r){gf(e,"s",t,n,r)},gauge:function(e,t,n,r){gf(e,"g",t,vf(n),r)},timing:function(e,t,n,r="second",o){if("function"==typeof n){const r=X();return rr({op:"metrics.timing",name:t,startTime:r,onlyIfParent:!0},(s=>Cn((()=>n()),(()=>{}),(()=>{const n=X();_f(e,t,n-r,{...o,unit:"second"}),s.end(n)}))))}_f(e,t,n,{...o,unit:r})},getMetricsAggregatorForClient:mf};function vf(e){return"string"==typeof e?parseInt(e):e}function bf(e){return e.replace(/[^\w\-./]+/gi,"")}const Sf=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function wf(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of Sf)if(e===t)return n;return e}(t)),"")}function kf(e,t){O.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=function(e,t,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version});r&&t&&(o.dsn=Rn(t));const s=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Ln(o,[s])}(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)}const Ef={[df]:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},[pf]:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[ff]:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},[hf]:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};class xf{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",o={},s=X()){const i=Math.floor(s),a=t.replace(/[^\w\-.]+/gi,"_");const c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[bf(n)]=wf(String(e[n])));return t}(o),u=function(e){return e.replace(/[^\w]+/gi,"_")}(r),l=function(e,t,n,r){const o=Object.entries(W(r)).sort(((e,t)=>e[0].localeCompare(t[0])));return`${e}${t}${n}${o}`}(e,a,u,c);let d=this._buckets.get(l);const p=d&&"s"===e?d.metric.weight:0;d?(d.metric.add(n),d.timestamp<i&&(d.timestamp=i)):(d={metric:new Ef[e](n),timestamp:i,metricType:e,name:a,unit:u,tags:c},this._buckets.set(l,d));Ft(e,a,"string"==typeof n?d.metric.weight-p:n,u,o,l)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());kf(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}const Cf={increment:function(e,t=1,n){yf.increment(xf,e,t,n)},distribution:function(e,t,n){yf.distribution(xf,e,t,n)},set:function(e,t,n){yf.set(xf,e,t,n)},gauge:function(e,t,n){yf.gauge(xf,e,t,n)},timing:function(e,t,n="second",r){return yf.timing(xf,e,t,n,r)}};function Tf(e={}){const t=xe();if(!function(){const e=xe();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()}()||!t)return{};const n=ve(a());if(n.getTraceData)return n.getTraceData(e);const r=be(),o=e.span||Pt(),s=o?xt(o):function(e){const{traceId:t,sampled:n,spanId:r}=e.getPropagationContext();return bt(t,r,n)}(r),i=ct(o?qt(o):zt(t,r));return yt.test(s)?{"sentry-trace":s,baggage:i}:(O.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function If(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;const s=lt()&&t(e.fetchData.url);if(e.endTimestamp&&s){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){_t(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:mt,message:"internal_error"});e.end()}(n,e),delete r[t]))}const{method:i,url:a}=e.fetchData,c=function(e){try{return new URL(e).href}catch(e){return}}(a),u=c?Ws(c).host:void 0,l=!!Pt(),d=s&&l?or({name:`${i} ${a}`,attributes:{url:a,type:"fetch","http.method":i,"http.url":c,"server.address":u,[Ze]:o,[Ke]:"http.client"}}):new In;if(e.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=Mf(t,n,lt()&&l?d:void 0);r&&(e.args[1]=n,n.headers=r)}return d}function Mf(e,t,n){const r=Tf({span:n}),o=r["sentry-trace"],s=r.baggage;if(!o)return;const i=t.headers||(function(e){return"undefined"!=typeof Request&&b(e,Request)}(e)?e.headers:void 0);if(i){if(function(e){return"undefined"!=typeof Headers&&b(e,Headers)}(i)){const e=new Headers(i);if(e.set("sentry-trace",o),s){const t=e.get("baggage");if(t){const n=Rf(t);e.set("baggage",n?`${n},${s}`:s)}else e.set("baggage",s)}return e}if(Array.isArray(i)){const e=[...i.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&"baggage"===e[0]&&"string"==typeof e[1]){const[t,n,...r]=e;return[t,Rf(n),...r]}return e})),["sentry-trace",o]];return s&&e.push(["baggage",s]),e}{const e="baggage"in i?i.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?Rf(e):e)).filter((e=>""===e)):e&&t.push(Rf(e)),s&&t.push(s),{...i,"sentry-trace":o,baggage:t.length>0?t.join(","):void 0}}}return{...r}}function Rf(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(ot))).join(",")}const Af=new WeakMap,Of=new Map,Df={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Lf(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:a}={traceFetch:Df.traceFetch,traceXHR:Df.traceXHR,trackFetchStreamPerformance:Df.trackFetchStreamPerformance,...t},c="function"==typeof s?s:e=>!0,u=e=>function(e,t){const n=Io.location&&Io.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(e){return!1}const s=r.origin===o;return t?F(r.toString(),t)||s&&F(r.pathname,t):s}{const n=!!e.match(/^\/(?!\/)/);return t?F(e,t):n}}(e,a),l={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Of.get(e.span_id);t&&(e.timestamp=t/1e3,Of.delete(e.span_id))}})),e))),o&&function(e){const t="fetch-body-resolved";Or(t,e),Dr(t,(()=>Bs(js)))}((e=>{if(e.response){const t=Af.get(e.response);t&&e.endTimestamp&&Of.set(t,e.endTimestamp)}})),Us((e=>{const t=If(e,c,u,l);if(e.response&&e.fetchData.__span&&Af.set(e.response,e.fetchData.__span),t){const n=Ff(e.fetchData.url),r=n?Ws(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}i&&t&&Nf(t)}))),r&&Ds((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o&&o[Os];if(!o||o.__sentry_own_request__||!s)return;const i=lt()&&t(s.url);if(e.endTimestamp&&i){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(_t(t,s.status_code),t.end(),delete r[e]))}const a=Ff(s.url),c=a?Ws(a).host:void 0,u=!!Pt(),l=i&&u?or({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":a,url:s.url,"server.address":c,[Ze]:"auto.http.browser",[Ke]:"http.client"}}):new In;o.__sentry_xhr_span_id__=l.spanContext().spanId,r[o.__sentry_xhr_span_id__]=l,n(s.url)&&function(e,t){const{"sentry-trace":n,baggage:r}=Tf({span:t});n&&function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch(e){}}(e,n,r)}(o,lt()&&u?l:void 0);return l}(e,c,u,l);i&&t&&Nf(t)}))}function Nf(e){const{url:t}=It(e).data||{};if(!t||"string"!=typeof t)return;const n=Ta("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!K)return r;return[...r,["http.request.redirect_start",Pf(e.redirectStart)],["http.request.fetch_start",Pf(e.fetchStart)],["http.request.domain_lookup_start",Pf(e.domainLookupStart)],["http.request.domain_lookup_end",Pf(e.domainLookupEnd)],["http.request.connect_start",Pf(e.connectStart)],["http.request.secure_connection_start",Pf(e.secureConnectionStart)],["http.request.connection_end",Pf(e.connectEnd)],["http.request.request_start",Pf(e.requestStart)],["http.request.response_start",Pf(e.responseStart)],["http.request.response_end",Pf(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Pf(e=0){return((K||performance.timeOrigin)+e)/1e3}function Ff(e){try{return new URL(e,Io.location.origin).href}catch(e){return}}function $f(e){return"number"==typeof e&&isFinite(e)}function Uf(e,t,n,{...r}){const o=It(e).start_timestamp;return o&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),ir(e,(()=>{const e=or({startTime:t,...r});return e&&e.end(n),e}))}function Bf(e){const t=xe();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:s}=e,{release:i,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),u=c&&c.getReplayId(),l=be(),d=l.getUser(),p=void 0!==d?d.email||d.id||d.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch(e){}return or({name:n,attributes:{release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:u||void 0,transaction:r,"user_agent.original":rs.navigator&&rs.navigator.userAgent,...o},startTime:s,experimental:{standalone:!0}})}function jf(){return rs&&rs.addEventListener&&rs.performance}function Hf(e){return e/1e3}function zf(){let e,t,n=0;if(!function(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch(e){return!1}}())return;let r=!1;function o(){r||(r=!0,t&&function(e,t,n){ns&&O.log(`Sending CLS span (${e})`);const r=Hf((K||0)+(t&&t.startTime||0)),o=be().getScopeData().transactionName,s=t?E(t.sources[0]&&t.sources[0].node):"Layout shift",i=W({[Ze]:"auto.http.browser.cls",[Ke]:"ui.webvital.cls",[rt]:t&&t.duration||0,"sentry.pageload.span_id":n}),a=Bf({name:s,transaction:o,attributes:i,startTime:r});a&&(a.addEvent("cls",{[et]:"",[tt]:e}),a.end(r))}(n,e,t),s())}const s=ka((({metric:t})=>{const r=t.entries[t.entries.length-1];r&&(n=t.value,e=r)}),!0);ji((()=>{o()})),setTimeout((()=>{const e=xe();if(!e)return;const n=e.on("startNavigationSpan",(()=>{o(),n&&n()})),r=Pt(),s=r&&Nt(r),i=s&&It(s);i&&"pageload"===i.op&&(t=s.spanContext().spanId)}),0)}let qf,Wf,Yf=0,Vf={};function Gf({recordClsStandaloneSpans:e}){const t=jf();if(t&&K){t.mark&&rs.performance.mark("sentry-tracing-init");const n=xa((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Hf(K),r=Hf(t.startTime);Vf.fid={value:e.value,unit:"millisecond"},Vf["mark.fid"]={value:n+r,unit:"second"}})),r=Ea((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Vf.lcp={value:e.value,unit:"millisecond"},qf=t)}),!0),o=La("ttfb",(({metric:e})=>{e.entries[e.entries.length-1]&&(Vf.ttfb={value:e.value,unit:"millisecond"})}),Oa,Sa),s=e?zf():ka((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Vf.cls={value:e.value,unit:""},Wf=t)}),!0);return()=>{n(),r(),o(),s&&s()}}return()=>{}}function Xf(e,t){const n=jf();if(!n||!n.getEntries||!K)return;const r=Hf(K),o=n.getEntries(),{op:s,start_timestamp:i}=It(e);if(o.slice(Yf).forEach((t=>{const n=Hf(t.startTime),o=Hf(Math.max(0,t.duration));if(!("navigation"===s&&i&&r+n<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{Jf(e,t,r,n)})),Jf(e,t,"secureConnection",n,"TLS/SSL"),Jf(e,t,"fetch",n,"cache"),Jf(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+Hf(t.requestStart),o=n+Hf(t.responseEnd),s=n+Hf(t.responseStart);t.responseEnd&&(Uf(e,r,o,{op:"browser.request",name:t.name,attributes:{[Ze]:"auto.ui.browser.metrics"}}),Uf(e,s,o,{op:"browser.response",name:t.name,attributes:{[Ze]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,r);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=Fi(!1),i=Hf(s?s.requestStart:0),a=o+Math.max(n,i),c=o+n,u=c+r,l={[Ze]:"auto.resource.browser.metrics"};a!==c&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=a);Uf(e,a,u,{name:t.name,op:t.entryType,attributes:l})}(e,t,n,o,r);const s=Yi(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(Vf.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(Vf.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=Ws(n),a={[Ze]:"auto.resource.browser.metrics"};Kf(a,t,"transferSize","http.response_transfer_size"),Kf(a,t,"encodedBodySize","http.response_content_length"),Kf(a,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;null!=c&&(a["http.response_delivery_type"]=c);const u=t.renderBlockingStatus;u&&(a["resource.render_blocking_status"]=u);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(rs.location.origin);const l=s+r,d=l+o;Uf(e,l,d,{name:n.replace(rs.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}(e,t,t.name,n,o,r)}})),Yf=Math.max(o.length-1,0),function(e){const t=rs.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),$f(n.rtt)&&(Vf["connection.rtt"]={value:n.rtt,unit:"millisecond"}));$f(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);$f(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s){!function(e){const t=Fi(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Vf);const n=Vf["mark.fid"];n&&Vf.fid&&(Uf(e,n.value,n.value+Hf(Vf.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Ze]:"auto.ui.browser.metrics"}}),delete Vf["mark.fid"]),"fcp"in Vf&&t.recordClsOnPageloadSpan||delete Vf.cls,Object.entries(Vf).forEach((([e,t])=>{Vn(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",r),e.setAttribute("performance.activationStart",$i()),function(e){qf&&(qf.element&&e.setAttribute("lcp.element",E(qf.element)),qf.id&&e.setAttribute("lcp.id",qf.id),qf.url&&e.setAttribute("lcp.url",qf.url.trim().slice(0,200)),null!=qf.loadTime&&e.setAttribute("lcp.loadTime",qf.loadTime),null!=qf.renderTime&&e.setAttribute("lcp.renderTime",qf.renderTime),e.setAttribute("lcp.size",qf.size));Wf&&Wf.sources&&Wf.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,E(t.node))))}(e)}qf=void 0,Wf=void 0,Vf={}}function Jf(e,t,n,r,o=n){const s=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),i=t[s],a=t[`${n}Start`];a&&i&&Uf(e,r+Hf(a),r+Hf(i),{op:`browser.${o}`,name:t.name,attributes:{[Ze]:"auto.ui.browser.metrics"}})}function Kf(e,t,n,r){const o=t[n];null!=o&&o<2147483647&&(e[r]=o)}const Zf=[],Qf=new Map;function em(){if(jf()&&K){const e=Ca((({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&tm[t.name]));if(!t)return;const{interactionId:n}=t,r=tm[t.name],o=Hf(K+t.startTime),s=Hf(e.value),i=Pt(),a=i?Nt(i):void 0,c=(null!=n?Qf.get(n):void 0)||a,u=c?It(c).description:be().getScopeData().transactionName,l=Bf({name:E(t.target),transaction:u,attributes:W({[Ze]:"auto.http.browser.inp",[Ke]:`ui.interaction.${r}`,[rt]:t.duration}),startTime:o});l&&(l.addEvent("inp",{[et]:"millisecond",[tt]:e.value}),l.end(o+s))}));return()=>{e()}}return()=>{}}const tm={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const nm={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function rm(e,t={}){const n=new Map;let r,o=!1,s="externalFinish",i=!t.disableAutoFinish;const a=[],{idleTimeout:c=nm.idleTimeout,finalTimeout:u=nm.finalTimeout,childSpanTimeout:l=nm.childSpanTimeout,beforeSpanEnd:d}=t,p=xe();if(!p||!lt())return new In;const h=be(),f=Pt(),m=function(e){const t=or(e);return le(be(),t),Te&&O.log("[Tracing] Started span is an idle span"),t}(e);function g(){r&&(clearTimeout(r),r=void 0)}function _(e){g(),r=setTimeout((()=>{!o&&0===n.size&&i&&(s="idleTimeout",m.end(e))}),c)}function y(e){r=setTimeout((()=>{!o&&i&&(s="heartbeatFailed",m.end(e))}),l)}function v(e){o=!0,n.clear(),a.forEach((e=>e())),le(h,f);const t=It(m),{start_timestamp:r}=t;if(!r)return;(t.data||{})[Qe]||m.setAttribute(Qe,s),O.log(`[Tracing] Idle span "${t.op}" finished`);const i=Lt(m).filter((e=>e!==m));let l=0;i.forEach((t=>{t.isRecording()&&(t.setStatus({code:mt,message:"cancelled"}),t.end(e),Te&&O.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=It(t),{timestamp:r=0,start_timestamp:o=0}=n,s=o<=e,i=r-o<=(u+c)/1e3;if(Te){const e=JSON.stringify(t,void 0,2);s?i||O.log("[Tracing] Discarding span since it finished after idle span final timeout",e):O.log("[Tracing] Discarding span since it happened after idle span was finished",e)}i&&s||(!function(e,t){e[At]&&e[At].delete(t)}(m,t),l++)})),l>0&&m.setAttribute("sentry.idle_span_discarded_spans",l)}return m.end=new Proxy(m.end,{apply(e,t,n){d&&d(m);const[r,...o]=n,s=Ct(r||X()),i=Lt(m).filter((e=>e!==m));if(!i.length)return v(s),Reflect.apply(e,t,[s,...o]);const a=i.map((e=>It(e).timestamp)).filter((e=>!!e)),c=a.length?Math.max(...a):void 0,l=It(m).start_timestamp,p=Math.min(l?l+u/1e3:1/0,Math.max(l||-1/0,Math.min(s,c||1/0)));return v(p),Reflect.apply(e,t,[p,...o])}}),a.push(p.on("spanStart",(e=>{if(o||e===m||It(e).timestamp)return;var t;Lt(m).includes(e)&&(t=e.spanContext().spanId,g(),n.set(t,!0),y(X()+l/1e3))}))),a.push(p.on("spanEnd",(e=>{var t;o||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&_(X()+c/1e3))}))),a.push(p.on("idleSpanEnableAutoFinish",(e=>{e===m&&(i=!0,_(),n.size&&y())}))),t.disableAutoFinish||_(),setTimeout((()=>{o||(m.setStatus({code:mt,message:"deadline_exceeded"}),s="finalTimeout",m.end())}),u),m}const om={...nm,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Df},sm=(e={})=>{Hr();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:o,enableStandaloneClsSpans:i},beforeStartSpan:a,idleTimeout:c,finalTimeout:u,childSpanTimeout:l,markBackgroundSpan:d,traceFetch:p,traceXHR:h,trackFetchStreamPerformance:f,shouldCreateSpanForRequest:m,enableHTTPTimings:g,instrumentPageLoad:_,instrumentNavigation:y}={...om,...e},v=Gf({recordClsStandaloneSpans:i||!1});t&&em(),r&&s.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{const t=Pt();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=Hf(K+n.startTime),{start_timestamp:r,op:o}=It(t);if("navigation"===o&&r&&e<r)continue;const s=Hf(n.duration),i={[Ze]:"auto.ui.browser.metrics"},a=n.scripts[0],{invoker:c,invokerType:u,sourceURL:l,sourceFunctionName:d,sourceCharPosition:p}=a;i["browser.script.invoker"]=c,i["browser.script.invoker_type"]=u,l&&(i["code.filepath"]=l),d&&(i["code.function"]=d),-1!==p&&(i["browser.script.source_char_position"]=p),Uf(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:i})}})).observe({type:"long-animation-frame",buffered:!0}):n&&Ta("longtask",(({entries:e})=>{const t=Pt();if(!t)return;const{op:n,start_timestamp:r}=It(t);for(const o of e){const e=Hf(K+o.startTime),s=Hf(o.duration);"navigation"===n&&r&&e<r||Uf(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ze]:"auto.ui.browser.metrics"}})}})),o&&Ta("event",(({entries:e})=>{const t=Pt();if(t)for(const n of e)if("click"===n.name){const e=Hf(K+n.startTime),r=Hf(n.duration),o={name:E(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Ze]:"auto.ui.browser.metrics"}},s=T(n.target);s&&(o.attributes["ui.component_name"]=s),Uf(t,e,e+r,o)}}));const b={name:void 0,source:void 0};function S(e,t){const n="pageload"===t.op,r=a?a(t):t,o=r.attributes||{};t.name!==r.name&&(o[Xe]="custom",r.attributes=o),b.name=r.name,b.source=o[Xe];const s=rm(r,{idleTimeout:c,finalTimeout:u,childSpanTimeout:l,disableAutoFinish:n,beforeSpanEnd:e=>{v(),Xf(e,{recordClsOnPageloadSpan:!i})}});function d(){["interactive","complete"].includes(Io.document.readyState)&&e.emit("idleSpanEnableAutoFinish",s)}return n&&Io.document&&(Io.document.addEventListener("readystatechange",(()=>{d()})),d()),s}return{name:"BrowserTracing",afterAllSetup(e){let n,r=Io.location&&Io.location.href;function s(){n&&!It(n).timestamp&&(Po&&O.log(`[Tracing] Finishing current active span with op: ${It(n).op}`),n.end())}e.on("startNavigationSpan",(t=>{xe()===e&&(s(),n=S(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,r={})=>{if(xe()!==e)return;s();const o=vt(r.sentryTrace||cm("sentry-trace"),r.baggage||cm("baggage"));be().setPropagationContext(o),n=S(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=It(e).op;if(e!==Nt(e)||"navigation"!==t&&"pageload"!==t)return;const n=be(),r=n.getPropagationContext();n.setPropagationContext({...r,sampled:void 0!==r.sampled?r.sampled:Mt(e),dsc:r.dsc||qt(e)})})),Io.location&&(_&&im(e,{name:Io.location.pathname,startTime:K?K/1e3:void 0,attributes:{[Xe]:"url",[Ze]:"auto.pageload.browser"}}),y&&Fs((({to:t,from:n})=>{void 0===n&&r&&-1!==r.indexOf(t)?r=void 0:n!==t&&(r=void 0,am(e,{name:Io.location.pathname,attributes:{[Xe]:"url",[Ze]:"auto.navigation.browser"}}))}))),d&&(Io&&Io.document?Io.document.addEventListener("visibilitychange",(()=>{const e=Pt();if(!e)return;const t=Nt(e);if(Io.document.hidden&&t){const e="cancelled",{op:n,status:r}=It(t);Po&&O.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:mt,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):Po&&O.warn("[Tracing] Could not set up background tab detection due to lack of global document")),o&&function(e,t,n,r){let o;const s=()=>{const s="ui.action.click",i=Pt(),a=i&&Nt(i);if(a){const e=It(a).op;if(["navigation","pageload"].includes(e))return void(Po&&O.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`))}o&&(o.setAttribute(Qe,"interactionInterrupted"),o.end(),o=void 0),r.name?o=rm({name:r.name,op:s,attributes:{[Xe]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):Po&&O.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`)};Io.document&&addEventListener("click",s,{once:!1,capture:!0})}(c,u,l,b),t&&function(){const e=({entries:e})=>{const t=Pt(),n=t&&Nt(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!Qf.has(t)){if(Zf.length>10){const e=Zf.shift();Qf.delete(e)}Zf.push(t),Qf.set(t,n)}}))};Ta("event",e),Ta("first-input",e)}(),Lf(e,{traceFetch:p,traceXHR:h,trackFetchStreamPerformance:f,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:g})}}};function im(e,t,n){e.emit("startPageLoadSpan",t,n),be().setTransactionName(t.name);const r=Pt();return"pageload"===(r&&It(r).op)?r:void 0}function am(e,t){Se().setPropagationContext({traceId:ie()}),be().setPropagationContext({traceId:ie()}),e.emit("startNavigationSpan",t),be().setTransactionName(t.name);const n=Pt();return"navigation"===(n&&It(n).op)?n:void 0}function cm(e){const t=(n=`meta[name=${e}]`,w.document&&w.document.querySelector?w.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}const um=100,lm=5e3,dm=36e5;function pm(e){function t(...e){Te&&O.info("[Offline]:",...e)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const o=n.createStore(n);let s,i=lm;function a(e){s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const e=await o.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),u(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof s&&s.unref&&s.unref()}function c(){s||(a(i),i=Math.min(2*i,dm))}async function u(e,s=!1){if(!s&&Fn(e,["replay_event","replay_recording"]))return await o.push(e),a(um),{};try{const t=await r.send(e);let n=um;if(t)if(t.headers&&t.headers["retry-after"])n=go(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return a(n),i=lm,t}catch(r){if(await function(e,t,r){return!Fn(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,r))}(e,r,i))return s?await o.unshift(e):await o.push(e),c(),t("Error sending. Event queued.",r),{};throw r}}return n.flushAtStartup&&c(),{send:u,flush:e=>(void 0===e&&(i=lm,a(um)),r.flush(e))}}}function hm(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function fm(e){return hm(e.getAllKeys())}function mm(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=hm(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await Un(t);await function(e,t,n){return e((e=>fm(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),hm(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await Un(t);await function(e,t,n){return e((e=>fm(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),hm(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e((e=>fm(e).then((t=>{const n=t[0];if(null!=n)return hm(e.get(n)).then((t=>(e.delete(n),hm(e.transaction).then((()=>t)))))}))))}(n());if(e)return Bn(e)}catch(e){}}}}function gm(e=cs){return function(e){return t=>{const n=e({...t,createStore:mm});return Io.addEventListener("online",(async e=>{await n.flush()})),n}}(pm(e))}const _m=1e6,ym=String(0),vm="main";let bm="",Sm="",wm="",km=Io.navigator&&Io.navigator.userAgent||"",Em="";const xm=Io.navigator&&Io.navigator.language||Io.navigator&&Io.navigator.languages&&Io.navigator.languages[0]||"";const Cm=Io.navigator&&Io.navigator.userAgentData;var Tm;function Im(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[ym]:{name:vm}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,i="number"==typeof performance.timeOrigin?performance.timeOrigin:K||0,a=i-(K||i);return e.samples.forEach(((o,i)=>{if(void 0===o.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[i]={elapsed_since_start_ns:((o.timestamp+a-s)*_m).toFixed(0),stack_id:t,thread_id:ym});let c=e.stacks[o.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];t&&void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((o.timestamp+a-s)*_m).toFixed(0),stack_id:n,thread_id:ym};r.stacks[n]=u,r.samples[i]=l,n++})),r}(e):e}function Mm(e,t,n,o){if("transaction"!==o.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&Po&&O.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(o),i=Im(n),a=t||("number"==typeof o.start_timestamp?1e3*o.start_timestamp:1e3*X()),c="number"==typeof o.timestamp?1e3*o.timestamp:1e3*X();return{event_id:e,timestamp:new Date(a).toISOString(),platform:"javascript",version:"1",release:o.release||"",environment:o.environment||r,runtime:{name:"javascript",version:Io.navigator.userAgent},os:{name:bm,version:Sm,build_number:km},device:{locale:xm,model:Em,manufacturer:km,architecture:wm,is_emulator:!1},debug_meta:{images:Am(n.resources)},profile:i,transactions:[{name:o.transaction||"",id:o.event_id||Z(),trace_id:s,active_thread_id:ym,relative_start_ns:"0",relative_end_ns:(1e6*(c-a)).toFixed(0)}]}}function Rm(e){return"pageload"===It(e).op}function Am(e){const t=xe(),n=t&&t.getOptions(),r=n&&n.stackParser;return r?function(e,t){const n=Pe(e);if(!n)return[];const r=[];for(const e of t)e&&n[e]&&r.push({type:"sourcemap",code_file:e,debug_id:n[e]});return r}(r,e):[]}"object"==typeof(Tm=Cm)&&null!==Tm&&"getHighEntropyValues"in Tm&&Cm.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(bm=e.platform||"",wm=e.architecture||"",Em=e.model||"",Sm=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];km=`${t.brand} ${t.version}`}})).catch((e=>{}));let Om=!1;function Dm(e){if(Om)return Po&&O.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Po&&O.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=xe(),n=t&&t.getOptions();if(!n)return Po&&O.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(Po&&O.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(Po&&O.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return Po&&O.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return Po&&O.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(Po&&O.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Lm(e,t,n,r){return function(e){return e.samples.length<2?(Po&&O.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(Po&&O.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?Mm(e,t,n,r):null}const Nm=new Map;function Pm(e){const t=Nm.get(e);return t&&Nm.delete(e),t}function Fm(e){let t;Rm(e)&&(t=1e3*X());const n=function(){const e=Io.Profiler;if("function"!=typeof e)return void(Po&&O.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){Po&&(O.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),O.log("[Profiling] Disabling profiling for current user session.")),Om=!0}}();if(!n)return;Po&&O.log(`[Profiling] started profiling span: ${It(e).description}`);const r=Z();async function o(){if(e&&n)return n.stop().then((t=>{s&&(Io.clearTimeout(s),s=void 0),Po&&O.log(`[Profiling] stopped profiling of span: ${It(e).description}`),t?function(e,t){if(Nm.set(e,t),Nm.size>30){const e=Nm.keys().next().value;Nm.delete(e)}}(r,t):Po&&O.log(`[Profiling] profiler returned null profile for: ${It(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{Po&&O.log("[Profiling] error while stopping profiler:",e)}))}be().setContext("profile",{profile_id:r,start_timestamp:t});let s=Io.setTimeout((()=>{Po&&O.log("[Profiling] max profile duration elapsed, stopping profiling for:",It(e).description),o()}),3e4);const i=e.end.bind(e);e.end=function(){return e?(o().then((()=>{i()}),(()=>{i()})),e):i()}}const $m=()=>({name:"BrowserProfiling",setup(e){const t=Pt(),n=t&&Nt(t);n&&Rm(n)&&Dm(n)&&Fm(n),e.on("spanStart",(e=>{e===Nt(e)&&Dm(e)&&Fm(e)})),e.on("beforeEnvelope",(e=>{if(!Nm.size)return;const t=function(e){const t=[];return Pn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){Po&&O.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){Po&&O.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const s=Pm(r);if(!s){Po&&O.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const i=Lm(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))}});const Um=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{Po&&O.log("Using Sidecar URL",t)},processEvent:e=>function(e){return Boolean("transaction"===e.type&&e.spans&&e.contexts&&e.contexts.trace&&"ui.action.click"===e.contexts.trace.op&&e.spans.some((({description:e})=>e&&e.includes("#sentry-spotlight"))))}(e)?null:e,afterAllSetup:e=>{!function(e,t){const n=ss("fetch");let r=0;e.on("beforeEnvelope",(e=>{r>3?O.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:Un(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then((e=>{e.status>=200&&e.status<400&&(r=0)}),(e=>{r++,O.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)}))}))}(e,t)}}};const Bm=100;function jm(e){const t=be().getScopeData().contexts.flags,n=t?t.values:[];return n.length?(void 0===e.contexts&&(e.contexts={}),e.contexts.flags={values:[...n]},e):e}function Hm(e,t,n=Bm){const r=be().getScopeData().contexts;r.flags||(r.flags={values:[]});!function(e,t,n,r){if("boolean"!=typeof n)return;if(e.length>r)return void(Po&&O.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`));const o=e.findIndex((e=>e.flag===t));-1!==o&&e.splice(o,1);e.length===r&&e.shift();e.push({flag:t,result:n})}(r.flags.values,e,t,n)}const zm=()=>({name:"FeatureFlags",processEvent(e,t,n){return jm(e)},addFeatureFlag(e,t){Hm(e,t)}}),qm=()=>({name:"LaunchDarkly",processEvent(e,t,n){return jm(e)}});function Wm(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Hm(e,t.value)}}}const Ym=()=>({name:"OpenFeature",processEvent(e,t,n){return jm(e)}});class Vm{after(e,t){Hm(t.flagKey,t.value)}error(e,t,n){Hm(e.flagKey,e.defaultValue)}}const Gm=({unleashClientClass:e})=>({name:"Unleash",processEvent(e,t,n){return jm(e)},setupOnce(){$(e.prototype,"isEnabled",Xm)}});function Xm(e){return function(...t){const n=t[0],r=e.apply(this,t);return"string"==typeof n&&"boolean"==typeof r?Hm(n,r):Po&&O.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}}}]);